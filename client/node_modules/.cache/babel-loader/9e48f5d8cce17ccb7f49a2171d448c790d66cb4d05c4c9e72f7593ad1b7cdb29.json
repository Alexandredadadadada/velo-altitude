{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{Card,Form,Button,Spinner,ListGroup,Badge}from'react-bootstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faPaperPlane,faBicycle,faChartLine,faHeartbeat,faUtensils,faDumbbell,faRunning,faRobot,faUser}from'@fortawesome/free-solid-svg-icons';import{useTranslation}from'react-i18next';import{useNotification}from'../common/NotificationSystem';/**\n * Assistant Coach IA pour le cyclisme\n * Fournit des conseils personnalisés, des réponses aux questions et des analyses\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CyclingCoach=_ref=>{let{userProfile,activityData}=_ref;const{t}=useTranslation();const{notify}=useNotification();const[messages,setMessages]=useState([]);const[input,setInput]=useState('');const[isLoading,setIsLoading]=useState(false);const[suggestions,setSuggestions]=useState([]);const[activeCategory,setActiveCategory]=useState('all');const messagesEndRef=useRef(null);// Message de bienvenue initial\nuseEffect(()=>{const welcomeMessage={id:'welcome',sender:'coach',text:userProfile!==null&&userProfile!==void 0&&userProfile.firstName?`Bonjour ${userProfile.firstName} ! Je suis votre coach cyclisme personnel. Comment puis-je vous aider aujourd'hui ?`:\"Bonjour ! Je suis votre coach cyclisme personnel. Comment puis-je vous aider aujourd'hui ?\",timestamp:new Date(),category:'general'};setMessages([welcomeMessage]);// Suggestions initiales\ngenerateSuggestions();},[userProfile]);// Défiler automatiquement vers le dernier message\nuseEffect(()=>{if(messagesEndRef.current){messagesEndRef.current.scrollIntoView({behavior:'smooth'});}},[messages]);// Générer des suggestions basées sur le profil et l'historique\nconst generateSuggestions=()=>{const defaultSuggestions=[{text:\"Comment améliorer mon endurance ?\",category:\"training\"},{text:\"Que manger avant une sortie longue ?\",category:\"nutrition\"},{text:\"Quels exercices pour renforcer mes jambes ?\",category:\"strength\"},{text:\"Comment calculer ma FTP ?\",category:\"performance\"}];// Ajouter des suggestions personnalisées basées sur le profil utilisateur\nlet personalizedSuggestions=[...defaultSuggestions];if(userProfile){// Suggestions basées sur le niveau\nif(userProfile.level==='beginner'){personalizedSuggestions.push({text:\"Conseils pour débuter en cyclisme\",category:\"training\"},{text:\"Quelle devrait être ma cadence de pédalage ?\",category:\"technique\"});}else if(userProfile.level==='intermediate'){personalizedSuggestions.push({text:\"Comment progresser au seuil ?\",category:\"training\"},{text:\"Exercices de puissance pour cols\",category:\"training\"});}else if(userProfile.level==='advanced'||userProfile.level==='elite'){personalizedSuggestions.push({text:\"Optimiser ma récupération entre les séances\",category:\"recovery\"},{text:\"Stratégies de course pour compétition\",category:\"performance\"});}// Suggestions basées sur l'âge\nif(userProfile.age&&userProfile.age>50){personalizedSuggestions.push({text:\"Conseils cyclisme pour seniors\",category:\"training\"},{text:\"Récupération après 50 ans\",category:\"recovery\"});}}// Ajouter des suggestions basées sur les données d'activité récentes\nif(activityData&&activityData.length>0){const recentActivity=activityData[0];// Si longue sortie récente\nif(recentActivity.duration>180){// plus de 3h\npersonalizedSuggestions.push({text:\"Récupérer après ma longue sortie\",category:\"recovery\"},{text:\"Nutrition post-effort prolongé\",category:\"nutrition\"});}// Si intensité élevée récente\nif(recentActivity.intensity&&recentActivity.intensity>0.8){personalizedSuggestions.push({text:\"Planifier après un effort intense\",category:\"training\"},{text:\"Optimiser ma récupération active\",category:\"recovery\"});}}// Suggestions aléatoires mais pertinentes\nsetSuggestions(shuffle(personalizedSuggestions).slice(0,5));};// Mélanger un tableau (pour les suggestions)\nconst shuffle=array=>{const newArray=[...array];for(let i=newArray.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[newArray[i],newArray[j]]=[newArray[j],newArray[i]];}return newArray;};// Envoyer un message\nconst handleSendMessage=async e=>{e.preventDefault();if(!input.trim())return;const userMessage={id:`user-${Date.now()}`,sender:'user',text:input.trim(),timestamp:new Date(),category:'general'};setMessages(prev=>[...prev,userMessage]);setInput('');setIsLoading(true);try{// Simuler l'appel à une API (à remplacer par un appel réel)\nawait new Promise(resolve=>setTimeout(resolve,1000));// Déterminer la catégorie de la question\nconst category=determineCategory(input.trim());// Générer une réponse adaptée\nconst coachResponse=await generateCoachResponse(input.trim(),category,userProfile,activityData);setMessages(prev=>[...prev,{id:`coach-${Date.now()}`,sender:'coach',text:coachResponse.text,additionalInfo:coachResponse.additionalInfo,links:coachResponse.links,category:category,timestamp:new Date()}]);// Rafraîchir les suggestions\ngenerateSuggestions();}catch(error){console.error('Erreur de communication avec le coach IA:',error);notify.error('Impossible de communiquer avec le coach IA',error);setMessages(prev=>[...prev,{id:`error-${Date.now()}`,sender:'coach',text:\"Désolé, j'ai rencontré un problème technique. Pouvez-vous reformuler votre question ?\",timestamp:new Date(),category:'error'}]);}finally{setIsLoading(false);}};// Utiliser une suggestion\nconst handleUseSuggestion=suggestion=>{setInput(suggestion.text);// Focus sur l'input\ndocument.getElementById('coach-input').focus();};// Déterminer la catégorie d'une question\nconst determineCategory=text=>{const lowerText=text.toLowerCase();const categories={training:['entraînement','séance','interval','hiit','sortie','volume','intensité'],nutrition:['manger','nutrition','alimentation','hydratation','boisson','repas'],recovery:['récupération','repos','sommeil','fatigue','surmenage'],performance:['ftp','puissance','performance','améliorer','progression'],technique:['technique','position','cadence','pédalage','aérodynamique'],equipment:['vélo','matériel','équipement','roues','pneus','guidon','selle'],strength:['musculation','force','exercice','renforcement','gainage'],health:['santé','blessure','douleur','courbature','médical']};for(const[category,keywords]of Object.entries(categories)){if(keywords.some(keyword=>lowerText.includes(keyword))){return category;}}return'general';};// Générer une réponse de coach contextualisée\nconst generateCoachResponse=async(question,category,profile,activities)=>{// Cette fonction simule une réponse d'IA - à remplacer par un appel API réel\n// Réponses pré-définies basées sur la catégorie\nconst responses={training:[\"Pour améliorer votre endurance, commencez par augmenter progressivement la durée de vos sorties longues de 10% par semaine. Variez également l'intensité avec des séances en zone 2 (65-75% de FTP) pour construire une base aérobie solide.\",\"Pour progresser en cyclisme, la constance est clé. Visez 3-4 sorties par semaine avec une variété d'intensités. Incluez une sortie longue, une séance d'intervalles et une ou deux sorties de récupération.\"],nutrition:[\"Avant une sortie longue, privilégiez un repas riche en glucides complexes 2-3h avant (pâtes, riz, pain complet). Pendant l'effort, visez 60-90g de glucides par heure selon l'intensité, et hydratez-vous avec 500-750ml d'eau par heure.\",\"Pour la récupération post-effort, consommez des protéines (15-25g) et des glucides dans les 30 minutes suivant la fin. Un ratio de 3:1 glucides/protéines est idéal pour reconstituer les réserves de glycogène.\"],recovery:[\"La récupération est aussi importante que l'entraînement. Alternez jours intenses et jours faciles, dormez 7-9h par nuit, et utilisez des techniques comme le massage, les bains froids ou la compression pour accélérer la récupération musculaire.\",\"Pour éviter le surentraînement, surveillez votre fréquence cardiaque au repos. Une augmentation de plus de 7-10% est un signal d'alarme indiquant que votre corps a besoin de plus de récupération.\"],performance:[\"Pour estimer votre FTP (seuil fonctionnel de puissance), effectuez un test de 20 minutes à intensité maximale soutenable. Multipliez la puissance moyenne par 0.95 pour obtenir une estimation de votre FTP.\",\"Pour améliorer votre puissance au seuil, intégrez des intervalles de 8-20 minutes à 90-105% de votre FTP, avec une récupération égale à 50% du temps d'effort.\"]};// Personnalisation basée sur le profil\nlet profileContext=\"\";if(profile){if(profile.ftp){profileContext+=`Avec votre FTP actuelle de ${profile.ftp}W, `;}if(profile.level){const levelMap={beginner:\"en tant que débutant\",intermediate:\"à votre niveau intermédiaire\",advanced:\"en tant que cycliste avancé\",elite:\"en tant que cycliste d'élite\"};profileContext+=levelMap[profile.level]||\"\";}}// Sélection d'une réponse\nlet responseText=\"\";if(responses[category]&&responses[category].length>0){responseText=responses[category][Math.floor(Math.random()*responses[category].length)];// Ajouter le contexte du profil si disponible\nif(profileContext){responseText=profileContext+\", \"+responseText.charAt(0).toLowerCase()+responseText.slice(1);}}else{// Réponse générique\nresponseText=\"Votre question sur \"+category+\" est intéressante. L'équilibre entre entraînement, récupération et nutrition est essentiel pour progresser. N'hésitez pas à me poser des questions plus spécifiques pour obtenir des conseils adaptés à votre situation.\";}// Informations supplémentaires\nlet additionalInfo=null;let links=null;// Ajouter des informations pertinentes selon la catégorie\nif(category==='training'){additionalInfo={title:\"Zones d'entraînement\",content:\"Zone 1: <55% FTP (récupération)\\nZone 2: 56-75% FTP (endurance)\\nZone 3: 76-90% FTP (tempo)\\nZone 4: 91-105% FTP (seuil)\\nZone 5: 106-120% FTP (VO2max)\\nZone 6: 121-150% FTP (anaérobie)\\nZone 7: >150% FTP (sprint)\"};links=[{text:\"Guide complet des zones d'entraînement\",url:\"#/articles/zones-entrainement\"},{text:\"Programmation cycliste avancée\",url:\"#/articles/programmation-cycliste\"}];}else if(category==='nutrition'){additionalInfo={title:\"Apports recommandés pour cyclistes\",content:\"Entraînement: 5-7g de glucides/kg de poids corporel/jour\\nCompétition: 8-10g de glucides/kg/jour\\nProtéines: 1.2-1.6g/kg/jour\\nLipides: 1g/kg/jour\"};}return{text:responseText,additionalInfo,links};};// Filtrer les messages par catégorie\nconst filteredMessages=activeCategory==='all'?messages:messages.filter(m=>m.category===activeCategory||m.sender==='user');// Icônes pour les catégories\nconst categoryIcons={training:faRunning,nutrition:faUtensils,performance:faChartLine,recovery:faHeartbeat,equipment:faBicycle,strength:faDumbbell,general:faRobot};return/*#__PURE__*/_jsxs(\"div\",{className:\"cycling-coach\",children:[/*#__PURE__*/_jsxs(Card,{className:\"chat-container\",children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faRobot,className:\"me-2\"}),\"Coach Cyclisme IA\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"category-filters\",children:[/*#__PURE__*/_jsx(Button,{variant:activeCategory==='all'?'primary':'outline-primary',size:\"sm\",onClick:()=>setActiveCategory('all'),className:\"me-1\",children:\"Tous\"}),['training','nutrition','performance','recovery'].map(cat=>/*#__PURE__*/_jsxs(Button,{variant:activeCategory===cat?'primary':'outline-primary',size:\"sm\",onClick:()=>setActiveCategory(cat),className:\"me-1\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:categoryIcons[cat]||faRobot,className:\"me-1\"}),t(`categories.${cat}`)]},cat))]})]})}),/*#__PURE__*/_jsxs(Card.Body,{className:\"chat-messages\",children:[/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:filteredMessages.map(message=>/*#__PURE__*/_jsxs(ListGroup.Item,{className:`message ${message.sender}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"message-header\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"message-sender\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:message.sender==='coach'?faRobot:faUser,className:\"me-2\"}),message.sender==='coach'?'Coach IA':'Vous']}),/*#__PURE__*/_jsx(\"span\",{className:\"message-time\",children:message.timestamp.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"message-content\",children:message.text}),message.additionalInfo&&/*#__PURE__*/_jsxs(\"div\",{className:\"additional-info mt-2\",children:[/*#__PURE__*/_jsx(\"h6\",{children:message.additionalInfo.title}),/*#__PURE__*/_jsx(\"pre\",{className:\"info-content p-2 bg-light rounded\",children:message.additionalInfo.content})]}),message.links&&message.links.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"resource-links mt-2\",children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Ressources compl\\xE9mentaires:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"ps-3\",children:message.links.map((link,idx)=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:link.url,target:\"_blank\",rel:\"noopener noreferrer\",children:link.text})},idx))})]}),message.sender==='coach'&&message.category&&message.category!=='general'&&/*#__PURE__*/_jsxs(Badge,{bg:\"light\",text:\"dark\",className:\"mt-2 category-badge\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:categoryIcons[message.category]||faRobot,className:\"me-1\"}),t(`categories.${message.category}`)]})]},message.id))}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsxs(Card.Footer,{children:[suggestions.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"suggestions mb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"suggestion-chips d-flex flex-wrap gap-2\",children:suggestions.map((suggestion,idx)=>/*#__PURE__*/_jsxs(Badge,{bg:\"light\",text:\"primary\",className:\"suggestion-chip p-2 cursor-pointer\",onClick:()=>handleUseSuggestion(suggestion),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:categoryIcons[suggestion.category]||faRobot,className:\"me-1\"}),suggestion.text]},idx))})}),/*#__PURE__*/_jsx(Form,{onSubmit:handleSendMessage,children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(Form.Control,{id:\"coach-input\",type:\"text\",placeholder:\"Posez une question sur le cyclisme, l'entra\\xEEnement, la nutrition...\",value:input,onChange:e=>setInput(e.target.value),disabled:isLoading}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",disabled:isLoading||!input.trim(),children:isLoading?/*#__PURE__*/_jsx(Spinner,{animation:\"border\",size:\"sm\"}):/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faPaperPlane})})]})})]})]}),/*#__PURE__*/_jsx(\"style\",{jsx:\"true\",children:`\n        .cycling-coach {\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n        }\n        \n        .chat-container {\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n        }\n        \n        .chat-messages {\n          flex: 1;\n          overflow-y: auto;\n          max-height: 500px;\n        }\n        \n        .message {\n          margin-bottom: 8px;\n          padding: 10px 15px;\n          border-radius: 8px;\n          max-width: 85%;\n        }\n        \n        .message.user {\n          background-color: #f0f0f0;\n          align-self: flex-end;\n          margin-left: auto;\n        }\n        \n        .message.coach {\n          background-color: #f8f9fa;\n          border-left: 3px solid #0d6efd;\n        }\n        \n        .message-header {\n          display: flex;\n          justify-content: space-between;\n          margin-bottom: 5px;\n          font-size: 0.85rem;\n        }\n        \n        .message-time {\n          color: #6c757d;\n          font-size: 0.75rem;\n        }\n        \n        .cursor-pointer {\n          cursor: pointer;\n        }\n        \n        .suggestion-chip:hover {\n          background-color: #e9ecef !important;\n        }\n        \n        .category-badge {\n          font-size: 0.7rem;\n        }\n        \n        .info-content {\n          font-size: 0.8rem;\n          white-space: pre-wrap;\n        }\n      `})]});};CyclingCoach.defaultProps={activityData:[]};export default CyclingCoach;","map":{"version":3,"names":["React","useState","useEffect","useRef","Card","Form","Button","Spinner","ListGroup","Badge","FontAwesomeIcon","faPaperPlane","faBicycle","faChartLine","faHeartbeat","faUtensils","faDumbbell","faRunning","faRobot","faUser","useTranslation","useNotification","jsx","_jsx","jsxs","_jsxs","CyclingCoach","_ref","userProfile","activityData","t","notify","messages","setMessages","input","setInput","isLoading","setIsLoading","suggestions","setSuggestions","activeCategory","setActiveCategory","messagesEndRef","welcomeMessage","id","sender","text","firstName","timestamp","Date","category","generateSuggestions","current","scrollIntoView","behavior","defaultSuggestions","personalizedSuggestions","level","push","age","length","recentActivity","duration","intensity","shuffle","slice","array","newArray","i","j","Math","floor","random","handleSendMessage","e","preventDefault","trim","userMessage","now","prev","Promise","resolve","setTimeout","determineCategory","coachResponse","generateCoachResponse","additionalInfo","links","error","console","handleUseSuggestion","suggestion","document","getElementById","focus","lowerText","toLowerCase","categories","training","nutrition","recovery","performance","technique","equipment","strength","health","keywords","Object","entries","some","keyword","includes","question","profile","activities","responses","profileContext","ftp","levelMap","beginner","intermediate","advanced","elite","responseText","charAt","title","content","url","filteredMessages","filter","m","categoryIcons","general","className","children","Header","icon","variant","size","onClick","map","cat","Body","message","Item","toLocaleTimeString","hour","minute","link","idx","href","target","rel","bg","ref","Footer","onSubmit","Control","type","placeholder","value","onChange","disabled","animation","defaultProps"],"sources":["C:/Users/busin/CascadeProjects/grand-est-cyclisme-website-final (1) VERSION FINAL/client/src/components/coach/CyclingCoach.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { Card, Form, Button, Spinner, ListGroup, Badge } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { \n  faPaperPlane, faBicycle, faChartLine, faHeartbeat, \n  faUtensils, faDumbbell, faRunning, faRobot, faUser\n} from '@fortawesome/free-solid-svg-icons';\nimport { useTranslation } from 'react-i18next';\nimport { useNotification } from '../common/NotificationSystem';\n\n/**\n * Assistant Coach IA pour le cyclisme\n * Fournit des conseils personnalisés, des réponses aux questions et des analyses\n */\nconst CyclingCoach = ({ userProfile, activityData }) => {\n  const { t } = useTranslation();\n  const { notify } = useNotification();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [suggestions, setSuggestions] = useState([]);\n  const [activeCategory, setActiveCategory] = useState('all');\n  const messagesEndRef = useRef(null);\n  \n  // Message de bienvenue initial\n  useEffect(() => {\n    const welcomeMessage = {\n      id: 'welcome',\n      sender: 'coach',\n      text: userProfile?.firstName \n        ? `Bonjour ${userProfile.firstName} ! Je suis votre coach cyclisme personnel. Comment puis-je vous aider aujourd'hui ?` \n        : \"Bonjour ! Je suis votre coach cyclisme personnel. Comment puis-je vous aider aujourd'hui ?\",\n      timestamp: new Date(),\n      category: 'general'\n    };\n    \n    setMessages([welcomeMessage]);\n    \n    // Suggestions initiales\n    generateSuggestions();\n  }, [userProfile]);\n  \n  // Défiler automatiquement vers le dernier message\n  useEffect(() => {\n    if (messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\n    }\n  }, [messages]);\n  \n  // Générer des suggestions basées sur le profil et l'historique\n  const generateSuggestions = () => {\n    const defaultSuggestions = [\n      { text: \"Comment améliorer mon endurance ?\", category: \"training\" },\n      { text: \"Que manger avant une sortie longue ?\", category: \"nutrition\" },\n      { text: \"Quels exercices pour renforcer mes jambes ?\", category: \"strength\" },\n      { text: \"Comment calculer ma FTP ?\", category: \"performance\" }\n    ];\n    \n    // Ajouter des suggestions personnalisées basées sur le profil utilisateur\n    let personalizedSuggestions = [...defaultSuggestions];\n    \n    if (userProfile) {\n      // Suggestions basées sur le niveau\n      if (userProfile.level === 'beginner') {\n        personalizedSuggestions.push(\n          { text: \"Conseils pour débuter en cyclisme\", category: \"training\" },\n          { text: \"Quelle devrait être ma cadence de pédalage ?\", category: \"technique\" }\n        );\n      } else if (userProfile.level === 'intermediate') {\n        personalizedSuggestions.push(\n          { text: \"Comment progresser au seuil ?\", category: \"training\" },\n          { text: \"Exercices de puissance pour cols\", category: \"training\" }\n        );\n      } else if (userProfile.level === 'advanced' || userProfile.level === 'elite') {\n        personalizedSuggestions.push(\n          { text: \"Optimiser ma récupération entre les séances\", category: \"recovery\" },\n          { text: \"Stratégies de course pour compétition\", category: \"performance\" }\n        );\n      }\n      \n      // Suggestions basées sur l'âge\n      if (userProfile.age && userProfile.age > 50) {\n        personalizedSuggestions.push(\n          { text: \"Conseils cyclisme pour seniors\", category: \"training\" },\n          { text: \"Récupération après 50 ans\", category: \"recovery\" }\n        );\n      }\n    }\n    \n    // Ajouter des suggestions basées sur les données d'activité récentes\n    if (activityData && activityData.length > 0) {\n      const recentActivity = activityData[0];\n      \n      // Si longue sortie récente\n      if (recentActivity.duration > 180) { // plus de 3h\n        personalizedSuggestions.push(\n          { text: \"Récupérer après ma longue sortie\", category: \"recovery\" },\n          { text: \"Nutrition post-effort prolongé\", category: \"nutrition\" }\n        );\n      }\n      \n      // Si intensité élevée récente\n      if (recentActivity.intensity && recentActivity.intensity > 0.8) {\n        personalizedSuggestions.push(\n          { text: \"Planifier après un effort intense\", category: \"training\" },\n          { text: \"Optimiser ma récupération active\", category: \"recovery\" }\n        );\n      }\n    }\n    \n    // Suggestions aléatoires mais pertinentes\n    setSuggestions(shuffle(personalizedSuggestions).slice(0, 5));\n  };\n  \n  // Mélanger un tableau (pour les suggestions)\n  const shuffle = (array) => {\n    const newArray = [...array];\n    for (let i = newArray.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [newArray[i], newArray[j]] = [newArray[j], newArray[i]];\n    }\n    return newArray;\n  };\n  \n  // Envoyer un message\n  const handleSendMessage = async (e) => {\n    e.preventDefault();\n    \n    if (!input.trim()) return;\n    \n    const userMessage = {\n      id: `user-${Date.now()}`,\n      sender: 'user',\n      text: input.trim(),\n      timestamp: new Date(),\n      category: 'general'\n    };\n    \n    setMessages(prev => [...prev, userMessage]);\n    setInput('');\n    setIsLoading(true);\n    \n    try {\n      // Simuler l'appel à une API (à remplacer par un appel réel)\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      // Déterminer la catégorie de la question\n      const category = determineCategory(input.trim());\n      \n      // Générer une réponse adaptée\n      const coachResponse = await generateCoachResponse(input.trim(), category, userProfile, activityData);\n      \n      setMessages(prev => [...prev, {\n        id: `coach-${Date.now()}`,\n        sender: 'coach',\n        text: coachResponse.text,\n        additionalInfo: coachResponse.additionalInfo,\n        links: coachResponse.links,\n        category: category,\n        timestamp: new Date()\n      }]);\n      \n      // Rafraîchir les suggestions\n      generateSuggestions();\n      \n    } catch (error) {\n      console.error('Erreur de communication avec le coach IA:', error);\n      notify.error('Impossible de communiquer avec le coach IA', error);\n      \n      setMessages(prev => [...prev, {\n        id: `error-${Date.now()}`,\n        sender: 'coach',\n        text: \"Désolé, j'ai rencontré un problème technique. Pouvez-vous reformuler votre question ?\",\n        timestamp: new Date(),\n        category: 'error'\n      }]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  \n  // Utiliser une suggestion\n  const handleUseSuggestion = (suggestion) => {\n    setInput(suggestion.text);\n    // Focus sur l'input\n    document.getElementById('coach-input').focus();\n  };\n  \n  // Déterminer la catégorie d'une question\n  const determineCategory = (text) => {\n    const lowerText = text.toLowerCase();\n    \n    const categories = {\n      training: ['entraînement', 'séance', 'interval', 'hiit', 'sortie', 'volume', 'intensité'],\n      nutrition: ['manger', 'nutrition', 'alimentation', 'hydratation', 'boisson', 'repas'],\n      recovery: ['récupération', 'repos', 'sommeil', 'fatigue', 'surmenage'],\n      performance: ['ftp', 'puissance', 'performance', 'améliorer', 'progression'],\n      technique: ['technique', 'position', 'cadence', 'pédalage', 'aérodynamique'],\n      equipment: ['vélo', 'matériel', 'équipement', 'roues', 'pneus', 'guidon', 'selle'],\n      strength: ['musculation', 'force', 'exercice', 'renforcement', 'gainage'],\n      health: ['santé', 'blessure', 'douleur', 'courbature', 'médical']\n    };\n    \n    for (const [category, keywords] of Object.entries(categories)) {\n      if (keywords.some(keyword => lowerText.includes(keyword))) {\n        return category;\n      }\n    }\n    \n    return 'general';\n  };\n  \n  // Générer une réponse de coach contextualisée\n  const generateCoachResponse = async (question, category, profile, activities) => {\n    // Cette fonction simule une réponse d'IA - à remplacer par un appel API réel\n    \n    // Réponses pré-définies basées sur la catégorie\n    const responses = {\n      training: [\n        \"Pour améliorer votre endurance, commencez par augmenter progressivement la durée de vos sorties longues de 10% par semaine. Variez également l'intensité avec des séances en zone 2 (65-75% de FTP) pour construire une base aérobie solide.\",\n        \"Pour progresser en cyclisme, la constance est clé. Visez 3-4 sorties par semaine avec une variété d'intensités. Incluez une sortie longue, une séance d'intervalles et une ou deux sorties de récupération.\"\n      ],\n      nutrition: [\n        \"Avant une sortie longue, privilégiez un repas riche en glucides complexes 2-3h avant (pâtes, riz, pain complet). Pendant l'effort, visez 60-90g de glucides par heure selon l'intensité, et hydratez-vous avec 500-750ml d'eau par heure.\",\n        \"Pour la récupération post-effort, consommez des protéines (15-25g) et des glucides dans les 30 minutes suivant la fin. Un ratio de 3:1 glucides/protéines est idéal pour reconstituer les réserves de glycogène.\"\n      ],\n      recovery: [\n        \"La récupération est aussi importante que l'entraînement. Alternez jours intenses et jours faciles, dormez 7-9h par nuit, et utilisez des techniques comme le massage, les bains froids ou la compression pour accélérer la récupération musculaire.\",\n        \"Pour éviter le surentraînement, surveillez votre fréquence cardiaque au repos. Une augmentation de plus de 7-10% est un signal d'alarme indiquant que votre corps a besoin de plus de récupération.\"\n      ],\n      performance: [\n        \"Pour estimer votre FTP (seuil fonctionnel de puissance), effectuez un test de 20 minutes à intensité maximale soutenable. Multipliez la puissance moyenne par 0.95 pour obtenir une estimation de votre FTP.\",\n        \"Pour améliorer votre puissance au seuil, intégrez des intervalles de 8-20 minutes à 90-105% de votre FTP, avec une récupération égale à 50% du temps d'effort.\"\n      ]\n    };\n    \n    // Personnalisation basée sur le profil\n    let profileContext = \"\";\n    if (profile) {\n      if (profile.ftp) {\n        profileContext += `Avec votre FTP actuelle de ${profile.ftp}W, `;\n      }\n      \n      if (profile.level) {\n        const levelMap = {\n          beginner: \"en tant que débutant\",\n          intermediate: \"à votre niveau intermédiaire\",\n          advanced: \"en tant que cycliste avancé\",\n          elite: \"en tant que cycliste d'élite\"\n        };\n        profileContext += levelMap[profile.level] || \"\";\n      }\n    }\n    \n    // Sélection d'une réponse\n    let responseText = \"\";\n    if (responses[category] && responses[category].length > 0) {\n      responseText = responses[category][Math.floor(Math.random() * responses[category].length)];\n      \n      // Ajouter le contexte du profil si disponible\n      if (profileContext) {\n        responseText = profileContext + \", \" + responseText.charAt(0).toLowerCase() + responseText.slice(1);\n      }\n    } else {\n      // Réponse générique\n      responseText = \"Votre question sur \" + category + \" est intéressante. L'équilibre entre entraînement, récupération et nutrition est essentiel pour progresser. N'hésitez pas à me poser des questions plus spécifiques pour obtenir des conseils adaptés à votre situation.\";\n    }\n    \n    // Informations supplémentaires\n    let additionalInfo = null;\n    let links = null;\n    \n    // Ajouter des informations pertinentes selon la catégorie\n    if (category === 'training') {\n      additionalInfo = {\n        title: \"Zones d'entraînement\",\n        content: \"Zone 1: <55% FTP (récupération)\\nZone 2: 56-75% FTP (endurance)\\nZone 3: 76-90% FTP (tempo)\\nZone 4: 91-105% FTP (seuil)\\nZone 5: 106-120% FTP (VO2max)\\nZone 6: 121-150% FTP (anaérobie)\\nZone 7: >150% FTP (sprint)\"\n      };\n      \n      links = [\n        { text: \"Guide complet des zones d'entraînement\", url: \"#/articles/zones-entrainement\" },\n        { text: \"Programmation cycliste avancée\", url: \"#/articles/programmation-cycliste\" }\n      ];\n    } else if (category === 'nutrition') {\n      additionalInfo = {\n        title: \"Apports recommandés pour cyclistes\",\n        content: \"Entraînement: 5-7g de glucides/kg de poids corporel/jour\\nCompétition: 8-10g de glucides/kg/jour\\nProtéines: 1.2-1.6g/kg/jour\\nLipides: 1g/kg/jour\"\n      };\n    }\n    \n    return {\n      text: responseText,\n      additionalInfo,\n      links\n    };\n  };\n  \n  // Filtrer les messages par catégorie\n  const filteredMessages = activeCategory === 'all' \n    ? messages \n    : messages.filter(m => m.category === activeCategory || m.sender === 'user');\n  \n  // Icônes pour les catégories\n  const categoryIcons = {\n    training: faRunning,\n    nutrition: faUtensils,\n    performance: faChartLine,\n    recovery: faHeartbeat,\n    equipment: faBicycle,\n    strength: faDumbbell,\n    general: faRobot\n  };\n  \n  return (\n    <div className=\"cycling-coach\">\n      <Card className=\"chat-container\">\n        <Card.Header>\n          <div className=\"d-flex justify-content-between align-items-center\">\n            <h3 className=\"mb-0\">\n              <FontAwesomeIcon icon={faRobot} className=\"me-2\" />\n              Coach Cyclisme IA\n            </h3>\n            <div className=\"category-filters\">\n              <Button \n                variant={activeCategory === 'all' ? 'primary' : 'outline-primary'} \n                size=\"sm\"\n                onClick={() => setActiveCategory('all')}\n                className=\"me-1\"\n              >\n                Tous\n              </Button>\n              {['training', 'nutrition', 'performance', 'recovery'].map(cat => (\n                <Button \n                  key={cat}\n                  variant={activeCategory === cat ? 'primary' : 'outline-primary'} \n                  size=\"sm\"\n                  onClick={() => setActiveCategory(cat)}\n                  className=\"me-1\"\n                >\n                  <FontAwesomeIcon \n                    icon={categoryIcons[cat] || faRobot} \n                    className=\"me-1\" \n                  />\n                  {t(`categories.${cat}`)}\n                </Button>\n              ))}\n            </div>\n          </div>\n        </Card.Header>\n        \n        <Card.Body className=\"chat-messages\">\n          <ListGroup variant=\"flush\">\n            {filteredMessages.map(message => (\n              <ListGroup.Item \n                key={message.id} \n                className={`message ${message.sender}`}\n              >\n                <div className=\"message-header\">\n                  <span className=\"message-sender\">\n                    <FontAwesomeIcon \n                      icon={message.sender === 'coach' ? faRobot : faUser} \n                      className=\"me-2\" \n                    />\n                    {message.sender === 'coach' ? 'Coach IA' : 'Vous'}\n                  </span>\n                  <span className=\"message-time\">\n                    {message.timestamp.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}\n                  </span>\n                </div>\n                \n                <div className=\"message-content\">\n                  {message.text}\n                </div>\n                \n                {message.additionalInfo && (\n                  <div className=\"additional-info mt-2\">\n                    <h6>{message.additionalInfo.title}</h6>\n                    <pre className=\"info-content p-2 bg-light rounded\">\n                      {message.additionalInfo.content}\n                    </pre>\n                  </div>\n                )}\n                \n                {message.links && message.links.length > 0 && (\n                  <div className=\"resource-links mt-2\">\n                    <h6>Ressources complémentaires:</h6>\n                    <ul className=\"ps-3\">\n                      {message.links.map((link, idx) => (\n                        <li key={idx}>\n                          <a href={link.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                            {link.text}\n                          </a>\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                )}\n                \n                {message.sender === 'coach' && message.category && message.category !== 'general' && (\n                  <Badge \n                    bg=\"light\" \n                    text=\"dark\" \n                    className=\"mt-2 category-badge\"\n                  >\n                    <FontAwesomeIcon \n                      icon={categoryIcons[message.category] || faRobot} \n                      className=\"me-1\" \n                    />\n                    {t(`categories.${message.category}`)}\n                  </Badge>\n                )}\n              </ListGroup.Item>\n            ))}\n          </ListGroup>\n          <div ref={messagesEndRef} />\n        </Card.Body>\n        \n        <Card.Footer>\n          {suggestions.length > 0 && (\n            <div className=\"suggestions mb-3\">\n              <div className=\"suggestion-chips d-flex flex-wrap gap-2\">\n                {suggestions.map((suggestion, idx) => (\n                  <Badge \n                    key={idx} \n                    bg=\"light\" \n                    text=\"primary\" \n                    className=\"suggestion-chip p-2 cursor-pointer\"\n                    onClick={() => handleUseSuggestion(suggestion)}\n                  >\n                    <FontAwesomeIcon \n                      icon={categoryIcons[suggestion.category] || faRobot} \n                      className=\"me-1\" \n                    />\n                    {suggestion.text}\n                  </Badge>\n                ))}\n              </div>\n            </div>\n          )}\n          \n          <Form onSubmit={handleSendMessage}>\n            <div className=\"input-group\">\n              <Form.Control\n                id=\"coach-input\"\n                type=\"text\"\n                placeholder=\"Posez une question sur le cyclisme, l'entraînement, la nutrition...\"\n                value={input}\n                onChange={(e) => setInput(e.target.value)}\n                disabled={isLoading}\n              />\n              <Button \n                variant=\"primary\" \n                type=\"submit\"\n                disabled={isLoading || !input.trim()}\n              >\n                {isLoading ? (\n                  <Spinner animation=\"border\" size=\"sm\" />\n                ) : (\n                  <FontAwesomeIcon icon={faPaperPlane} />\n                )}\n              </Button>\n            </div>\n          </Form>\n        </Card.Footer>\n      </Card>\n      \n      <style jsx=\"true\">{`\n        .cycling-coach {\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n        }\n        \n        .chat-container {\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n        }\n        \n        .chat-messages {\n          flex: 1;\n          overflow-y: auto;\n          max-height: 500px;\n        }\n        \n        .message {\n          margin-bottom: 8px;\n          padding: 10px 15px;\n          border-radius: 8px;\n          max-width: 85%;\n        }\n        \n        .message.user {\n          background-color: #f0f0f0;\n          align-self: flex-end;\n          margin-left: auto;\n        }\n        \n        .message.coach {\n          background-color: #f8f9fa;\n          border-left: 3px solid #0d6efd;\n        }\n        \n        .message-header {\n          display: flex;\n          justify-content: space-between;\n          margin-bottom: 5px;\n          font-size: 0.85rem;\n        }\n        \n        .message-time {\n          color: #6c757d;\n          font-size: 0.75rem;\n        }\n        \n        .cursor-pointer {\n          cursor: pointer;\n        }\n        \n        .suggestion-chip:hover {\n          background-color: #e9ecef !important;\n        }\n        \n        .category-badge {\n          font-size: 0.7rem;\n        }\n        \n        .info-content {\n          font-size: 0.8rem;\n          white-space: pre-wrap;\n        }\n      `}</style>\n    </div>\n  );\n};\n\nCyclingCoach.propTypes = {\n  userProfile: PropTypes.shape({\n    id: PropTypes.string,\n    firstName: PropTypes.string,\n    lastName: PropTypes.string,\n    ftp: PropTypes.number,\n    level: PropTypes.string,\n    age: PropTypes.number,\n    weight: PropTypes.number\n  }),\n  activityData: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.string,\n      name: PropTypes.string,\n      date: PropTypes.string,\n      duration: PropTypes.number,\n      distance: PropTypes.number,\n      intensity: PropTypes.number\n    })\n  )\n};\n\nCyclingCoach.defaultProps = {\n  activityData: []\n};\n\nexport default CyclingCoach;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}