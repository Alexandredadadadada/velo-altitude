{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Box,Typography,Paper,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,IconButton,Chip,Tooltip,Dialog,DialogTitle,DialogContent,DialogActions,Button,CircularProgress,Alert,TablePagination}from'@mui/material';import{Refresh as RefreshIcon,Info as InfoIcon,CheckCircle as CheckCircleIcon,Error as ErrorIcon,Warning as WarningIcon,Close as CloseIcon}from'@mui/icons-material';import{formatDistanceToNow,format}from'date-fns';import{fr}from'date-fns/locale';import axios from'axios';import{useSnackbar}from'notistack';// Constantes pour les statuts (identiques à celles de StravaSyncStatus)\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const STATUS_COLORS={initializing:'info',in_progress:'info',completed:'success',error:'error',cancelled:'warning',never_synced:'default'};const STATUS_LABELS={initializing:'Initialisation',in_progress:'En cours',completed:'Terminée',error:'Erreur',cancelled:'Annulée',never_synced:'Jamais synchronisé'};// Composant pour afficher les détails d'une synchronisation\nconst SyncDetailsDialog=_ref=>{var _syncDetails$options,_syncDetails$options2,_syncDetails$options3,_syncDetails$options4,_syncDetails$options5,_syncDetails$options6,_syncDetails$options7,_syncDetails$options8,_syncDetails$stats,_syncDetails$stats2,_syncDetails$stats3,_syncDetails$stats4,_syncDetails$stats5,_syncDetails$stats6;let{open,onClose,syncDetails}=_ref;if(!syncDetails)return null;// Fonction pour formater les dates\nconst formatDate=dateString=>{if(!dateString)return'N/A';const date=new Date(dateString);return date.toLocaleString('fr-FR',{day:'2-digit',month:'2-digit',year:'numeric',hour:'2-digit',minute:'2-digit',second:'2-digit'});};// Fonction pour formater la durée\nconst formatDuration=milliseconds=>{if(!milliseconds)return'N/A';const seconds=Math.floor(milliseconds/1000);const minutes=Math.floor(seconds/60);const hours=Math.floor(minutes/60);if(hours>0){return`${hours}h ${minutes%60}m ${seconds%60}s`;}else if(minutes>0){return`${minutes}m ${seconds%60}s`;}else{return`${seconds}s`;}};return/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:onClose,maxWidth:\"md\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"D\\xE9tails de la synchronisation\"}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:onClose,children:/*#__PURE__*/_jsx(CloseIcon,{})})]})}),/*#__PURE__*/_jsxs(DialogContent,{dividers:true,children:[/*#__PURE__*/_jsxs(Box,{mb:3,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"Statut\"}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",mb:1,children:[/*#__PURE__*/_jsx(Chip,{label:STATUS_LABELS[syncDetails.status]||syncDetails.status,color:STATUS_COLORS[syncDetails.status]||'default',size:\"small\",sx:{mr:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:syncDetails.message||'Aucune information disponible'})]})]}),/*#__PURE__*/_jsxs(Box,{mb:3,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"P\\xE9riode de synchronisation\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[(_syncDetails$options=syncDetails.options)!==null&&_syncDetails$options!==void 0&&_syncDetails$options.startDate?`Du ${formatDate(syncDetails.options.startDate)}`:'',(_syncDetails$options2=syncDetails.options)!==null&&_syncDetails$options2!==void 0&&_syncDetails$options2.endDate?` au ${formatDate(syncDetails.options.endDate)}`:'',(_syncDetails$options3=syncDetails.options)!==null&&_syncDetails$options3!==void 0&&_syncDetails$options3.fullSync?'Synchronisation complète':'',(_syncDetails$options4=syncDetails.options)!==null&&_syncDetails$options4!==void 0&&_syncDetails$options4.daysToSync?`Derniers ${syncDetails.options.daysToSync} jours`:'',!((_syncDetails$options5=syncDetails.options)!==null&&_syncDetails$options5!==void 0&&_syncDetails$options5.startDate)&&!((_syncDetails$options6=syncDetails.options)!==null&&_syncDetails$options6!==void 0&&_syncDetails$options6.endDate)&&!((_syncDetails$options7=syncDetails.options)!==null&&_syncDetails$options7!==void 0&&_syncDetails$options7.fullSync)&&!((_syncDetails$options8=syncDetails.options)!==null&&_syncDetails$options8!==void 0&&_syncDetails$options8.daysToSync)?'Période non spécifiée':'']})]}),/*#__PURE__*/_jsxs(Box,{mb:3,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"Statistiques\"}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,variant:\"outlined\",sx:{mb:2},children:/*#__PURE__*/_jsxs(Table,{size:\"small\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Total\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Trait\\xE9es\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Ajout\\xE9es\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Mises \\xE0 jour\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Ignor\\xE9es\"}),/*#__PURE__*/_jsx(TableCell,{children:\"\\xC9checs\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:((_syncDetails$stats=syncDetails.stats)===null||_syncDetails$stats===void 0?void 0:_syncDetails$stats.total)||0}),/*#__PURE__*/_jsx(TableCell,{children:((_syncDetails$stats2=syncDetails.stats)===null||_syncDetails$stats2===void 0?void 0:_syncDetails$stats2.processed)||0}),/*#__PURE__*/_jsx(TableCell,{children:((_syncDetails$stats3=syncDetails.stats)===null||_syncDetails$stats3===void 0?void 0:_syncDetails$stats3.added)||0}),/*#__PURE__*/_jsx(TableCell,{children:((_syncDetails$stats4=syncDetails.stats)===null||_syncDetails$stats4===void 0?void 0:_syncDetails$stats4.updated)||0}),/*#__PURE__*/_jsx(TableCell,{children:((_syncDetails$stats5=syncDetails.stats)===null||_syncDetails$stats5===void 0?void 0:_syncDetails$stats5.skipped)||0}),/*#__PURE__*/_jsx(TableCell,{children:((_syncDetails$stats6=syncDetails.stats)===null||_syncDetails$stats6===void 0?void 0:_syncDetails$stats6.failed)||0})]})})]})})]}),/*#__PURE__*/_jsxs(Box,{mb:3,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"Timing\"}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,variant:\"outlined\",children:/*#__PURE__*/_jsx(Table,{size:\"small\",children:/*#__PURE__*/_jsxs(TableBody,{children:[/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{width:\"30%\",children:\"D\\xE9but\"}),/*#__PURE__*/_jsx(TableCell,{children:formatDate(syncDetails.startTime)})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Derni\\xE8re mise \\xE0 jour\"}),/*#__PURE__*/_jsx(TableCell,{children:formatDate(syncDetails.lastUpdate)})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Fin\"}),/*#__PURE__*/_jsx(TableCell,{children:formatDate(syncDetails.endTime)})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Dur\\xE9e\"}),/*#__PURE__*/_jsx(TableCell,{children:syncDetails.startTime&&syncDetails.endTime?formatDuration(new Date(syncDetails.endTime)-new Date(syncDetails.startTime)):'N/A'})]})]})})})]}),syncDetails.error&&/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"D\\xE9tails de l'erreur\"}),/*#__PURE__*/_jsxs(Alert,{severity:\"error\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",children:syncDetails.error.code?`Code: ${syncDetails.error.code}`:'Erreur'}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:syncDetails.error.message}),syncDetails.error.details&&/*#__PURE__*/_jsx(Box,{mt:1,children:/*#__PURE__*/_jsx(Typography,{variant:\"caption\",component:\"pre\",sx:{whiteSpace:'pre-wrap',overflowX:'auto',maxHeight:'200px',backgroundColor:'rgba(0,0,0,0.03)',p:1,borderRadius:1},children:syncDetails.error.details})})]})]})]}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:onClose,color:\"primary\",children:\"Fermer\"})})]});};const StravaSyncHistory=()=>{const[history,setHistory]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[page,setPage]=useState(0);const[rowsPerPage,setRowsPerPage]=useState(5);const[selectedSync,setSelectedSync]=useState(null);const[dialogOpen,setDialogOpen]=useState(false);const{enqueueSnackbar}=useSnackbar();// Fonction pour récupérer l'historique des synchronisations\nconst fetchHistory=async()=>{try{setLoading(true);const response=await axios.get('/api/strava/sync/history',{params:{limit:20}// Récupérer les 20 dernières synchronisations\n});setHistory(response.data);setError(null);}catch(err){var _err$response,_err$response$data,_err$response2,_err$response2$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Erreur lors de la récupération de l\\'historique');enqueueSnackbar(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||'Échec de la récupération de l\\'historique',{variant:'error'});}finally{setLoading(false);}};// Ouvrir le dialogue de détails\nconst openDetailsDialog=sync=>{setSelectedSync(sync);setDialogOpen(true);};// Fermer le dialogue de détails\nconst closeDetailsDialog=()=>{setDialogOpen(false);};// Changer de page\nconst handleChangePage=(event,newPage)=>{setPage(newPage);};// Changer le nombre de lignes par page\nconst handleChangeRowsPerPage=event=>{setRowsPerPage(parseInt(event.target.value,10));setPage(0);};// Récupérer l'historique au chargement du composant\nuseEffect(()=>{fetchHistory();},[]);// Fonction pour formater les dates relatives\nconst formatRelativeDate=dateString=>{if(!dateString)return'N/A';return formatDistanceToNow(new Date(dateString),{addSuffix:true,locale:fr});};// Fonction pour obtenir l'icône de statut\nconst getStatusIcon=status=>{switch(status){case'completed':return/*#__PURE__*/_jsx(CheckCircleIcon,{fontSize:\"small\"});case'error':return/*#__PURE__*/_jsx(ErrorIcon,{fontSize:\"small\"});case'cancelled':return/*#__PURE__*/_jsx(WarningIcon,{fontSize:\"small\"});case'in_progress':return/*#__PURE__*/_jsx(CircularProgress,{size:16});default:return/*#__PURE__*/_jsx(InfoIcon,{fontSize:\"small\"});}};if(loading&&history.length===0){return/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",p:3,children:/*#__PURE__*/_jsx(CircularProgress,{})});}if(error&&history.length===0){return/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mt:2,mb:2},children:error});}if(history.length===0&&!loading){return/*#__PURE__*/_jsx(Alert,{severity:\"info\",sx:{mt:2,mb:2},children:\"Aucun historique de synchronisation disponible.\"});}return/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{p:3,mb:3},children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",mb:2,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Historique des synchronisations\"}),/*#__PURE__*/_jsx(Tooltip,{title:\"Rafra\\xEEchir\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:fetchHistory,disabled:loading,children:/*#__PURE__*/_jsx(RefreshIcon,{})})})]}),/*#__PURE__*/_jsx(TableContainer,{children:/*#__PURE__*/_jsxs(Table,{size:\"small\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Statut\"}),/*#__PURE__*/_jsx(TableCell,{children:\"D\\xE9but\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Dur\\xE9e\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Activit\\xE9s\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:loading&&history.length===0?/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:5,align:\"center\",children:/*#__PURE__*/_jsx(CircularProgress,{size:24})})}):history.slice(page*rowsPerPage,page*rowsPerPage+rowsPerPage).map(sync=>/*#__PURE__*/_jsxs(TableRow,{hover:true,children:[/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Tooltip,{title:STATUS_LABELS[sync.status]||sync.status,children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",sx:{mr:1,color:`${STATUS_COLORS[sync.status]}.main`},children:getStatusIcon(sync.status)})}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",noWrap:true,sx:{maxWidth:150},children:sync.message||STATUS_LABELS[sync.status]||sync.status})]})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Tooltip,{title:new Date(sync.startTime).toLocaleString(),children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:formatRelativeDate(sync.startTime)})})}),/*#__PURE__*/_jsx(TableCell,{children:sync.startTime&&sync.endTime?/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[Math.round((new Date(sync.endTime)-new Date(sync.startTime))/1000),\"s\"]}):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"-\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:sync.stats?/*#__PURE__*/_jsxs(_Fragment,{children:[sync.stats.processed,\" (\",sync.stats.added,\" ajout\\xE9es)\"]}):'-'})}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsx(Tooltip,{title:\"Voir les d\\xE9tails\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>openDetailsDialog(sync),children:/*#__PURE__*/_jsx(InfoIcon,{fontSize:\"small\"})})})})]},sync._id))})]})}),/*#__PURE__*/_jsx(TablePagination,{rowsPerPageOptions:[5,10,25],component:\"div\",count:history.length,rowsPerPage:rowsPerPage,page:page,onPageChange:handleChangePage,onRowsPerPageChange:handleChangeRowsPerPage,labelRowsPerPage:\"Lignes par page:\",labelDisplayedRows:_ref2=>{let{from,to,count}=_ref2;return`${from}-${to} sur ${count}`;}}),/*#__PURE__*/_jsx(SyncDetailsDialog,{open:dialogOpen,onClose:closeDetailsDialog,syncDetails:selectedSync})]});};export default StravaSyncHistory;","map":{"version":3,"names":["React","useState","useEffect","Box","Typography","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","IconButton","Chip","Tooltip","Dialog","DialogTitle","DialogContent","DialogActions","Button","CircularProgress","Alert","TablePagination","Refresh","RefreshIcon","Info","InfoIcon","CheckCircle","CheckCircleIcon","Error","ErrorIcon","Warning","WarningIcon","Close","CloseIcon","formatDistanceToNow","format","fr","axios","useSnackbar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","STATUS_COLORS","initializing","in_progress","completed","error","cancelled","never_synced","STATUS_LABELS","SyncDetailsDialog","_ref","_syncDetails$options","_syncDetails$options2","_syncDetails$options3","_syncDetails$options4","_syncDetails$options5","_syncDetails$options6","_syncDetails$options7","_syncDetails$options8","_syncDetails$stats","_syncDetails$stats2","_syncDetails$stats3","_syncDetails$stats4","_syncDetails$stats5","_syncDetails$stats6","open","onClose","syncDetails","formatDate","dateString","date","Date","toLocaleString","day","month","year","hour","minute","second","formatDuration","milliseconds","seconds","Math","floor","minutes","hours","maxWidth","fullWidth","children","display","justifyContent","alignItems","variant","size","onClick","dividers","mb","gutterBottom","label","status","color","sx","mr","message","options","startDate","endDate","fullSync","daysToSync","component","stats","total","processed","added","updated","skipped","failed","width","startTime","lastUpdate","endTime","severity","code","details","mt","whiteSpace","overflowX","maxHeight","backgroundColor","p","borderRadius","StravaSyncHistory","history","setHistory","loading","setLoading","setError","page","setPage","rowsPerPage","setRowsPerPage","selectedSync","setSelectedSync","dialogOpen","setDialogOpen","enqueueSnackbar","fetchHistory","response","get","params","limit","data","err","_err$response","_err$response$data","_err$response2","_err$response2$data","openDetailsDialog","sync","closeDetailsDialog","handleChangePage","event","newPage","handleChangeRowsPerPage","parseInt","target","value","formatRelativeDate","addSuffix","locale","getStatusIcon","fontSize","length","elevation","title","disabled","align","colSpan","slice","map","hover","noWrap","round","_id","rowsPerPageOptions","count","onPageChange","onRowsPerPageChange","labelRowsPerPage","labelDisplayedRows","_ref2","from","to"],"sources":["C:/Users/busin/CascadeProjects/grand-est-cyclisme-website-final (1) VERSION FINAL/client/src/components/strava/StravaSyncHistory.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Box, \n  Typography, \n  Paper, \n  Table, \n  TableBody, \n  TableCell, \n  TableContainer, \n  TableHead, \n  TableRow,\n  IconButton,\n  Chip,\n  Tooltip,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  CircularProgress,\n  Alert,\n  TablePagination\n} from '@mui/material';\nimport { \n  Refresh as RefreshIcon,\n  Info as InfoIcon,\n  CheckCircle as CheckCircleIcon,\n  Error as ErrorIcon,\n  Warning as WarningIcon,\n  Close as CloseIcon\n} from '@mui/icons-material';\nimport { formatDistanceToNow, format } from 'date-fns';\nimport { fr } from 'date-fns/locale';\nimport axios from 'axios';\nimport { useSnackbar } from 'notistack';\n\n// Constantes pour les statuts (identiques à celles de StravaSyncStatus)\nconst STATUS_COLORS = {\n  initializing: 'info',\n  in_progress: 'info',\n  completed: 'success',\n  error: 'error',\n  cancelled: 'warning',\n  never_synced: 'default'\n};\n\nconst STATUS_LABELS = {\n  initializing: 'Initialisation',\n  in_progress: 'En cours',\n  completed: 'Terminée',\n  error: 'Erreur',\n  cancelled: 'Annulée',\n  never_synced: 'Jamais synchronisé'\n};\n\n// Composant pour afficher les détails d'une synchronisation\nconst SyncDetailsDialog = ({ open, onClose, syncDetails }) => {\n  if (!syncDetails) return null;\n  \n  // Fonction pour formater les dates\n  const formatDate = (dateString) => {\n    if (!dateString) return 'N/A';\n    const date = new Date(dateString);\n    return date.toLocaleString('fr-FR', { \n      day: '2-digit', \n      month: '2-digit', \n      year: 'numeric', \n      hour: '2-digit', \n      minute: '2-digit',\n      second: '2-digit'\n    });\n  };\n\n  // Fonction pour formater la durée\n  const formatDuration = (milliseconds) => {\n    if (!milliseconds) return 'N/A';\n    const seconds = Math.floor(milliseconds / 1000);\n    const minutes = Math.floor(seconds / 60);\n    const hours = Math.floor(minutes / 60);\n    \n    if (hours > 0) {\n      return `${hours}h ${minutes % 60}m ${seconds % 60}s`;\n    } else if (minutes > 0) {\n      return `${minutes}m ${seconds % 60}s`;\n    } else {\n      return `${seconds}s`;\n    }\n  };\n  \n  return (\n    <Dialog open={open} onClose={onClose} maxWidth=\"md\" fullWidth>\n      <DialogTitle>\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\n          <Typography variant=\"h6\">\n            Détails de la synchronisation\n          </Typography>\n          <IconButton size=\"small\" onClick={onClose}>\n            <CloseIcon />\n          </IconButton>\n        </Box>\n      </DialogTitle>\n      <DialogContent dividers>\n        <Box mb={3}>\n          <Typography variant=\"subtitle1\" gutterBottom>\n            Statut\n          </Typography>\n          <Box display=\"flex\" alignItems=\"center\" mb={1}>\n            <Chip \n              label={STATUS_LABELS[syncDetails.status] || syncDetails.status} \n              color={STATUS_COLORS[syncDetails.status] || 'default'}\n              size=\"small\"\n              sx={{ mr: 2 }}\n            />\n            <Typography variant=\"body2\">\n              {syncDetails.message || 'Aucune information disponible'}\n            </Typography>\n          </Box>\n        </Box>\n        \n        <Box mb={3}>\n          <Typography variant=\"subtitle1\" gutterBottom>\n            Période de synchronisation\n          </Typography>\n          <Typography variant=\"body2\">\n            {syncDetails.options?.startDate ? `Du ${formatDate(syncDetails.options.startDate)}` : ''}\n            {syncDetails.options?.endDate ? ` au ${formatDate(syncDetails.options.endDate)}` : ''}\n            {syncDetails.options?.fullSync ? 'Synchronisation complète' : ''}\n            {syncDetails.options?.daysToSync ? `Derniers ${syncDetails.options.daysToSync} jours` : ''}\n            {!syncDetails.options?.startDate && !syncDetails.options?.endDate && \n             !syncDetails.options?.fullSync && !syncDetails.options?.daysToSync ? \n              'Période non spécifiée' : ''}\n          </Typography>\n        </Box>\n        \n        <Box mb={3}>\n          <Typography variant=\"subtitle1\" gutterBottom>\n            Statistiques\n          </Typography>\n          <TableContainer component={Paper} variant=\"outlined\" sx={{ mb: 2 }}>\n            <Table size=\"small\">\n              <TableHead>\n                <TableRow>\n                  <TableCell>Total</TableCell>\n                  <TableCell>Traitées</TableCell>\n                  <TableCell>Ajoutées</TableCell>\n                  <TableCell>Mises à jour</TableCell>\n                  <TableCell>Ignorées</TableCell>\n                  <TableCell>Échecs</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                <TableRow>\n                  <TableCell>{syncDetails.stats?.total || 0}</TableCell>\n                  <TableCell>{syncDetails.stats?.processed || 0}</TableCell>\n                  <TableCell>{syncDetails.stats?.added || 0}</TableCell>\n                  <TableCell>{syncDetails.stats?.updated || 0}</TableCell>\n                  <TableCell>{syncDetails.stats?.skipped || 0}</TableCell>\n                  <TableCell>{syncDetails.stats?.failed || 0}</TableCell>\n                </TableRow>\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </Box>\n        \n        <Box mb={3}>\n          <Typography variant=\"subtitle1\" gutterBottom>\n            Timing\n          </Typography>\n          <TableContainer component={Paper} variant=\"outlined\">\n            <Table size=\"small\">\n              <TableBody>\n                <TableRow>\n                  <TableCell width=\"30%\">Début</TableCell>\n                  <TableCell>{formatDate(syncDetails.startTime)}</TableCell>\n                </TableRow>\n                <TableRow>\n                  <TableCell>Dernière mise à jour</TableCell>\n                  <TableCell>{formatDate(syncDetails.lastUpdate)}</TableCell>\n                </TableRow>\n                <TableRow>\n                  <TableCell>Fin</TableCell>\n                  <TableCell>{formatDate(syncDetails.endTime)}</TableCell>\n                </TableRow>\n                <TableRow>\n                  <TableCell>Durée</TableCell>\n                  <TableCell>\n                    {syncDetails.startTime && syncDetails.endTime ? \n                      formatDuration(new Date(syncDetails.endTime) - new Date(syncDetails.startTime)) \n                      : 'N/A'}\n                  </TableCell>\n                </TableRow>\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </Box>\n        \n        {syncDetails.error && (\n          <Box>\n            <Typography variant=\"subtitle1\" gutterBottom>\n              Détails de l'erreur\n            </Typography>\n            <Alert severity=\"error\">\n              <Typography variant=\"subtitle2\">\n                {syncDetails.error.code ? `Code: ${syncDetails.error.code}` : 'Erreur'}\n              </Typography>\n              <Typography variant=\"body2\">{syncDetails.error.message}</Typography>\n              {syncDetails.error.details && (\n                <Box mt={1}>\n                  <Typography variant=\"caption\" component=\"pre\" sx={{ \n                    whiteSpace: 'pre-wrap',\n                    overflowX: 'auto',\n                    maxHeight: '200px',\n                    backgroundColor: 'rgba(0,0,0,0.03)',\n                    p: 1,\n                    borderRadius: 1\n                  }}>\n                    {syncDetails.error.details}\n                  </Typography>\n                </Box>\n              )}\n            </Alert>\n          </Box>\n        )}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\">\n          Fermer\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nconst StravaSyncHistory = () => {\n  const [history, setHistory] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(5);\n  const [selectedSync, setSelectedSync] = useState(null);\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const { enqueueSnackbar } = useSnackbar();\n\n  // Fonction pour récupérer l'historique des synchronisations\n  const fetchHistory = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get('/api/strava/sync/history', {\n        params: { limit: 20 } // Récupérer les 20 dernières synchronisations\n      });\n      setHistory(response.data);\n      setError(null);\n    } catch (err) {\n      setError(err.response?.data?.error || 'Erreur lors de la récupération de l\\'historique');\n      enqueueSnackbar(\n        err.response?.data?.error || 'Échec de la récupération de l\\'historique', \n        { variant: 'error' }\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Ouvrir le dialogue de détails\n  const openDetailsDialog = (sync) => {\n    setSelectedSync(sync);\n    setDialogOpen(true);\n  };\n\n  // Fermer le dialogue de détails\n  const closeDetailsDialog = () => {\n    setDialogOpen(false);\n  };\n\n  // Changer de page\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  // Changer le nombre de lignes par page\n  const handleChangeRowsPerPage = (event) => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  // Récupérer l'historique au chargement du composant\n  useEffect(() => {\n    fetchHistory();\n  }, []);\n\n  // Fonction pour formater les dates relatives\n  const formatRelativeDate = (dateString) => {\n    if (!dateString) return 'N/A';\n    return formatDistanceToNow(new Date(dateString), { addSuffix: true, locale: fr });\n  };\n\n  // Fonction pour obtenir l'icône de statut\n  const getStatusIcon = (status) => {\n    switch (status) {\n      case 'completed':\n        return <CheckCircleIcon fontSize=\"small\" />;\n      case 'error':\n        return <ErrorIcon fontSize=\"small\" />;\n      case 'cancelled':\n        return <WarningIcon fontSize=\"small\" />;\n      case 'in_progress':\n        return <CircularProgress size={16} />;\n      default:\n        return <InfoIcon fontSize=\"small\" />;\n    }\n  };\n\n  if (loading && history.length === 0) {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" p={3}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  if (error && history.length === 0) {\n    return (\n      <Alert severity=\"error\" sx={{ mt: 2, mb: 2 }}>\n        {error}\n      </Alert>\n    );\n  }\n\n  if (history.length === 0 && !loading) {\n    return (\n      <Alert severity=\"info\" sx={{ mt: 2, mb: 2 }}>\n        Aucun historique de synchronisation disponible.\n      </Alert>\n    );\n  }\n\n  return (\n    <Paper elevation={3} sx={{ p: 3, mb: 3 }}>\n      <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={2}>\n        <Typography variant=\"h6\">\n          Historique des synchronisations\n        </Typography>\n        <Tooltip title=\"Rafraîchir\">\n          <IconButton \n            size=\"small\" \n            onClick={fetchHistory} \n            disabled={loading}\n          >\n            <RefreshIcon />\n          </IconButton>\n        </Tooltip>\n      </Box>\n\n      <TableContainer>\n        <Table size=\"small\">\n          <TableHead>\n            <TableRow>\n              <TableCell>Statut</TableCell>\n              <TableCell>Début</TableCell>\n              <TableCell>Durée</TableCell>\n              <TableCell>Activités</TableCell>\n              <TableCell align=\"right\">Actions</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {loading && history.length === 0 ? (\n              <TableRow>\n                <TableCell colSpan={5} align=\"center\">\n                  <CircularProgress size={24} />\n                </TableCell>\n              </TableRow>\n            ) : (\n              history\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                .map((sync) => (\n                  <TableRow key={sync._id} hover>\n                    <TableCell>\n                      <Box display=\"flex\" alignItems=\"center\">\n                        <Tooltip title={STATUS_LABELS[sync.status] || sync.status}>\n                          <IconButton size=\"small\" sx={{ mr: 1, color: `${STATUS_COLORS[sync.status]}.main` }}>\n                            {getStatusIcon(sync.status)}\n                          </IconButton>\n                        </Tooltip>\n                        <Typography variant=\"body2\" noWrap sx={{ maxWidth: 150 }}>\n                          {sync.message || STATUS_LABELS[sync.status] || sync.status}\n                        </Typography>\n                      </Box>\n                    </TableCell>\n                    <TableCell>\n                      <Tooltip title={new Date(sync.startTime).toLocaleString()}>\n                        <Typography variant=\"body2\">\n                          {formatRelativeDate(sync.startTime)}\n                        </Typography>\n                      </Tooltip>\n                    </TableCell>\n                    <TableCell>\n                      {sync.startTime && sync.endTime ? (\n                        <Typography variant=\"body2\">\n                          {Math.round((new Date(sync.endTime) - new Date(sync.startTime)) / 1000)}s\n                        </Typography>\n                      ) : (\n                        <Typography variant=\"body2\">-</Typography>\n                      )}\n                    </TableCell>\n                    <TableCell>\n                      <Typography variant=\"body2\">\n                        {sync.stats ? (\n                          <>{sync.stats.processed} ({sync.stats.added} ajoutées)</>\n                        ) : '-'}\n                      </Typography>\n                    </TableCell>\n                    <TableCell align=\"right\">\n                      <Tooltip title=\"Voir les détails\">\n                        <IconButton \n                          size=\"small\" \n                          onClick={() => openDetailsDialog(sync)}\n                        >\n                          <InfoIcon fontSize=\"small\" />\n                        </IconButton>\n                      </Tooltip>\n                    </TableCell>\n                  </TableRow>\n                ))\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n\n      <TablePagination\n        rowsPerPageOptions={[5, 10, 25]}\n        component=\"div\"\n        count={history.length}\n        rowsPerPage={rowsPerPage}\n        page={page}\n        onPageChange={handleChangePage}\n        onRowsPerPageChange={handleChangeRowsPerPage}\n        labelRowsPerPage=\"Lignes par page:\"\n        labelDisplayedRows={({ from, to, count }) => `${from}-${to} sur ${count}`}\n      />\n\n      <SyncDetailsDialog\n        open={dialogOpen}\n        onClose={closeDetailsDialog}\n        syncDetails={selectedSync}\n      />\n    </Paper>\n  );\n};\n\nexport default StravaSyncHistory;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}