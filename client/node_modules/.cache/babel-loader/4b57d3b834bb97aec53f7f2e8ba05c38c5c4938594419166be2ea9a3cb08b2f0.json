{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{Box,Typography,Avatar,Paper,Divider,Button,IconButton,Skeleton,Card,CardHeader,CardContent,CardActions,CardMedia,Chip,Tooltip,CircularProgress,Link,TextField,Dialog,DialogTitle,DialogContent,DialogActions}from'@mui/material';import{styled}from'@mui/material/styles';import{useAuth}from'../../context/AuthContext';import{useNotification}from'../common/NotificationSystem';import axios from'axios';import{ThumbUp,Comment,Share,MoreVert,Favorite,DirectionsBike,Public,EmojiEvents,AccessTime,Send}from'@mui/icons-material';import{motion}from'framer-motion';import{formatDistance,format,parseISO}from'date-fns';import{fr}from'date-fns/locale';// Composant de carte d'activité stylisée\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ActivityCard=styled(Card)(_ref=>{let{theme}=_ref;return{marginBottom:theme.spacing(2),transition:'transform 0.2s ease','&:hover':{transform:'translateY(-2px)',boxShadow:theme.shadows[4]}};});// Animation d'entrée pour les cartes d'activité\nconst cardVariants={hidden:{opacity:0,y:20},visible:i=>({opacity:1,y:0,transition:{delay:i*0.1,duration:0.3}})};/**\n * Flux d'activité pour la section Community\n * Affiche les activités récentes des membres de la communauté\n */const CommunityActivityFeed=_ref2=>{let{limit=10,filter='all'}=_ref2;const[activities,setActivities]=useState([]);const[loading,setLoading]=useState(true);const[page,setPage]=useState(1);const[hasMore,setHasMore]=useState(true);const[commentText,setCommentText]=useState('');const[commentDialogOpen,setCommentDialogOpen]=useState(false);const[currentActivityId,setCurrentActivityId]=useState(null);const[commentLoading,setCommentLoading]=useState(false);const{user,token}=useAuth();const{notify}=useNotification();// Configuration des en-têtes d'authentification pour les requêtes API\nconst authConfig=useCallback(()=>{return{headers:{'Authorization':`Bearer ${token}`}};},[token]);// Récupérer les activités depuis l'API\nconst fetchActivities=useCallback(async function(){let pageNum=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let replace=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;try{setLoading(true);const response=await axios.get(`/api/community/activity-feed`,{...authConfig(),params:{limit,page:pageNum,filter}});// Si la réponse est vide ou a moins d'éléments que la limite, il n'y a plus de données\nif(!response.data||response.data.length===0||response.data.length<limit){setHasMore(false);}// Transformer les données pour correspondre à la structure attendue par le composant\nconst formattedActivities=response.data.map(activity=>{let formattedActivity={id:activity._id,type:activity.type,user:{id:activity.userId._id,name:`${activity.userId.firstName} ${activity.userId.lastName}`,avatar:activity.userId.profilePicture||'https://via.placeholder.com/40'},title:'',content:'',likes:activity.kudosCount||0,comments:activity.commentCount||0,hasLiked:activity.hasGivenKudos||false,timestamp:activity.createdAt};// Adapter le formatage en fonction du type d'activité\nswitch(activity.type){case'ride':formattedActivity.title=activity.data.title||'Nouvelle sortie vélo';formattedActivity.content=activity.data.description||'';formattedActivity.stats={distance:activity.data.distance||0,elevation:activity.data.elevation||0,duration:activity.data.duration?`${Math.floor(activity.data.duration/60)}h ${activity.data.duration%60}m`:'0h 0m',power:activity.data.power||0};formattedActivity.images=activity.data.images||[];formattedActivity.location=activity.data.location||'';break;case'comment':formattedActivity.title='A commenté une activité';formattedActivity.content=activity.data.comment||'';formattedActivity.targetActivity=activity.data.activityId;break;case'event_join':formattedActivity.title='Participe à un événement';formattedActivity.event={id:activity.data.eventId,name:activity.data.eventName||'Événement',date:activity.data.eventDate,location:activity.data.eventLocation||'',distance:activity.data.eventDistance||0,participants:activity.data.participantCount||0};break;case'achievement':formattedActivity.title='A obtenu un nouvel accomplissement';formattedActivity.achievement={name:activity.data.achievementName||'Accomplissement',improvement:activity.data.improvement||'',position:activity.data.position||''};break;case'challenge_completion':formattedActivity.title='A terminé un défi';formattedActivity.challenge={name:activity.data.challengeName||'Défi',completed:true,totalDistance:activity.data.totalDistance||0,totalElevation:activity.data.totalElevation||0};break;case'follow':formattedActivity.title='Suit un nouveau cycliste';formattedActivity.followedUser={id:activity.data.followedUserId,name:activity.data.followedUserName||'Cycliste'};break;case'kudos':formattedActivity.title='A aimé une activité';formattedActivity.targetActivity=activity.data.activityId;break;default:formattedActivity.title='Nouvelle activité';formattedActivity.content='';}return formattedActivity;});// Mettre à jour l'état avec les nouvelles activités\nif(replace){setActivities(formattedActivities);}else{setActivities(prev=>[...prev,...formattedActivities]);}setPage(pageNum);setLoading(false);}catch(error){console.error('Erreur lors de la récupération des activités:',error);notify({type:'error',message:'Impossible de charger les activités. Veuillez réessayer.'});setLoading(false);}},[authConfig,limit,filter,notify]);// Charger les activités lors du premier rendu\nuseEffect(()=>{if(user&&token){fetchActivities(1,true);}},[fetchActivities,user,token,filter]);// Gérer le chargement de plus d'activités\nconst handleLoadMore=async()=>{if(!loading&&hasMore){await fetchActivities(page+1,false);}};// Gérer les likes (kudos)\nconst handleLike=async activityId=>{try{const activity=activities.find(a=>a.id===activityId);if(!activity)return;const isLiked=activity.hasLiked;// Optimistic update\nsetActivities(prevActivities=>prevActivities.map(a=>a.id===activityId?{...a,hasLiked:!isLiked,likes:isLiked?a.likes-1:a.likes+1}:a));// Envoyer la requête à l'API\nif(isLiked){await axios.delete(`/api/community/activity/${activityId}/kudos`,authConfig());}else{await axios.post(`/api/community/activity/${activityId}/kudos`,{},authConfig());}}catch(error){console.error('Erreur lors de la gestion du like:',error);notify({type:'error',message:'Une erreur est survenue. Veuillez réessayer.'});// Revenir à l'état précédent en cas d'erreur\nfetchActivities(page,true);}};// Ouvrir la boîte de dialogue de commentaire\nconst handleOpenCommentDialog=activityId=>{setCurrentActivityId(activityId);setCommentText('');setCommentDialogOpen(true);};// Fermer la boîte de dialogue de commentaire\nconst handleCloseCommentDialog=()=>{setCommentDialogOpen(false);setCurrentActivityId(null);setCommentText('');};// Envoyer un commentaire\nconst handleSubmitComment=async()=>{if(!commentText.trim()||!currentActivityId)return;try{setCommentLoading(true);await axios.post(`/api/community/activity/${currentActivityId}/comment`,{content:commentText.trim()},authConfig());// Mettre à jour le compteur de commentaires\nsetActivities(prevActivities=>prevActivities.map(a=>a.id===currentActivityId?{...a,comments:a.comments+1}:a));notify({type:'success',message:'Commentaire ajouté avec succès'});handleCloseCommentDialog();}catch(error){console.error('Erreur lors de l\\'ajout du commentaire:',error);notify({type:'error',message:'Impossible d\\'ajouter le commentaire. Veuillez réessayer.'});}finally{setCommentLoading(false);}};// Formater la date relative\nconst formatRelativeTime=dateString=>{if(!dateString)return'';try{const date=typeof dateString==='string'?parseISO(dateString):new Date(dateString);return formatDistance(date,new Date(),{addSuffix:true,locale:fr});}catch(error){console.error('Erreur de formatage de date:',error);return'';}};return/*#__PURE__*/_jsxs(Box,{children:[loading&&activities.length===0?/*#__PURE__*/// Afficher des skeletons pendant le chargement initial\n_jsx(Box,{children:Array.from(new Array(3)).map((_,index)=>/*#__PURE__*/_jsxs(Paper,{sx:{p:2,mb:2},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:2},children:[/*#__PURE__*/_jsx(Skeleton,{variant:\"circular\",width:40,height:40}),/*#__PURE__*/_jsxs(Box,{sx:{ml:2},children:[/*#__PURE__*/_jsx(Skeleton,{variant:\"text\",width:120}),/*#__PURE__*/_jsx(Skeleton,{variant:\"text\",width:80})]})]}),/*#__PURE__*/_jsx(Skeleton,{variant:\"text\"}),/*#__PURE__*/_jsx(Skeleton,{variant:\"text\"}),/*#__PURE__*/_jsx(Skeleton,{variant:\"rectangular\",height:200,sx:{my:2}}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',mt:2},children:[/*#__PURE__*/_jsx(Skeleton,{variant:\"text\",width:60}),/*#__PURE__*/_jsx(Skeleton,{variant:\"text\",width:60}),/*#__PURE__*/_jsx(Skeleton,{variant:\"text\",width:60})]})]},index))}):/*#__PURE__*/_jsx(Box,{children:activities.length===0?/*#__PURE__*/// Message si aucune activité\n_jsxs(Paper,{sx:{p:3,textAlign:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"text.secondary\",children:\"Aucune activit\\xE9 \\xE0 afficher pour le moment\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mt:1},children:\"Suivez plus de cyclistes ou rejoignez des d\\xE9fis pour voir leur activit\\xE9 ici.\"})]}):/*#__PURE__*/// Affichage des activités\n_jsxs(Box,{children:[activities.map((activity,index)=>/*#__PURE__*/_jsx(Box,{component:motion.div,variants:cardVariants,initial:\"hidden\",animate:\"visible\",custom:index,children:/*#__PURE__*/_jsxs(ActivityCard,{children:[/*#__PURE__*/_jsx(CardHeader,{avatar:/*#__PURE__*/_jsx(Avatar,{src:activity.user.avatar,alt:activity.user.name,children:activity.user.name.charAt(0)}),action:/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"settings\",children:/*#__PURE__*/_jsx(MoreVert,{})}),title:/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",component:\"span\",children:activity.user.name}),subheader:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mt:0.5},children:[activity.type==='ride'&&/*#__PURE__*/_jsx(DirectionsBike,{fontSize:\"small\",color:\"primary\",sx:{mr:0.5}}),activity.type==='achievement'&&/*#__PURE__*/_jsx(EmojiEvents,{fontSize:\"small\",color:\"secondary\",sx:{mr:0.5}}),activity.type==='event_join'&&/*#__PURE__*/_jsx(Public,{fontSize:\"small\",color:\"info\",sx:{mr:0.5}}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[activity.title,\" \\u2022 \",formatRelativeTime(activity.timestamp)]})]})}),/*#__PURE__*/_jsxs(CardContent,{sx:{py:1},children:[activity.content&&/*#__PURE__*/_jsx(Typography,{variant:\"body1\",component:\"p\",sx:{mb:2},children:activity.content}),activity.type==='ride'&&activity.stats&&/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexWrap:'wrap',gap:1,my:2},children:[/*#__PURE__*/_jsx(Chip,{icon:/*#__PURE__*/_jsx(DirectionsBike,{}),label:`${activity.stats.distance} km`,size:\"small\",color:\"primary\",variant:\"outlined\"}),/*#__PURE__*/_jsx(Chip,{icon:/*#__PURE__*/_jsx(AccessTime,{}),label:activity.stats.duration,size:\"small\",color:\"primary\",variant:\"outlined\"}),/*#__PURE__*/_jsx(Chip,{label:`${activity.stats.elevation} m D+`,size:\"small\",color:\"primary\",variant:\"outlined\"}),activity.stats.power>0&&/*#__PURE__*/_jsx(Chip,{label:`${activity.stats.power} W`,size:\"small\",color:\"primary\",variant:\"outlined\"}),activity.location&&/*#__PURE__*/_jsx(Chip,{icon:/*#__PURE__*/_jsx(Public,{}),label:activity.location,size:\"small\",color:\"secondary\",variant:\"outlined\"})]}),activity.type==='achievement'&&activity.achievement&&/*#__PURE__*/_jsxs(Box,{sx:{p:2,bgcolor:'warning.light',borderRadius:1,mb:2,border:1,borderColor:'warning.main'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"warning.dark\",children:activity.achievement.name}),activity.achievement.improvement&&/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Am\\xE9lioration: \",activity.achievement.improvement]}),activity.achievement.position&&/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Classement: \",activity.achievement.position]})]}),activity.type==='event_join'&&activity.event&&/*#__PURE__*/_jsxs(Box,{sx:{p:2,bgcolor:'info.light',borderRadius:1,mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"info.dark\",children:activity.event.name}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[new Date(activity.event.date).toLocaleDateString('fr-FR',{weekday:'long',year:'numeric',month:'long',day:'numeric'}),' • ',new Date(activity.event.date).toLocaleTimeString('fr-FR',{hour:'2-digit',minute:'2-digit'})]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[activity.event.location,\" \\u2022 \",activity.event.distance,\" km \\u2022 \",activity.event.participants,\" participants\"]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",size:\"small\",sx:{mt:1,bgcolor:'primary.dark','&:hover':{bgcolor:'primary.main'}},children:\"S'inscrire\"})]}),activity.type==='challenge_completion'&&activity.challenge&&/*#__PURE__*/_jsxs(Box,{sx:{p:2,bgcolor:'secondary.light',color:'secondary.contrastText',borderRadius:1,mb:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle2\",children:[activity.challenge.name,\" \",activity.challenge.completed?'✓':'']}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[activity.challenge.totalDistance,\" km \\u2022 \",activity.challenge.totalElevation,\" m D+\"]})]})]}),activity.images&&activity.images.length>0&&/*#__PURE__*/_jsx(CardMedia,{component:\"img\",height:\"240\",image:activity.images[0],alt:activity.title,sx:{objectFit:'cover'}}),/*#__PURE__*/_jsxs(CardActions,{disableSpacing:true,children:[/*#__PURE__*/_jsx(Tooltip,{title:activity.hasLiked?\"Je n'aime plus\":\"J'aime\",children:/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"like\",onClick:()=>handleLike(activity.id),color:activity.hasLiked?\"primary\":\"default\",children:/*#__PURE__*/_jsx(ThumbUp,{})})}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mr:2},children:activity.likes}),/*#__PURE__*/_jsx(Tooltip,{title:\"Commenter\",children:/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"comment\",onClick:()=>handleOpenCommentDialog(activity.id),children:/*#__PURE__*/_jsx(Comment,{})})}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mr:2},children:activity.comments}),/*#__PURE__*/_jsx(Tooltip,{title:\"Partager\",children:/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"share\",children:/*#__PURE__*/_jsx(Share,{})})})]})]})},activity.id)),hasMore&&/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",mt:2,mb:4,children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:handleLoadMore,disabled:loading,startIcon:loading&&/*#__PURE__*/_jsx(CircularProgress,{size:16}),children:loading?'Chargement...':'Voir plus d\\'activités'})})]})}),/*#__PURE__*/_jsxs(Dialog,{open:commentDialogOpen,onClose:handleCloseCommentDialog,fullWidth:true,maxWidth:\"sm\",children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Ajouter un commentaire\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(TextField,{autoFocus:true,multiline:true,rows:4,margin:\"dense\",label:\"Votre commentaire\",fullWidth:true,variant:\"outlined\",value:commentText,onChange:e=>setCommentText(e.target.value)})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleCloseCommentDialog,color:\"primary\",children:\"Annuler\"}),/*#__PURE__*/_jsx(Button,{onClick:handleSubmitComment,color:\"primary\",variant:\"contained\",disabled:!commentText.trim()||commentLoading,startIcon:commentLoading?/*#__PURE__*/_jsx(CircularProgress,{size:16}):/*#__PURE__*/_jsx(Send,{}),children:\"Publier\"})]})]})]});};export default CommunityActivityFeed;","map":{"version":3,"names":["React","useState","useEffect","useCallback","Box","Typography","Avatar","Paper","Divider","Button","IconButton","Skeleton","Card","CardHeader","CardContent","CardActions","CardMedia","Chip","Tooltip","CircularProgress","Link","TextField","Dialog","DialogTitle","DialogContent","DialogActions","styled","useAuth","useNotification","axios","ThumbUp","Comment","Share","MoreVert","Favorite","DirectionsBike","Public","EmojiEvents","AccessTime","Send","motion","formatDistance","format","parseISO","fr","jsx","_jsx","jsxs","_jsxs","ActivityCard","_ref","theme","marginBottom","spacing","transition","transform","boxShadow","shadows","cardVariants","hidden","opacity","y","visible","i","delay","duration","CommunityActivityFeed","_ref2","limit","filter","activities","setActivities","loading","setLoading","page","setPage","hasMore","setHasMore","commentText","setCommentText","commentDialogOpen","setCommentDialogOpen","currentActivityId","setCurrentActivityId","commentLoading","setCommentLoading","user","token","notify","authConfig","headers","fetchActivities","pageNum","arguments","length","undefined","replace","response","get","params","data","formattedActivities","map","activity","formattedActivity","id","_id","type","userId","name","firstName","lastName","avatar","profilePicture","title","content","likes","kudosCount","comments","commentCount","hasLiked","hasGivenKudos","timestamp","createdAt","description","stats","distance","elevation","Math","floor","power","images","location","comment","targetActivity","activityId","event","eventId","eventName","date","eventDate","eventLocation","eventDistance","participants","participantCount","achievement","achievementName","improvement","position","challenge","challengeName","completed","totalDistance","totalElevation","followedUser","followedUserId","followedUserName","prev","error","console","message","handleLoadMore","handleLike","find","a","isLiked","prevActivities","delete","post","handleOpenCommentDialog","handleCloseCommentDialog","handleSubmitComment","trim","formatRelativeTime","dateString","Date","addSuffix","locale","children","Array","from","_","index","sx","p","mb","display","alignItems","variant","width","height","ml","my","justifyContent","mt","textAlign","color","component","div","variants","initial","animate","custom","src","alt","charAt","action","subheader","fontSize","mr","py","flexWrap","gap","icon","label","size","bgcolor","borderRadius","border","borderColor","toLocaleDateString","weekday","year","month","day","toLocaleTimeString","hour","minute","image","objectFit","disableSpacing","onClick","disabled","startIcon","open","onClose","fullWidth","maxWidth","autoFocus","multiline","rows","margin","value","onChange","e","target"],"sources":["C:/Users/busin/CascadeProjects/grand-est-cyclisme-website-final (1) VERSION FINAL/client/src/components/community/CommunityActivityFeed.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { \n  Box, \n  Typography, \n  Avatar, \n  Paper, \n  Divider, \n  Button, \n  IconButton, \n  Skeleton,\n  Card, \n  CardHeader, \n  CardContent, \n  CardActions, \n  CardMedia,\n  Chip,\n  Tooltip,\n  CircularProgress,\n  Link,\n  TextField,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions\n} from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport { useAuth } from '../../context/AuthContext';\nimport { useNotification } from '../common/NotificationSystem';\nimport axios from 'axios';\nimport {\n  ThumbUp, \n  Comment, \n  Share, \n  MoreVert, \n  Favorite, \n  DirectionsBike, \n  Public,\n  EmojiEvents,\n  AccessTime,\n  Send\n} from '@mui/icons-material';\nimport { motion } from 'framer-motion';\nimport { formatDistance, format, parseISO } from 'date-fns';\nimport { fr } from 'date-fns/locale';\n\n// Composant de carte d'activité stylisée\nconst ActivityCard = styled(Card)(({ theme }) => ({\n  marginBottom: theme.spacing(2),\n  transition: 'transform 0.2s ease',\n  '&:hover': {\n    transform: 'translateY(-2px)',\n    boxShadow: theme.shadows[4]\n  }\n}));\n\n// Animation d'entrée pour les cartes d'activité\nconst cardVariants = {\n  hidden: { opacity: 0, y: 20 },\n  visible: (i) => ({\n    opacity: 1,\n    y: 0,\n    transition: {\n      delay: i * 0.1,\n      duration: 0.3\n    }\n  })\n};\n\n/**\n * Flux d'activité pour la section Community\n * Affiche les activités récentes des membres de la communauté\n */\nconst CommunityActivityFeed = ({ limit = 10, filter = 'all' }) => {\n  const [activities, setActivities] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n  const [commentText, setCommentText] = useState('');\n  const [commentDialogOpen, setCommentDialogOpen] = useState(false);\n  const [currentActivityId, setCurrentActivityId] = useState(null);\n  const [commentLoading, setCommentLoading] = useState(false);\n  const { user, token } = useAuth();\n  const { notify } = useNotification();\n\n  // Configuration des en-têtes d'authentification pour les requêtes API\n  const authConfig = useCallback(() => {\n    return {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    };\n  }, [token]);\n\n  // Récupérer les activités depuis l'API\n  const fetchActivities = useCallback(async (pageNum = 1, replace = true) => {\n    try {\n      setLoading(true);\n      \n      const response = await axios.get(`/api/community/activity-feed`, {\n        ...authConfig(),\n        params: {\n          limit,\n          page: pageNum,\n          filter\n        }\n      });\n      \n      // Si la réponse est vide ou a moins d'éléments que la limite, il n'y a plus de données\n      if (!response.data || response.data.length === 0 || response.data.length < limit) {\n        setHasMore(false);\n      }\n      \n      // Transformer les données pour correspondre à la structure attendue par le composant\n      const formattedActivities = response.data.map(activity => {\n        let formattedActivity = {\n          id: activity._id,\n          type: activity.type,\n          user: {\n            id: activity.userId._id,\n            name: `${activity.userId.firstName} ${activity.userId.lastName}`,\n            avatar: activity.userId.profilePicture || 'https://via.placeholder.com/40'\n          },\n          title: '',\n          content: '',\n          likes: activity.kudosCount || 0,\n          comments: activity.commentCount || 0,\n          hasLiked: activity.hasGivenKudos || false,\n          timestamp: activity.createdAt\n        };\n        \n        // Adapter le formatage en fonction du type d'activité\n        switch(activity.type) {\n          case 'ride':\n            formattedActivity.title = activity.data.title || 'Nouvelle sortie vélo';\n            formattedActivity.content = activity.data.description || '';\n            formattedActivity.stats = {\n              distance: activity.data.distance || 0,\n              elevation: activity.data.elevation || 0,\n              duration: activity.data.duration ? `${Math.floor(activity.data.duration / 60)}h ${activity.data.duration % 60}m` : '0h 0m',\n              power: activity.data.power || 0\n            };\n            formattedActivity.images = activity.data.images || [];\n            formattedActivity.location = activity.data.location || '';\n            break;\n            \n          case 'comment':\n            formattedActivity.title = 'A commenté une activité';\n            formattedActivity.content = activity.data.comment || '';\n            formattedActivity.targetActivity = activity.data.activityId;\n            break;\n            \n          case 'event_join':\n            formattedActivity.title = 'Participe à un événement';\n            formattedActivity.event = {\n              id: activity.data.eventId,\n              name: activity.data.eventName || 'Événement',\n              date: activity.data.eventDate,\n              location: activity.data.eventLocation || '',\n              distance: activity.data.eventDistance || 0,\n              participants: activity.data.participantCount || 0\n            };\n            break;\n            \n          case 'achievement':\n            formattedActivity.title = 'A obtenu un nouvel accomplissement';\n            formattedActivity.achievement = {\n              name: activity.data.achievementName || 'Accomplissement',\n              improvement: activity.data.improvement || '',\n              position: activity.data.position || ''\n            };\n            break;\n            \n          case 'challenge_completion':\n            formattedActivity.title = 'A terminé un défi';\n            formattedActivity.challenge = {\n              name: activity.data.challengeName || 'Défi',\n              completed: true,\n              totalDistance: activity.data.totalDistance || 0,\n              totalElevation: activity.data.totalElevation || 0\n            };\n            break;\n            \n          case 'follow':\n            formattedActivity.title = 'Suit un nouveau cycliste';\n            formattedActivity.followedUser = {\n              id: activity.data.followedUserId,\n              name: activity.data.followedUserName || 'Cycliste'\n            };\n            break;\n            \n          case 'kudos':\n            formattedActivity.title = 'A aimé une activité';\n            formattedActivity.targetActivity = activity.data.activityId;\n            break;\n            \n          default:\n            formattedActivity.title = 'Nouvelle activité';\n            formattedActivity.content = '';\n        }\n        \n        return formattedActivity;\n      });\n      \n      // Mettre à jour l'état avec les nouvelles activités\n      if (replace) {\n        setActivities(formattedActivities);\n      } else {\n        setActivities(prev => [...prev, ...formattedActivities]);\n      }\n      \n      setPage(pageNum);\n      setLoading(false);\n    } catch (error) {\n      console.error('Erreur lors de la récupération des activités:', error);\n      notify({\n        type: 'error',\n        message: 'Impossible de charger les activités. Veuillez réessayer.'\n      });\n      setLoading(false);\n    }\n  }, [authConfig, limit, filter, notify]);\n\n  // Charger les activités lors du premier rendu\n  useEffect(() => {\n    if (user && token) {\n      fetchActivities(1, true);\n    }\n  }, [fetchActivities, user, token, filter]);\n\n  // Gérer le chargement de plus d'activités\n  const handleLoadMore = async () => {\n    if (!loading && hasMore) {\n      await fetchActivities(page + 1, false);\n    }\n  };\n\n  // Gérer les likes (kudos)\n  const handleLike = async (activityId) => {\n    try {\n      const activity = activities.find(a => a.id === activityId);\n      if (!activity) return;\n      \n      const isLiked = activity.hasLiked;\n      \n      // Optimistic update\n      setActivities(prevActivities => \n        prevActivities.map(a => \n          a.id === activityId\n            ? { \n                ...a, \n                hasLiked: !isLiked, \n                likes: isLiked ? a.likes - 1 : a.likes + 1 \n              }\n            : a\n        )\n      );\n      \n      // Envoyer la requête à l'API\n      if (isLiked) {\n        await axios.delete(`/api/community/activity/${activityId}/kudos`, authConfig());\n      } else {\n        await axios.post(`/api/community/activity/${activityId}/kudos`, {}, authConfig());\n      }\n    } catch (error) {\n      console.error('Erreur lors de la gestion du like:', error);\n      notify({\n        type: 'error',\n        message: 'Une erreur est survenue. Veuillez réessayer.'\n      });\n      \n      // Revenir à l'état précédent en cas d'erreur\n      fetchActivities(page, true);\n    }\n  };\n  \n  // Ouvrir la boîte de dialogue de commentaire\n  const handleOpenCommentDialog = (activityId) => {\n    setCurrentActivityId(activityId);\n    setCommentText('');\n    setCommentDialogOpen(true);\n  };\n  \n  // Fermer la boîte de dialogue de commentaire\n  const handleCloseCommentDialog = () => {\n    setCommentDialogOpen(false);\n    setCurrentActivityId(null);\n    setCommentText('');\n  };\n  \n  // Envoyer un commentaire\n  const handleSubmitComment = async () => {\n    if (!commentText.trim() || !currentActivityId) return;\n    \n    try {\n      setCommentLoading(true);\n      \n      await axios.post(`/api/community/activity/${currentActivityId}/comment`, {\n        content: commentText.trim()\n      }, authConfig());\n      \n      // Mettre à jour le compteur de commentaires\n      setActivities(prevActivities => \n        prevActivities.map(a => \n          a.id === currentActivityId\n            ? { ...a, comments: a.comments + 1 }\n            : a\n        )\n      );\n      \n      notify({\n        type: 'success',\n        message: 'Commentaire ajouté avec succès'\n      });\n      \n      handleCloseCommentDialog();\n    } catch (error) {\n      console.error('Erreur lors de l\\'ajout du commentaire:', error);\n      notify({\n        type: 'error',\n        message: 'Impossible d\\'ajouter le commentaire. Veuillez réessayer.'\n      });\n    } finally {\n      setCommentLoading(false);\n    }\n  };\n\n  // Formater la date relative\n  const formatRelativeTime = (dateString) => {\n    if (!dateString) return '';\n    \n    try {\n      const date = typeof dateString === 'string' ? parseISO(dateString) : new Date(dateString);\n      return formatDistance(date, new Date(), { \n        addSuffix: true,\n        locale: fr \n      });\n    } catch (error) {\n      console.error('Erreur de formatage de date:', error);\n      return '';\n    }\n  };\n\n  return (\n    <Box>\n      {loading && activities.length === 0 ? (\n        // Afficher des skeletons pendant le chargement initial\n        <Box>\n          {Array.from(new Array(3)).map((_, index) => (\n            <Paper key={index} sx={{ p: 2, mb: 2 }}>\n              <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n                <Skeleton variant=\"circular\" width={40} height={40} />\n                <Box sx={{ ml: 2 }}>\n                  <Skeleton variant=\"text\" width={120} />\n                  <Skeleton variant=\"text\" width={80} />\n                </Box>\n              </Box>\n              <Skeleton variant=\"text\" />\n              <Skeleton variant=\"text\" />\n              <Skeleton variant=\"rectangular\" height={200} sx={{ my: 2 }} />\n              <Box sx={{ display: 'flex', justifyContent: 'space-between', mt: 2 }}>\n                <Skeleton variant=\"text\" width={60} />\n                <Skeleton variant=\"text\" width={60} />\n                <Skeleton variant=\"text\" width={60} />\n              </Box>\n            </Paper>\n          ))}\n        </Box>\n      ) : (\n        <Box>\n          {activities.length === 0 ? (\n            // Message si aucune activité\n            <Paper sx={{ p: 3, textAlign: 'center' }}>\n              <Typography variant=\"h6\" color=\"text.secondary\">\n                Aucune activité à afficher pour le moment\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\n                Suivez plus de cyclistes ou rejoignez des défis pour voir leur activité ici.\n              </Typography>\n            </Paper>\n          ) : (\n            // Affichage des activités\n            <Box>\n              {activities.map((activity, index) => (\n                <Box \n                  component={motion.div}\n                  key={activity.id}\n                  variants={cardVariants}\n                  initial=\"hidden\"\n                  animate=\"visible\"\n                  custom={index}\n                >\n                  <ActivityCard>\n                    <CardHeader\n                      avatar={\n                        <Avatar src={activity.user.avatar} alt={activity.user.name}>\n                          {activity.user.name.charAt(0)}\n                        </Avatar>\n                      }\n                      action={\n                        <IconButton aria-label=\"settings\">\n                          <MoreVert />\n                        </IconButton>\n                      }\n                      title={\n                        <Typography variant=\"subtitle1\" component=\"span\">\n                          {activity.user.name}\n                        </Typography>\n                      }\n                      subheader={\n                        <Box sx={{ display: 'flex', alignItems: 'center', mt: 0.5 }}>\n                          {activity.type === 'ride' && <DirectionsBike fontSize=\"small\" color=\"primary\" sx={{ mr: 0.5 }} />}\n                          {activity.type === 'achievement' && <EmojiEvents fontSize=\"small\" color=\"secondary\" sx={{ mr: 0.5 }} />}\n                          {activity.type === 'event_join' && <Public fontSize=\"small\" color=\"info\" sx={{ mr: 0.5 }} />}\n                          <Typography variant=\"body2\" color=\"text.secondary\">\n                            {activity.title} • {formatRelativeTime(activity.timestamp)}\n                          </Typography>\n                        </Box>\n                      }\n                    />\n\n                    <CardContent sx={{ py: 1 }}>\n                      {activity.content && (\n                        <Typography variant=\"body1\" component=\"p\" sx={{ mb: 2 }}>\n                          {activity.content}\n                        </Typography>\n                      )}\n\n                      {/* Stats pour les sorties vélo */}\n                      {activity.type === 'ride' && activity.stats && (\n                        <Box sx={{ \n                          display: 'flex', \n                          flexWrap: 'wrap', \n                          gap: 1,\n                          my: 2\n                        }}>\n                          <Chip \n                            icon={<DirectionsBike />} \n                            label={`${activity.stats.distance} km`} \n                            size=\"small\" \n                            color=\"primary\" \n                            variant=\"outlined\" \n                          />\n                          <Chip \n                            icon={<AccessTime />} \n                            label={activity.stats.duration} \n                            size=\"small\" \n                            color=\"primary\" \n                            variant=\"outlined\" \n                          />\n                          <Chip \n                            label={`${activity.stats.elevation} m D+`} \n                            size=\"small\" \n                            color=\"primary\" \n                            variant=\"outlined\" \n                          />\n                          {activity.stats.power > 0 && (\n                            <Chip \n                              label={`${activity.stats.power} W`} \n                              size=\"small\" \n                              color=\"primary\" \n                              variant=\"outlined\" \n                            />\n                          )}\n                          {activity.location && (\n                            <Chip \n                              icon={<Public />} \n                              label={activity.location} \n                              size=\"small\" \n                              color=\"secondary\" \n                              variant=\"outlined\" \n                            />\n                          )}\n                        </Box>\n                      )}\n\n                      {/* Infos pour les accomplissements */}\n                      {activity.type === 'achievement' && activity.achievement && (\n                        <Box sx={{ \n                          p: 2, \n                          bgcolor: 'warning.light', \n                          borderRadius: 1,\n                          mb: 2,\n                          border: 1,\n                          borderColor: 'warning.main'\n                        }}>\n                          <Typography variant=\"subtitle2\" color=\"warning.dark\">\n                            {activity.achievement.name}\n                          </Typography>\n                          {activity.achievement.improvement && (\n                            <Typography variant=\"body2\" color=\"text.secondary\">\n                              Amélioration: {activity.achievement.improvement}\n                            </Typography>\n                          )}\n                          {activity.achievement.position && (\n                            <Typography variant=\"body2\" color=\"text.secondary\">\n                              Classement: {activity.achievement.position}\n                            </Typography>\n                          )}\n                        </Box>\n                      )}\n\n                      {/* Infos pour les événements */}\n                      {activity.type === 'event_join' && activity.event && (\n                        <Box sx={{ \n                          p: 2, \n                          bgcolor: 'info.light', \n                          borderRadius: 1,\n                          mb: 2\n                        }}>\n                          <Typography variant=\"subtitle2\" color=\"info.dark\">\n                            {activity.event.name}\n                          </Typography>\n                          <Typography variant=\"body2\" color=\"text.secondary\">\n                            {new Date(activity.event.date).toLocaleDateString('fr-FR', { \n                              weekday: 'long', \n                              year: 'numeric', \n                              month: 'long', \n                              day: 'numeric' \n                            })}\n                            {' • '}\n                            {new Date(activity.event.date).toLocaleTimeString('fr-FR', { \n                              hour: '2-digit', \n                              minute: '2-digit' \n                            })}\n                          </Typography>\n                          <Typography variant=\"body2\">\n                            {activity.event.location} • {activity.event.distance} km • {activity.event.participants} participants\n                          </Typography>\n                          <Button \n                            variant=\"contained\" \n                            size=\"small\" \n                            sx={{ \n                              mt: 1, \n                              bgcolor: 'primary.dark',\n                              '&:hover': {\n                                bgcolor: 'primary.main'\n                              }\n                            }}\n                          >\n                            S'inscrire\n                          </Button>\n                        </Box>\n                      )}\n\n                      {activity.type === 'challenge_completion' && activity.challenge && (\n                        <Box sx={{ \n                          p: 2, \n                          bgcolor: 'secondary.light', \n                          color: 'secondary.contrastText',\n                          borderRadius: 1,\n                          mb: 2\n                        }}>\n                          <Typography variant=\"subtitle2\">\n                            {activity.challenge.name} {activity.challenge.completed ? '✓' : ''}\n                          </Typography>\n                          <Typography variant=\"body2\">\n                            {activity.challenge.totalDistance} km • {activity.challenge.totalElevation} m D+\n                          </Typography>\n                        </Box>\n                      )}\n                    </CardContent>\n\n                    {/* Affichage des images */}\n                    {activity.images && activity.images.length > 0 && (\n                      <CardMedia\n                        component=\"img\"\n                        height=\"240\"\n                        image={activity.images[0]}\n                        alt={activity.title}\n                        sx={{ objectFit: 'cover' }}\n                      />\n                    )}\n\n                    <CardActions disableSpacing>\n                      <Tooltip title={activity.hasLiked ? \"Je n'aime plus\" : \"J'aime\"}>\n                        <IconButton \n                          aria-label=\"like\" \n                          onClick={() => handleLike(activity.id)}\n                          color={activity.hasLiked ? \"primary\" : \"default\"}\n                        >\n                          <ThumbUp />\n                        </IconButton>\n                      </Tooltip>\n                      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mr: 2 }}>\n                        {activity.likes}\n                      </Typography>\n                      \n                      <Tooltip title=\"Commenter\">\n                        <IconButton \n                          aria-label=\"comment\"\n                          onClick={() => handleOpenCommentDialog(activity.id)}\n                        >\n                          <Comment />\n                        </IconButton>\n                      </Tooltip>\n                      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mr: 2 }}>\n                        {activity.comments}\n                      </Typography>\n                      \n                      <Tooltip title=\"Partager\">\n                        <IconButton aria-label=\"share\">\n                          <Share />\n                        </IconButton>\n                      </Tooltip>\n                    </CardActions>\n                  </ActivityCard>\n                </Box>\n              ))}\n\n              {/* Bouton pour charger plus d'activités */}\n              {hasMore && (\n                <Box display=\"flex\" justifyContent=\"center\" mt={2} mb={4}>\n                  <Button \n                    variant=\"outlined\" \n                    onClick={handleLoadMore}\n                    disabled={loading}\n                    startIcon={loading && <CircularProgress size={16} />}\n                  >\n                    {loading ? 'Chargement...' : 'Voir plus d\\'activités'}\n                  </Button>\n                </Box>\n              )}\n            </Box>\n          )}\n        </Box>\n      )}\n      \n      {/* Boîte de dialogue pour ajouter un commentaire */}\n      <Dialog \n        open={commentDialogOpen} \n        onClose={handleCloseCommentDialog}\n        fullWidth\n        maxWidth=\"sm\"\n      >\n        <DialogTitle>Ajouter un commentaire</DialogTitle>\n        <DialogContent>\n          <TextField\n            autoFocus\n            multiline\n            rows={4}\n            margin=\"dense\"\n            label=\"Votre commentaire\"\n            fullWidth\n            variant=\"outlined\"\n            value={commentText}\n            onChange={(e) => setCommentText(e.target.value)}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleCloseCommentDialog} color=\"primary\">\n            Annuler\n          </Button>\n          <Button \n            onClick={handleSubmitComment} \n            color=\"primary\" \n            variant=\"contained\"\n            disabled={!commentText.trim() || commentLoading}\n            startIcon={commentLoading ? <CircularProgress size={16} /> : <Send />}\n          >\n            Publier\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n\nexport default CommunityActivityFeed;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}