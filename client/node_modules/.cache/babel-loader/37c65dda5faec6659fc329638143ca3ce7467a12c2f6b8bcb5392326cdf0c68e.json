{"ast":null,"code":"/**\n * Composant de gestion des erreurs (Error Boundary)\n * Ce composant capture les erreurs JavaScript dans l'arbre de composants enfants\n * et affiche une interface de secours élégante\n */import React,{Component}from'react';import{Box,Typography,Button,Paper,Divider,Stack,Collapse}from'@mui/material';import{ErrorOutline as ErrorIcon,Refresh as RefreshIcon,Home as HomeIcon,Code as CodeIcon,ExpandMore as ExpandMoreIcon,ExpandLess as ExpandLessIcon}from'@mui/icons-material';import{Link as RouterLink}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";class ErrorBoundary extends Component{constructor(props){super(props);this.handleRefresh=()=>{// Recharger la page actuelle\nwindow.location.reload();};this.toggleDetails=()=>{this.setState(prevState=>({showDetails:!prevState.showDetails}));};this.state={hasError:false,error:null,errorInfo:null,showDetails:false};}static getDerivedStateFromError(error){// Mettre à jour l'état pour afficher l'UI de secours\nreturn{hasError:true,error};}componentDidCatch(error,errorInfo){// Capturer les détails de l'erreur pour l'affichage\nthis.setState({errorInfo});// Enregistrer l'erreur dans le service de gestion d'erreurs\nif(this.props.onError){this.props.onError(error,errorInfo);}// Envoyer l'erreur à un service de suivi comme Sentry\n// si configuré dans l'application\nif(window.ErrorTrackingService){window.ErrorTrackingService.captureException(error,{extra:errorInfo});}}render(){const{hasError,error,errorInfo,showDetails}=this.state;const{fallback,children}=this.props;// Si un fallback personnalisé est fourni, l'utiliser\nif(hasError&&fallback){return fallback(error,errorInfo,this.handleRefresh);}// Sinon, afficher l'UI de secours par défaut\nif(hasError){return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',minHeight:'80vh',p:3},children:/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{p:4,maxWidth:800,width:'100%',borderRadius:2,border:'1px solid',borderColor:'error.light'},children:[/*#__PURE__*/_jsxs(Box,{sx:{textAlign:'center',mb:3},children:[/*#__PURE__*/_jsx(ErrorIcon,{color:\"error\",sx:{fontSize:60,mb:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,children:\"Oups ! Quelque chose s'est mal pass\\xE9\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"text.secondary\",children:\"Nous sommes d\\xE9sol\\xE9s pour ce d\\xE9sagr\\xE9ment. L'erreur a \\xE9t\\xE9 enregistr\\xE9e et notre \\xE9quipe technique a \\xE9t\\xE9 inform\\xE9e.\"})]}),/*#__PURE__*/_jsx(Divider,{sx:{my:3}}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:2,justifyContent:\"center\",sx:{mb:3},children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",startIcon:/*#__PURE__*/_jsx(RefreshIcon,{}),onClick:this.handleRefresh,children:\"Actualiser la page\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(HomeIcon,{}),component:RouterLink,to:\"/\",children:\"Retour \\xE0 l'accueil\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{mt:3},children:[/*#__PURE__*/_jsx(Button,{variant:\"text\",color:\"inherit\",startIcon:showDetails?/*#__PURE__*/_jsx(ExpandLessIcon,{}):/*#__PURE__*/_jsx(ExpandMoreIcon,{}),onClick:this.toggleDetails,sx:{mb:1},children:showDetails?'Masquer les détails techniques':'Afficher les détails techniques'}),/*#__PURE__*/_jsx(Collapse,{in:showDetails,children:/*#__PURE__*/_jsxs(Paper,{variant:\"outlined\",sx:{p:2,bgcolor:'grey.100',fontFamily:'monospace',fontSize:'0.875rem',overflow:'auto',maxHeight:300},children:[/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle2\",color:\"error\",gutterBottom:true,children:[/*#__PURE__*/_jsx(CodeIcon,{fontSize:\"small\",sx:{mr:1,verticalAlign:'middle'}}),\"Erreur:\"]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:error&&error.toString()})]}),errorInfo&&/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle2\",color:\"error\",gutterBottom:true,children:[/*#__PURE__*/_jsx(CodeIcon,{fontSize:\"small\",sx:{mr:1,verticalAlign:'middle'}}),\"Stack Trace:\"]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",component:\"pre\",sx:{whiteSpace:'pre-wrap'},children:errorInfo.componentStack})]})]})})]})]})});}// Si tout va bien, afficher les enfants normalement\nreturn children;}}export default ErrorBoundary;","map":{"version":3,"names":["React","Component","Box","Typography","Button","Paper","Divider","Stack","Collapse","ErrorOutline","ErrorIcon","Refresh","RefreshIcon","Home","HomeIcon","Code","CodeIcon","ExpandMore","ExpandMoreIcon","ExpandLess","ExpandLessIcon","Link","RouterLink","jsx","_jsx","jsxs","_jsxs","ErrorBoundary","constructor","props","handleRefresh","window","location","reload","toggleDetails","setState","prevState","showDetails","state","hasError","error","errorInfo","getDerivedStateFromError","componentDidCatch","onError","ErrorTrackingService","captureException","extra","render","fallback","children","sx","display","justifyContent","alignItems","minHeight","p","elevation","maxWidth","width","borderRadius","border","borderColor","textAlign","mb","color","fontSize","variant","component","gutterBottom","my","direction","spacing","startIcon","onClick","to","mt","in","bgcolor","fontFamily","overflow","maxHeight","mr","verticalAlign","toString","whiteSpace","componentStack"],"sources":["C:/Users/busin/CascadeProjects/grand-est-cyclisme-website-final (1) VERSION FINAL/client/src/components/common/ErrorBoundary.js"],"sourcesContent":["/**\n * Composant de gestion des erreurs (Error Boundary)\n * Ce composant capture les erreurs JavaScript dans l'arbre de composants enfants\n * et affiche une interface de secours élégante\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { \n  Box, \n  Typography, \n  Button, \n  Paper, \n  Divider,\n  Stack,\n  Collapse\n} from '@mui/material';\nimport { \n  ErrorOutline as ErrorIcon,\n  Refresh as RefreshIcon,\n  Home as HomeIcon,\n  Code as CodeIcon,\n  ExpandMore as ExpandMoreIcon,\n  ExpandLess as ExpandLessIcon\n} from '@mui/icons-material';\nimport { Link as RouterLink } from 'react-router-dom';\n\nclass ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { \n      hasError: false,\n      error: null,\n      errorInfo: null,\n      showDetails: false\n    };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Mettre à jour l'état pour afficher l'UI de secours\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // Capturer les détails de l'erreur pour l'affichage\n    this.setState({ errorInfo });\n    \n    // Enregistrer l'erreur dans le service de gestion d'erreurs\n    if (this.props.onError) {\n      this.props.onError(error, errorInfo);\n    }\n    \n    // Envoyer l'erreur à un service de suivi comme Sentry\n    // si configuré dans l'application\n    if (window.ErrorTrackingService) {\n      window.ErrorTrackingService.captureException(error, { extra: errorInfo });\n    }\n  }\n\n  handleRefresh = () => {\n    // Recharger la page actuelle\n    window.location.reload();\n  };\n\n  toggleDetails = () => {\n    this.setState(prevState => ({\n      showDetails: !prevState.showDetails\n    }));\n  };\n\n  render() {\n    const { hasError, error, errorInfo, showDetails } = this.state;\n    const { fallback, children } = this.props;\n    \n    // Si un fallback personnalisé est fourni, l'utiliser\n    if (hasError && fallback) {\n      return fallback(error, errorInfo, this.handleRefresh);\n    }\n    \n    // Sinon, afficher l'UI de secours par défaut\n    if (hasError) {\n      return (\n        <Box\n          sx={{\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            minHeight: '80vh',\n            p: 3\n          }}\n        >\n          <Paper\n            elevation={3}\n            sx={{\n              p: 4,\n              maxWidth: 800,\n              width: '100%',\n              borderRadius: 2,\n              border: '1px solid',\n              borderColor: 'error.light'\n            }}\n          >\n            <Box sx={{ textAlign: 'center', mb: 3 }}>\n              <ErrorIcon color=\"error\" sx={{ fontSize: 60, mb: 2 }} />\n              <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n                Oups ! Quelque chose s'est mal passé\n              </Typography>\n              <Typography variant=\"body1\" color=\"text.secondary\">\n                Nous sommes désolés pour ce désagrément. L'erreur a été enregistrée et notre équipe technique a été informée.\n              </Typography>\n            </Box>\n            \n            <Divider sx={{ my: 3 }} />\n            \n            <Stack direction=\"row\" spacing={2} justifyContent=\"center\" sx={{ mb: 3 }}>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                startIcon={<RefreshIcon />}\n                onClick={this.handleRefresh}\n              >\n                Actualiser la page\n              </Button>\n              <Button\n                variant=\"outlined\"\n                startIcon={<HomeIcon />}\n                component={RouterLink}\n                to=\"/\"\n              >\n                Retour à l'accueil\n              </Button>\n            </Stack>\n            \n            <Box sx={{ mt: 3 }}>\n              <Button\n                variant=\"text\"\n                color=\"inherit\"\n                startIcon={showDetails ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n                onClick={this.toggleDetails}\n                sx={{ mb: 1 }}\n              >\n                {showDetails ? 'Masquer les détails techniques' : 'Afficher les détails techniques'}\n              </Button>\n              \n              <Collapse in={showDetails}>\n                <Paper\n                  variant=\"outlined\"\n                  sx={{\n                    p: 2,\n                    bgcolor: 'grey.100',\n                    fontFamily: 'monospace',\n                    fontSize: '0.875rem',\n                    overflow: 'auto',\n                    maxHeight: 300\n                  }}\n                >\n                  <Box sx={{ mb: 2 }}>\n                    <Typography variant=\"subtitle2\" color=\"error\" gutterBottom>\n                      <CodeIcon fontSize=\"small\" sx={{ mr: 1, verticalAlign: 'middle' }} />\n                      Erreur:\n                    </Typography>\n                    <Typography variant=\"body2\">{error && error.toString()}</Typography>\n                  </Box>\n                  \n                  {errorInfo && (\n                    <Box>\n                      <Typography variant=\"subtitle2\" color=\"error\" gutterBottom>\n                        <CodeIcon fontSize=\"small\" sx={{ mr: 1, verticalAlign: 'middle' }} />\n                        Stack Trace:\n                      </Typography>\n                      <Typography variant=\"body2\" component=\"pre\" sx={{ whiteSpace: 'pre-wrap' }}>\n                        {errorInfo.componentStack}\n                      </Typography>\n                    </Box>\n                  )}\n                </Paper>\n              </Collapse>\n            </Box>\n          </Paper>\n        </Box>\n      );\n    }\n    \n    // Si tout va bien, afficher les enfants normalement\n    return children;\n  }\n}\n\nErrorBoundary.propTypes = {\n  children: PropTypes.node.isRequired,\n  fallback: PropTypes.func,\n  onError: PropTypes.func\n};\n\nexport default ErrorBoundary;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}