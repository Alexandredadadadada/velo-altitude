"use strict";(self.webpackChunkgrand_est_cyclisme_client=self.webpackChunkgrand_est_cyclisme_client||[]).push([[3802],{22574:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ke});var l=a(65043),r=a(96446),i=a(81637),s=a(85865),n=a(26240),o=a(30344),c=a(88312),d=a(19252),u=a(8939),h=a(24056),m=a(42518),g=a(94109),p=a(17392),f=a(68903),x=a(63336),y=a(26494),j=a(39336),v=a(14194),A=a(33691),b=a(18483),C=a(24010),S=a(48985),w=a(21665),z=a(34190),P=a(33438),I=a(79484),k=a(8737),D=a(16662),F=a(85271),E=a(46256),W=(a(23461),a(94507)),T=a(12110),_=a(2828),R=a(43845),L=a(91082),$=a(94271),M=a(78221),O=a(59540),Q=a(28267),N=a(15244),B=a(9634),q=(a(81580),a(70579));const J=e=>{let{col:t,isSelected:a,onClick:l,isFavorite:i,onToggleFavorite:d}=e;const u=(0,n.A)(),h=(0,o.A)(u.breakpoints.down("sm")),m=(0,o.A)(u.breakpoints.between("sm","md")),g=()=>h?100:m?110:120,p=e=>{e.stopPropagation(),d&&d(t.id)};return(0,q.jsx)(T.A,{elevation:a?3:1,sx:{mb:2,border:a?"2px solid #1976d2":"none",transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-4px)",boxShadow:4},position:"relative"},role:"article","aria-label":`Col ${t.name}, altitude ${t.elevation} m\xe8tres, difficult\xe9 ${t.difficulty}`,children:(0,q.jsx)(_.A,{onClick:l,"aria-pressed":a,children:(0,q.jsxs)(f.Ay,{container:!0,children:[(0,q.jsx)(f.Ay,{item:!0,xs:5,sm:4,md:4,sx:{position:"relative",height:g()},children:(0,q.jsxs)(r.A,{sx:{height:"100%",width:"100%",position:"relative",overflow:"hidden"},children:[(0,q.jsx)(B.LazyLoadImage,{src:t.imageUrl||"/images/cols/default-col.jpg",alt:`Vue du col ${t.name}`,effect:"blur",height:g(),width:"100%",style:{objectFit:"cover",objectPosition:"center",position:"absolute",top:0,left:0},placeholder:(0,q.jsx)(c.A,{variant:"rectangular",width:"100%",height:g(),animation:"wave"})}),t.category&&(0,q.jsx)(r.A,{className:(e=>{switch(e){case"HC":return"category-hc";case"1":return"category-1";case"2":return"category-2";case"3":return"category-3";case"4":return"category-4";default:return""}})(t.category),sx:{position:"absolute",top:8,left:8,bgcolor:"rgba(0, 0, 0, 0.7)",color:"white",borderRadius:"50%",width:28,height:28,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:h?"0.7rem":"0.8rem",zIndex:1},"aria-label":`Cat\xe9gorie ${t.category}`,children:t.category})]})}),(0,q.jsx)(f.Ay,{item:!0,xs:7,sm:8,md:8,children:(0,q.jsxs)(y.A,{sx:{pb:"12px !important",pt:h?1:2,px:h?1.5:2},children:[(0,q.jsx)(s.A,{variant:h?"subtitle1":"h6",component:"h3",noWrap:!0,sx:{fontWeight:a?600:500,fontSize:h?"0.9rem":void 0},children:t.name}),(0,q.jsxs)(r.A,{display:"flex",alignItems:"center",mt:h?.5:1,sx:{flexWrap:h?"wrap":"nowrap"},children:[(0,q.jsx)(L.A,{fontSize:"small",color:"action",sx:{mr:.5,fontSize:h?"0.9rem":"1rem"}}),(0,q.jsx)(s.A,{variant:"body2",color:"text.secondary",sx:{fontSize:h?"0.75rem":"0.875rem"},noWrap:!0,children:t.region||"R\xe9gion non sp\xe9cifi\xe9e"})]}),(0,q.jsxs)(r.A,{display:"flex",alignItems:"center",mt:.5,flexWrap:h?"wrap":"nowrap",children:[(0,q.jsxs)(r.A,{display:"flex",alignItems:"center",mr:1,children:[(0,q.jsx)($.A,{fontSize:"small",color:"action",sx:{mr:.5,fontSize:h?"0.9rem":"1rem"}}),(0,q.jsxs)(s.A,{variant:"body2",color:"text.secondary",sx:{fontSize:h?"0.75rem":"0.875rem"},children:[t.elevation," m"]})]}),t.length&&(0,q.jsxs)(r.A,{display:"flex",alignItems:"center",mr:1,children:[(0,q.jsx)(M.A,{fontSize:"small",color:"action",sx:{mr:.5,fontSize:h?"0.9rem":"1rem",ml:h?0:1}}),(0,q.jsxs)(s.A,{variant:"body2",color:"text.secondary",sx:{fontSize:h?"0.75rem":"0.875rem"},children:[t.length," km"]})]})]}),t.gradient&&(0,q.jsxs)(r.A,{display:"flex",alignItems:"center",mt:.5,children:[(0,q.jsx)(O.A,{fontSize:"small",color:"action",sx:{mr:.5,fontSize:h?"0.9rem":"1rem"}}),(0,q.jsxs)(s.A,{variant:"body2",color:"text.secondary",sx:{fontSize:h?"0.75rem":"0.875rem"},children:[t.gradient,"% moyen"]})]}),(0,q.jsxs)(r.A,{display:"flex",flexWrap:"wrap",mt:h?.5:1,gap:.5,sx:{alignItems:"center"},children:[(0,q.jsx)(R.A,{size:"small",label:t.difficulty,color:(e=>{switch(e.toLowerCase()){case"difficile":case"hard":return"error";case"mod\xe9r\xe9":case"moyen":case"medium":return"warning";case"facile":case"easy":return"success";default:return"info"}})(t.difficulty),sx:{height:h?22:24,"& .MuiChip-label":{fontSize:h?"0.65rem":"0.75rem",px:h?.8:1}}}),t.recommended&&(0,q.jsx)(R.A,{size:"small",icon:(0,q.jsx)(Q.A,{sx:{fontSize:h?"0.9rem":"1rem"}}),label:"Recommand\xe9",color:"primary",variant:"outlined",sx:{height:h?22:24,"& .MuiChip-label":{fontSize:h?"0.65rem":"0.75rem",px:h?.8:1}}}),d&&(0,q.jsx)(r.A,{onClick:p,sx:{ml:"auto",mr:.5,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",padding:"4px",borderRadius:"50%","&:hover":{bgcolor:"rgba(0, 0, 0, 0.04)"}},role:"button","aria-label":i?"Retirer des favoris":"Ajouter aux favoris","aria-pressed":i,tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),p(e))},children:(0,q.jsx)(N.A,{color:i?"error":"action",fontSize:"small",sx:{fontSize:h?"1.1rem":"1.2rem",transition:"color 0.3s ease, transform 0.2s ease",transform:i?"scale(1.1)":"scale(1)"}})})]})]})})]})})})};J.defaultProps={isSelected:!1,isFavorite:!1,onToggleFavorite:null};const H=(0,l.memo)(J);var G=a(67784),V=a(51787),U=a(88911),Y=a(53193),Z=a(79190),K=a(69285),X=a(32143),ee=a(99070),te=a(69413),ae=a(74605),le=a(51962),re=a(30079),ie=a(75456),se=a(52101),ne=a(58293),oe=a(51214),ce=a(80682);const de=["Vosges","Jura","Alpes","Massif Central","Pyr\xe9n\xe9es"],ue=["Facile","Mod\xe9r\xe9","Difficile"],he=["Asphalte","Gravier","Mixte"],me=["1","2","3","4","5"],ge=["Printemps","\xc9t\xe9","Automne","Hiver"],pe=(0,l.memo)((e=>{let{searchTerm:t,filterRegion:a,filterDifficulty:i,filterElevation:o,filtersOpen:c,filterSurface:d=[],filterTechnicalDifficulty:u="",filterSeasons:h=[],onSearchChange:g,onRegionChange:f,onDifficultyChange:y,onElevationChange:v,onFiltersOpenChange:A,onResetFilters:C,onSurfaceChange:S,onTechnicalDifficultyChange:w,onSeasonsChange:P,isMobile:k=!1}=e;const[D,F]=(0,l.useState)(!1),E=((0,n.A)(),a||i||o[0]>0||o[1]<3e3||d.length>0||u||h.length>0),W=(0,l.useCallback)((e=>{g(e.target.value)}),[g]),T=(0,l.useCallback)((e=>{f(e.target.value)}),[f]),_=(0,l.useCallback)((e=>{y(e.target.value)}),[y]),L=(0,l.useCallback)(((e,t)=>{v(t)}),[v]),M=(0,l.useCallback)((()=>{C()}),[C]),O=(0,l.useCallback)((e=>{const t=[...d],a=t.indexOf(e);-1===a?t.push(e):t.splice(a,1),S(t)}),[d,S]),Q=(0,l.useCallback)((e=>{w(e.target.value)}),[w]),N=(0,l.useCallback)((e=>{const t=[...h],a=t.indexOf(e);-1===a?t.push(e):t.splice(a,1),P(t)}),[h,P]),B=(0,l.useCallback)((()=>{F((e=>!e))}),[]),J={p:k?1.5:2,mb:k?2:3,borderRadius:"8px"};return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(x.A,{elevation:2,sx:J,"aria-label":"Recherche de cols",children:(0,q.jsx)(G.A,{fullWidth:!0,placeholder:"Rechercher un col...",value:t,onChange:W,InputProps:{startAdornment:(0,q.jsx)(V.A,{position:"start",children:(0,q.jsx)(I.A,{})}),endAdornment:t&&(0,q.jsx)(V.A,{position:"end",children:(0,q.jsx)(p.A,{size:"small",onClick:()=>g(""),edge:"end","aria-label":"Effacer la recherche",children:(0,q.jsx)(re.A,{fontSize:"small"})})})},variant:"outlined",size:k?"small":"medium","aria-label":"Rechercher par nom ou r\xe9gion"})}),(0,q.jsxs)(x.A,{elevation:2,sx:J,"aria-label":"Filtres des cols",children:[(0,q.jsxs)(r.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:k?1:2,children:[(0,q.jsxs)(r.A,{display:"flex",alignItems:"center",children:[(0,q.jsx)(z.A,{sx:{verticalAlign:"middle",mr:1,fontSize:k?"1.2rem":"1.5rem"}}),(0,q.jsx)(s.A,{variant:k?"subtitle1":"h6",component:"h2",children:"Filtres"}),E&&(0,q.jsx)(R.A,{size:"small",color:"primary",label:"Actifs",sx:{ml:1},"aria-label":"Filtres actifs"})]}),(0,q.jsx)(m.A,{size:"small",onClick:M,startIcon:(0,q.jsx)(re.A,{}),"aria-label":"R\xe9initialiser tous les filtres",disabled:!E,children:k?"Reset":"R\xe9initialiser"})]}),(0,q.jsx)(j.A,{sx:{mb:k?1.5:2}}),(0,q.jsxs)(U.A,{spacing:k?2:3,children:[(0,q.jsxs)(Y.A,{fullWidth:!0,size:k?"small":"medium",children:[(0,q.jsx)(Z.A,{id:"region-label",children:"R\xe9gion"}),(0,q.jsxs)(K.A,{labelId:"region-label",value:a,label:"R\xe9gion",onChange:T,"aria-label":"Filtrer par r\xe9gion",children:[(0,q.jsx)(X.A,{value:"",children:"Toutes les r\xe9gions"}),de.map((e=>(0,q.jsx)(X.A,{value:e,children:e},e)))]})]}),(0,q.jsxs)(Y.A,{fullWidth:!0,size:k?"small":"medium",children:[(0,q.jsx)(Z.A,{id:"difficulty-label",children:"Difficult\xe9"}),(0,q.jsxs)(K.A,{labelId:"difficulty-label",value:i,label:"Difficult\xe9",onChange:_,"aria-label":"Filtrer par difficult\xe9",children:[(0,q.jsx)(X.A,{value:"",children:"Toutes les difficult\xe9s"}),ue.map((e=>(0,q.jsx)(X.A,{value:e,children:e},e)))]})]}),(0,q.jsxs)(r.A,{children:[(0,q.jsxs)(r.A,{display:"flex",alignItems:"center",children:[(0,q.jsx)(s.A,{gutterBottom:!0,variant:k?"body2":"body1",children:"Altitude (m)"}),(0,q.jsx)(b.A,{title:"Filtrer les cols par plage d'altitude",children:(0,q.jsx)(p.A,{size:"small",sx:{ml:.5},"aria-label":"Info sur l'altitude",children:(0,q.jsx)(ie.A,{fontSize:"small"})})})]}),(0,q.jsx)(ee.Ay,{value:o,onChange:L,valueLabelDisplay:"auto",min:0,max:3e3,step:100,"aria-label":"Filtrer par altitude",size:k?"small":"medium"}),(0,q.jsxs)(r.A,{display:"flex",justifyContent:"space-between",children:[(0,q.jsxs)(s.A,{variant:"body2",color:"text.secondary",children:[o[0]," m"]}),(0,q.jsxs)(s.A,{variant:"body2",color:"text.secondary",children:[o[1]," m"]})]})]}),(0,q.jsx)(m.A,{variant:"text",color:"primary",onClick:B,endIcon:D?(0,q.jsx)(se.A,{}):(0,q.jsx)(ne.A,{}),sx:{alignSelf:"flex-start"},"aria-expanded":D,"aria-controls":"advanced-filters",children:k?D?"Masquer avanc\xe9s":"Filtres avanc\xe9s":D?"Masquer les filtres avanc\xe9s":"Afficher les filtres avanc\xe9s"}),D&&(0,q.jsxs)(r.A,{mt:2,id:"advanced-filters",role:"region","aria-label":"Filtres avanc\xe9s",children:[(0,q.jsx)(j.A,{sx:{mb:k?1.5:2}}),(0,q.jsxs)(U.A,{spacing:k?2:3,children:[(0,q.jsxs)(Y.A,{fullWidth:!0,size:k?"small":"medium",children:[(0,q.jsx)(Z.A,{id:"category-label",children:"Cat\xe9gorie"}),(0,q.jsxs)(K.A,{labelId:"category-label",value:"",label:"Cat\xe9gorie","aria-label":"Filtrer par cat\xe9gorie",children:[(0,q.jsx)(X.A,{value:"",children:"Toutes les cat\xe9gories"}),(0,q.jsx)(X.A,{value:"HC",children:"Hors Cat\xe9gorie"}),(0,q.jsx)(X.A,{value:"1",children:"Cat\xe9gorie 1"}),(0,q.jsx)(X.A,{value:"2",children:"Cat\xe9gorie 2"}),(0,q.jsx)(X.A,{value:"3",children:"Cat\xe9gorie 3"}),(0,q.jsx)(X.A,{value:"4",children:"Cat\xe9gorie 4"})]})]}),(0,q.jsxs)(r.A,{children:[(0,q.jsx)(s.A,{gutterBottom:!0,variant:k?"body2":"body1",children:"Longueur (km)"}),(0,q.jsx)(ee.Ay,{value:[0,30],valueLabelDisplay:"auto",min:0,max:30,step:1,size:k?"small":"medium","aria-label":"Filtrer par longueur"})]}),(0,q.jsxs)(r.A,{children:[(0,q.jsx)(s.A,{gutterBottom:!0,variant:k?"body2":"body1",children:"Pente moyenne (%)"}),(0,q.jsx)(ee.Ay,{value:[0,15],valueLabelDisplay:"auto",min:0,max:15,step:.5,size:k?"small":"medium","aria-label":"Filtrer par pente moyenne"})]}),(0,q.jsxs)(r.A,{children:[(0,q.jsxs)(s.A,{gutterBottom:!0,variant:k?"body2":"body1",sx:{display:"flex",alignItems:"center"},children:[(0,q.jsx)($.A,{sx:{mr:1,fontSize:k?"1rem":"1.25rem"}}),"Type de surface"]}),(0,q.jsx)(te.A,{row:!0,children:he.map((e=>(0,q.jsx)(ae.A,{control:(0,q.jsx)(le.A,{checked:d.includes(e),onChange:()=>O(e),size:k?"small":"medium"}),label:e},e)))})]}),(0,q.jsxs)(Y.A,{fullWidth:!0,size:k?"small":"medium",children:[(0,q.jsx)(Z.A,{id:"technical-difficulty-label",children:"Difficult\xe9 technique"}),(0,q.jsxs)(K.A,{labelId:"technical-difficulty-label",value:u,onChange:Q,label:"Difficult\xe9 technique","aria-label":"Filtrer par difficult\xe9 technique",children:[(0,q.jsx)(X.A,{value:"",children:"Toutes"}),me.map((e=>(0,q.jsx)(X.A,{value:e,children:"1"===e?"1 - Facile":"2"===e?"2 - Simple":"3"===e?"3 - Mod\xe9r\xe9e":"4"===e?"4 - Difficile":"5 - Tr\xe8s difficile"},e)))]})]}),(0,q.jsxs)(r.A,{children:[(0,q.jsxs)(s.A,{gutterBottom:!0,variant:k?"body2":"body1",sx:{display:"flex",alignItems:"center"},children:[(0,q.jsx)(oe.A,{sx:{mr:1,fontSize:k?"1rem":"1.25rem"}}),"Saisons recommand\xe9es"]}),(0,q.jsx)(r.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:ge.map((e=>(0,q.jsx)(R.A,{label:e,onClick:()=>N(e),color:h.includes(e)?"primary":"default",variant:h.includes(e)?"filled":"outlined",size:k?"small":"medium",icon:"\xc9t\xe9"===e?(0,q.jsx)(ce.A,{}):void 0},e)))})]})]})]})]})]})]})}));var fe=a(68713),xe=a(59720),ye=a(86213);const je=36e5,ve="grand-est-cyclisme:weather-cache",Ae={data:new Map,init(){try{const e=localStorage.getItem(ve);if(e){const t=JSON.parse(e);this.data=new Map,Object.keys(t).forEach((e=>{this.data.set(e,t[e])})),console.log(`[WeatherCache] Chargement du cache depuis localStorage: ${this.data.size} entr\xe9es`),this.purgeExpiredEntries()}}catch(e){console.error("[WeatherCache] Erreur lors du chargement du cache:",e),this.data=new Map}setInterval((()=>this.purgeExpiredEntries()),36e5)},saveToLocalStorage(){try{const e={};this.data.forEach(((t,a)=>{e[a]=t})),localStorage.setItem(ve,JSON.stringify(e)),console.log(`[WeatherCache] Cache sauvegard\xe9 dans localStorage: ${this.data.size} entr\xe9es`)}catch(e){console.error("[WeatherCache] Erreur lors de la sauvegarde du cache:",e)}},purgeExpiredEntries(){const e=Date.now();let t=0;return this.data.forEach(((a,l)=>{e-a.timestamp>864e5&&(this.data.delete(l),t++)})),t>0&&(console.log(`[WeatherCache] Purge automatique: ${t} entr\xe9es supprim\xe9es`),this.saveToLocalStorage()),t},async getWeatherData(e,t,a){const l=`${e},${t}`,r=this.data.get(l);if(r&&Date.now()-r.timestamp<je)return console.log(`[WeatherCache] \u2705 Utilisation des donn\xe9es m\xe9t\xe9o en cache pour ${l}`),r.data;try{console.log(`[WeatherCache] \ud83d\udd04 R\xe9cup\xe9ration de nouvelles donn\xe9es m\xe9t\xe9o pour ${l}`);const r=await a(e,t);return this.data.set(l,{data:r,timestamp:Date.now()}),this.saveToLocalStorage(),r}catch(i){return console.error(`[WeatherCache] \u274c Erreur lors de la r\xe9cup\xe9ration des donn\xe9es m\xe9t\xe9o pour ${l}:`,i),r?(console.log(`[WeatherCache] \u26a0\ufe0f Utilisation des donn\xe9es en cache expir\xe9es pour ${l}`),r.data):(console.log(`[WeatherCache] \u26a0\ufe0f Utilisation des donn\xe9es m\xe9t\xe9o par d\xe9faut pour ${l}`),this.getDefaultWeatherData())}},getDefaultWeatherData:()=>({current:{temp:15,weather:[{main:"Clouds",description:"Information m\xe9t\xe9o non disponible",icon:"unknown"}],humidity:50,wind_speed:10,visibility:1e4,pressure:1013},daily:Array(5).fill().map(((e,t)=>({dt:Date.now()/1e3+86400*t,temp:{min:10,max:20},weather:[{main:"Clouds",description:"Information pr\xe9vision non disponible",icon:"unknown"}]})))}),clearCache(){this.data.clear(),localStorage.removeItem(ve),console.log("[WeatherCache] \ud83e\uddf9 Cache enti\xe8rement vid\xe9")},getStats(){const e=Date.now();let t=0,a=0;return this.data.forEach((l=>{e-l.timestamp<je?t++:a++})),{totalEntries:this.data.size,validEntries:t,expiredEntries:a,oldestEntryAge:this.getOldestEntryAge()}},getOldestEntryAge(){let e=Date.now();return this.data.forEach((t=>{t.timestamp<e&&(e=t.timestamp)})),Math.round((Date.now()-e)/6e4)}};Ae.init();const be=Ae,Ce=[{id:"col_ballon_alsace",name:"Col du Ballon d'Alsace",lat:47.8239,lng:6.8368,elevation:1178,category:"col",region:"vosges",popularity:9.5},{id:"col_schlucht",name:"Col de la Schlucht",lat:48.0556,lng:7.0067,elevation:1139,category:"col",region:"vosges",popularity:9.8},{id:"grand_ballon",name:"Grand Ballon",lat:47.9017,lng:7.0983,elevation:1424,category:"col",region:"vosges",popularity:10},{id:"col_platzerwasel",name:"Col du Platzerwasel",lat:47.932,lng:7.0486,elevation:1182,category:"col",region:"vosges",popularity:8.2},{id:"col_bonhomme",name:"Col du Bonhomme",lat:48.1769,lng:7.0981,elevation:949,category:"col",region:"vosges",popularity:8.5},{id:"petit_ballon",name:"Petit Ballon",lat:47.9153,lng:7.1467,elevation:1272,category:"col",region:"vosges",popularity:8.8},{id:"col_firstplan",name:"Col du Firstplan",lat:47.9333,lng:7.1167,elevation:722,category:"col",region:"vosges",popularity:7.5},{id:"col_hundsruck",name:"Col du Hundsruck",lat:47.9897,lng:7.0731,elevation:748,category:"col",region:"vosges",popularity:7.2},{id:"city_strasbourg",name:"Strasbourg",lat:48.5734,lng:7.7521,category:"city",region:"alsace",popularity:9.5},{id:"city_colmar",name:"Colmar",lat:48.0794,lng:7.358,category:"city",region:"alsace",popularity:8.9},{id:"city_mulhouse",name:"Mulhouse",lat:47.7515,lng:7.3399,category:"city",region:"alsace",popularity:8.2},{id:"city_metz",name:"Metz",lat:49.1193,lng:6.1757,category:"city",region:"lorraine",popularity:8.7},{id:"city_nancy",name:"Nancy",lat:48.6921,lng:6.1844,category:"city",region:"lorraine",popularity:8.8},{id:"city_gerardmer",name:"G\xe9rardmer",lat:48.0743,lng:6.8726,category:"city",region:"vosges",popularity:8.6},{id:"lake_gerardmer",name:"Lac de G\xe9rardmer",lat:48.0663,lng:6.8532,category:"lake",region:"vosges",popularity:8.3},{id:"lake_longemer",name:"Lac de Longemer",lat:48.0651,lng:6.9484,category:"lake",region:"vosges",popularity:7.8},{id:"lake_retournemer",name:"Lac de Retournemer",lat:48.0583,lng:6.9737,category:"lake",region:"vosges",popularity:7.5},{id:"route_start_route_des_cretes",name:"D\xe9part Route des Cr\xeates",lat:47.9965,lng:7.0072,category:"route_start",region:"vosges",popularity:9.6},{id:"route_start_route_des_vins",name:"D\xe9part Route des Vins",lat:47.9112,lng:7.2356,category:"route_start",region:"alsace",popularity:9.2},{id:"route_start_grand_est_tour",name:"D\xe9part Grand Est Tour",lat:48.5823,lng:7.7505,category:"route_start",region:"alsace",popularity:8.7}];const Se=new class{constructor(){this.isInitialized=!1,this.isPreloading=!1,this.preloadQueue=[],this.preloadInterval=null,this.syncInProgress=!1,this.stats={totalPreloaded:0,lastPreloadTime:null,successCount:0,errorCount:0}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isInitialized)return;this.options={preloadPopularOnStart:!0,preloadInterval:18e5,concurrentPreloads:2,enableSync:!0,...e},this.isInitialized=!0,console.log("[WeatherPreloader] \u26a1 Pr\xe9chargeur de donn\xe9es m\xe9t\xe9o initialis\xe9"),this.options.preloadPopularOnStart&&this.preloadPopularLocations(),this.options.enableSync&&this.options.preloadInterval>0&&(this.preloadInterval=setInterval((()=>{this.preloadPopularLocations()}),this.options.preloadInterval),console.log(`[WeatherPreloader] \ud83d\udd04 Synchronisation planifi\xe9e toutes les ${this.options.preloadInterval/6e4} minutes`))}async preloadPopularLocations(){if(this.syncInProgress)console.log("[WeatherPreloader] \u23f3 Synchronisation d\xe9j\xe0 en cours");else{this.syncInProgress=!0,console.log("[WeatherPreloader] \ud83d\udd04 D\xe9marrage de la synchronisation des donn\xe9es m\xe9t\xe9o");try{this.preloadQueue=[...Ce],this.shuffleQueue(),await this.startPreloading(),this.stats.lastPreloadTime=new Date,console.log(`[WeatherPreloader] \u2705 Synchronisation termin\xe9e avec ${this.stats.successCount} succ\xe8s et ${this.stats.errorCount} erreurs`)}catch(e){console.error("[WeatherPreloader] \u274c Erreur lors de la synchronisation:",e)}finally{this.syncInProgress=!1}}}async preloadLocation(e){if(e&&e.lat&&e.lng)try{console.log(`[WeatherPreloader] \ud83d\udd0d Pr\xe9chargement des donn\xe9es m\xe9t\xe9o pour ${e.name||"lieu inconnu"}`);const t=await ye.A.get(`/api/weather/current?lat=${e.lat}&lon=${e.lng}`);be.getWeatherData(e.lat.toString(),e.lng.toString(),(async()=>t.data));const a=await ye.A.get(`/api/weather/forecast?lat=${e.lat}&lon=${e.lng}`);return be.getWeatherData(`forecast_${e.lat}`,`forecast_${e.lng}`,(async()=>a.data)),this.stats.successCount++,this.stats.totalPreloaded++,!0}catch(t){return console.error(`[WeatherPreloader] \u274c Erreur lors du pr\xe9chargement pour ${e.name||"lieu inconnu"}:`,t),this.stats.errorCount++,!1}else console.error("[WeatherPreloader] \u274c Donn\xe9es de localisation invalides")}async startPreloading(){this.isPreloading=!0,this.stats.successCount=0,this.stats.errorCount=0;const e=this.options.concurrentPreloads||2,t=[];for(let a=0;a<e&&this.preloadQueue.length>0;a++)t.push(this.processPreloadQueue());await Promise.all(t),this.isPreloading=!1}async processPreloadQueue(){for(;this.preloadQueue.length>0;){const e=this.preloadQueue.shift();await this.preloadLocation(e),await new Promise((e=>setTimeout(e,500)))}}shuffleQueue(){for(let e=this.preloadQueue.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[this.preloadQueue[e],this.preloadQueue[t]]=[this.preloadQueue[t],this.preloadQueue[e]]}}addToPreloadQueue(e){e&&e.lat&&e.lng&&(this.preloadQueue.push(e),this.isPreloading||this.syncInProgress||this.startPreloading())}shutdown(){this.preloadInterval&&clearInterval(this.preloadInterval),this.isInitialized=!1,this.preloadQueue=[],console.log("[WeatherPreloader] \ud83d\uded1 Pr\xe9chargeur de donn\xe9es m\xe9t\xe9o arr\xeat\xe9")}getStats(){return{...this.stats,queueLength:this.preloadQueue.length,isPreloading:this.isPreloading,isSyncing:this.syncInProgress}}},we=()=>{const[e,t]=(0,l.useState)([]),[a,r]=(0,l.useState)(!0),[i,s]=(0,l.useState)(null),[n,o]=(0,l.useState)(null),[c,d]=(0,l.useState)(""),[u,h]=(0,l.useState)(""),[m,g]=(0,l.useState)(""),[p,f]=(0,l.useState)([0,3e3]),[x,y]=(0,l.useState)([]),[j,v]=(0,l.useState)(""),[A,b]=(0,l.useState)([]),[C,S]=(0,l.useState)(!1),[w,z]=(0,l.useState)(1),[P,I]=((e,t)=>{const[a,r]=(0,l.useState)((()=>{try{const a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(i){return console.error(`Erreur lors de la r\xe9cup\xe9ration de ${e} du localStorage:`,i),t}}));return(0,l.useEffect)((()=>{const t=t=>{if(t.key===e)try{const e=JSON.parse(t.newValue);JSON.stringify(e)!==JSON.stringify(a)&&r(e)}catch(l){console.error("Erreur lors de la synchronisation du localStorage:",l)}};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}}),[e,a]),[a,t=>{try{const l=t instanceof Function?t(a):t;r(l),window.localStorage.setItem(e,JSON.stringify(l)),window.dispatchEvent(new Event("local-storage-update"))}catch(i){console.error(`Erreur lors de la sauvegarde de ${e} dans localStorage:`,i)}}]})("colFavorites",[]),k=(0,D.zy)(),F=(0,D.Zp)(),E=(0,l.useCallback)((()=>k.pathname.includes("/seven-majors")?"seven-majors":"explorer"),[k.pathname]),W=(0,l.useMemo)((()=>E()),[E]),T=(0,l.useCallback)((async()=>{try{r(!0);const e={region:u||void 0,difficulty:m||void 0,minElevation:p[0]||void 0,maxElevation:p[1]||void 0,surface:x.length>0?x:void 0,technicalDifficulty:j||void 0,seasons:A.length>0?A:void 0},a=await xe.A.getAllCols(e);t(a),a.length>0&&!n&&(o(a[0].id),a[0].latitude&&a[0].longitude&&Se.addToPreloadQueue({lat:a[0].latitude,lng:a[0].longitude,name:a[0].name})),s(null)}catch(e){console.error("Erreur lors du chargement des cols:",e),s("Impossible de charger la liste des cols. Veuillez r\xe9essayer plus tard.")}finally{r(!1)}}),[u,m,p,x,j,A,n]);(0,l.useEffect)((()=>{const e=setTimeout((()=>{T()}),300);return()=>clearTimeout(e)}),[T]);const _=(0,l.useMemo)((()=>e.filter((e=>{if(!c.trim())return!0;const t=c.toLowerCase();return e.name.toLowerCase().includes(t)||e.region&&e.region.toLowerCase().includes(t)||e.location&&e.location.toLowerCase().includes(t)}))),[e,c]),R=(0,l.useMemo)((()=>{const e=10*(w-1),t=e+10;return _.slice(e,t)}),[_,w,10]),L=(0,l.useMemo)((()=>Math.ceil(_.length/10)),[_.length,10]);(0,l.useEffect)((()=>{z(1)}),[c,u,m,p,x,j,A]);const $=(0,l.useCallback)((t=>{o(t);const a=e.find((e=>e.id===t));a&&a.latitude&&a.longitude&&Se.addToPreloadQueue({lat:a.latitude,lng:a.longitude,name:a.name})}),[e]),M=(0,l.useCallback)((e=>{I((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}),[I]),O=(0,l.useCallback)((()=>{d(""),h(""),g(""),f([0,3e3]),y([]),v(""),b([])}),[]),Q=(0,l.useCallback)((e=>{"explorer"===e?F("/cols"):"seven-majors"===e&&F("/cols/seven-majors")}),[F]);return{cols:e,loading:a,error:i,selectedColId:n,searchTerm:c,filterRegion:u,filterDifficulty:m,filterElevation:p,filterSurface:x,filterTechnicalDifficulty:j,filterSeasons:A,filtersOpen:C,page:w,activeSection:W,filteredCols:_,paginatedCols:R,pageCount:L,favorites:P,toggleFavorite:M,setSearchTerm:d,setFilterRegion:h,setFilterDifficulty:g,setFilterElevation:f,setFilterSurface:y,setFilterTechnicalDifficulty:v,setFilterSeasons:b,setFiltersOpen:S,setPage:z,handleColSelect:$,resetFilters:O,navigateToSection:Q}},ze=(0,l.lazy)((()=>Promise.all([a.e(4909),a.e(6377),a.e(794),a.e(2738),a.e(2408),a.e(5918),a.e(2696)]).then(a.bind(a,82696)))),Pe=()=>(0,q.jsxs)(r.A,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",py:8,children:[(0,q.jsx)(i.A,{size:48}),(0,q.jsx)(s.A,{variant:"h6",sx:{mt:2},children:"Chargement du d\xe9fi Les 7 Majeurs..."})]}),Ie=()=>{const{loading:e,error:t,selectedColId:a,searchTerm:T,filterRegion:_,filterDifficulty:R,filterElevation:L,filterSurface:$,filterTechnicalDifficulty:M,filterSeasons:O,filtersOpen:Q,page:N,activeSection:B,paginatedCols:J,pageCount:G,filteredCols:V,favorites:U,toggleFavorite:Y,setSearchTerm:Z,setFilterRegion:K,setFilterDifficulty:X,setFilterElevation:ee,setFilterSurface:te,setFilterTechnicalDifficulty:ae,setFilterSeasons:le,setFiltersOpen:re,setPage:ie,handleColSelect:se,resetFilters:ne,navigateToSection:oe}=we(),ce=(0,n.A)(),de=(0,o.A)(ce.breakpoints.down("sm")),[ue,he]=((0,o.A)(ce.breakpoints.down("md")),(0,D.zy)(),(0,l.useState)(!1)),[me,ge]=(0,l.useState)(!1),xe=(0,l.useMemo)((()=>"seven-majors"===B?"Les 7 Majeurs - D\xe9fi Cycliste":"Explorez les Cols Cyclistes"),[B]),ye=(0,l.useCallback)((()=>{window.scrollY>300?he(!0):he(!1)}),[]);l.useEffect((()=>(window.addEventListener("scroll",ye,{passive:!0}),()=>window.removeEventListener("scroll",ye))),[ye]);const je=()=>{ge(!me)},ve=l.memo((e=>{let{index:t,style:a,data:l}=e;const r=l.items[t];return r?(0,q.jsx)("div",{style:{...a,paddingRight:16,paddingLeft:16},children:(0,q.jsx)(H,{col:r,isSelected:l.selectedId===r.id,onClick:()=>l.onSelect(r.id),isFavorite:l.favorites.includes(r.id),onToggleFavorite:l.onToggleFavorite})}):(0,q.jsx)("div",{style:a,children:(0,q.jsx)(c.A,{variant:"rectangular",height:120})})})),Ae=de?160:180,be=de?450:600;return(0,q.jsxs)(d.A,{maxWidth:"xl",sx:{pt:2,pb:4},children:[(0,q.jsx)(r.A,{mb:2,role:"navigation","aria-label":"Fil d'Ariane",children:(0,q.jsx)(fe.A,{})}),(0,q.jsx)(s.A,{variant:de?"h5":"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold"},children:xe}),(0,q.jsxs)(u.A,{value:B,onChange:(e,t)=>oe(t),sx:{mb:de?2:4,borderBottom:1,borderColor:"divider","& .MuiTab-root":{fontSize:de?"0.8rem":"inherit",minHeight:de?48:"auto"}},"aria-label":"Sections de l'explorateur de cols",variant:de?"fullWidth":"standard",children:[(0,q.jsx)(h.A,{value:"explorer",label:"Explorateur de Cols",icon:de?null:(0,q.jsx)(S.A,{}),iconPosition:"start",sx:{fontWeight:"explorer"===B?"bold":"normal"},"aria-controls":"explorer"===B?"cols-explorer-content":void 0}),(0,q.jsx)(h.A,{value:"seven-majors",label:"Les 7 Majeurs",icon:de?null:(0,q.jsx)(w.A,{}),iconPosition:"start",sx:{fontWeight:"seven-majors"===B?"bold":"normal"},"aria-controls":"seven-majors"===B?"seven-majors-content":void 0})]}),(0,q.jsxs)(D.BV,{children:[(0,q.jsx)(D.qh,{path:"/",element:(0,q.jsxs)(r.A,{id:"cols-explorer-content",role:"main",children:[de&&(0,q.jsx)(r.A,{sx:{mb:2},children:(0,q.jsx)(m.A,{variant:"outlined",fullWidth:!0,startIcon:(0,q.jsx)(z.A,{}),onClick:je,children:Q?"Masquer les filtres":"Afficher les filtres"})}),de&&(0,q.jsx)(g.Ay,{anchor:"left",open:me,onClose:je,sx:{zIndex:1200},children:(0,q.jsxs)(r.A,{sx:{minWidth:280,maxWidth:"95vw",p:1},children:[(0,q.jsxs)(r.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,q.jsx)(s.A,{variant:"h6",children:"Filtres"}),(0,q.jsx)(p.A,{onClick:je,"aria-label":"Fermer les filtres",children:(0,q.jsx)(P.A,{})})]}),(0,q.jsx)(pe,{searchTerm:T,filterRegion:_,filterDifficulty:R,filterElevation:L,filterSurface:$,filterTechnicalDifficulty:M,filterSeasons:O,filtersOpen:Q,onSearchChange:Z,onRegionChange:K,onDifficultyChange:X,onElevationChange:ee,onSurfaceChange:te,onTechnicalDifficultyChange:ae,onSeasonsChange:le,onFiltersOpenChange:re,onResetFilters:ne,isMobile:!0})]})}),(0,q.jsxs)(f.Ay,{container:!0,spacing:3,children:[(0,q.jsxs)(f.Ay,{item:!0,xs:12,md:4,lg:3,children:[!de&&(0,q.jsx)(pe,{searchTerm:T,filterRegion:_,filterDifficulty:R,filterElevation:L,filterSurface:$,filterTechnicalDifficulty:M,filterSeasons:O,filtersOpen:Q,onSearchChange:Z,onRegionChange:K,onDifficultyChange:X,onElevationChange:ee,onSurfaceChange:te,onTechnicalDifficultyChange:ae,onSeasonsChange:le,onFiltersOpenChange:re,onResetFilters:ne}),(0,q.jsxs)(x.A,{elevation:3,sx:{overflow:"hidden",mt:de?0:3},"aria-label":"Liste des cols",children:[(0,q.jsx)(y.A,{sx:{bgcolor:"background.paper",py:de?1.5:2,px:de?2:3},children:(0,q.jsxs)(r.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,q.jsxs)(s.A,{variant:de?"subtitle1":"h6",children:[(0,q.jsx)(S.A,{sx:{verticalAlign:"middle",mr:1,fontSize:de?"1.2rem":"1.5rem"}}),V.length," cols trouv\xe9s"]}),de&&(0,q.jsx)(p.A,{size:"small",color:"primary",onClick:je,"aria-label":"Filtrer",children:(0,q.jsx)(I.A,{})})]})}),(0,q.jsx)(j.A,{}),e?(0,q.jsx)(r.A,{display:"flex",justifyContent:"center",p:3,children:(0,q.jsx)(i.A,{"aria-label":"Chargement des cols"})}):t?(0,q.jsx)(r.A,{p:3,children:(0,q.jsx)(v.A,{severity:"error",variant:"outlined",children:t})}):(0,q.jsxs)(r.A,{sx:{overflowY:"auto"},children:[0===V.length?(0,q.jsx)(r.A,{p:3,children:(0,q.jsx)(s.A,{align:"center",children:"Aucun col ne correspond \xe0 vos crit\xe8res"})}):(0,q.jsx)(r.A,{height:be,width:"100%",children:(0,q.jsx)(E.Ay,{disableHeight:!0,children:e=>{let{width:t}=e;return(0,q.jsx)(F.Y1,{height:be,width:t,itemCount:J.length,itemSize:Ae,itemData:{items:J,selectedId:a,onSelect:se,favorites:U,onToggleFavorite:Y},overscanCount:3,children:ve})}})}),G>1&&(0,q.jsx)(r.A,{display:"flex",justifyContent:"center",py:2,sx:{borderTop:`1px solid ${ce.palette.divider}`},children:(0,q.jsx)(A.A,{count:G,page:N,onChange:(e,t)=>ie(t),color:"primary",siblingCount:de?0:1,size:de?"small":"medium",showFirstButton:!de,showLastButton:!de,"aria-label":"Pagination des cols"})})]})]})]}),(0,q.jsx)(f.Ay,{item:!0,xs:12,md:8,lg:9,children:(0,q.jsx)(W.default,{colId:a})})]})]})}),(0,q.jsx)(D.qh,{path:"/seven-majors/*",element:(0,q.jsx)(r.A,{id:"seven-majors-content",role:"main",children:(0,q.jsx)(l.Suspense,{fallback:(0,q.jsx)(Pe,{}),children:(0,q.jsx)(ze,{})})})})]}),ue&&(0,q.jsx)(b.A,{title:"Retour en haut",children:(0,q.jsx)(C.A,{color:"primary",size:"small","aria-label":"Retour en haut de la page",sx:{position:"fixed",bottom:16,right:16,zIndex:1e3},onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:(0,q.jsx)(k.A,{})})})]})},ke=l.memo(Ie)},68713:(e,t,a)=>{a.d(t,{A:()=>v});a(65043);var l=a(16662),r=a(22698),i=a(88446),s=a(85865),n=a(33639),o=a(56658),c=a(78415),d=a(6963),u=a(75883),h=a(22536),m=a(37991),g=a(52177),p=a(92577),f=a(45194),x=a(70579);const y={"/":{label:"Accueil",icon:(0,x.jsx)(n.A,{fontSize:"small"})},"/cols":{label:"Cols",icon:(0,x.jsx)(d.A,{fontSize:"small"})},"/training":{label:"Entra\xeenement",icon:(0,x.jsx)(c.A,{fontSize:"small"})},"/nutrition":{label:"Nutrition",icon:(0,x.jsx)(u.A,{fontSize:"small"})},"/routes":{label:"Parcours",icon:(0,x.jsx)(h.A,{fontSize:"small"})},"/social":{label:"Communaut\xe9",icon:(0,x.jsx)(m.A,{fontSize:"small"})},"/profile":{label:"Profil",icon:(0,x.jsx)(g.A,{fontSize:"small"})},"/settings":{label:"Param\xe8tres",icon:(0,x.jsx)(p.A,{fontSize:"small"})},"/error-demo":{label:"D\xe9mo Gestion d'Erreurs",icon:(0,x.jsx)(f.A,{fontSize:"small"})}},j={catalog:{label:"Catalogue"},explorer:{label:"Explorateur"},detail:{label:"D\xe9tails"},stats:{label:"Statistiques"},calendar:{label:"Calendrier"},programs:{label:"Programmes"},planner:{label:"Planificateur"},community:{label:"Communaut\xe9"},achievements:{label:"R\xe9ussites"}},v=()=>{const e=(0,l.zy)().pathname.split("/").filter((e=>e)),t=e=>j[e]?j[e].label:/^\d+$/.test(e)||/^[a-zA-Z0-9\-_]+$/.test(e)?`#${e}`:e.charAt(0).toUpperCase()+e.slice(1).replace(/-/g," ");return(0,x.jsx)("div",{className:"breadcrumbs-container",children:(0,x.jsxs)(r.A,{separator:(0,x.jsx)(o.A,{fontSize:"small"}),"aria-label":"navigation hi\xe9rarchique",children:[(0,x.jsxs)(i.A,{component:l.N_,to:"/",color:"inherit",display:"flex",alignItems:"center",className:"breadcrumb-link",children:[(0,x.jsx)(n.A,{fontSize:"small",style:{marginRight:"4px"}}),"Accueil"]}),e.map(((a,r)=>{const n=(t=>"/"+e.slice(0,t+1).join("/"))(r),o=y[n]||{};return r===e.length-1?(0,x.jsxs)(s.A,{color:"textPrimary",display:"flex",alignItems:"center",className:"breadcrumb-current",children:[o.icon||null,o.label||t(a)]},n):(0,x.jsxs)(i.A,{component:l.N_,to:n,color:"inherit",display:"flex",alignItems:"center",className:"breadcrumb-link",children:[o.icon||null,o.label||t(a)]},n)}))]})})}}}]);
//# sourceMappingURL=3802.a174048f.chunk.js.map