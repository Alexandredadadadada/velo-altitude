"use strict";(self.webpackChunkgrand_est_cyclisme_client=self.webpackChunkgrand_est_cyclisme_client||[]).push([[3848],{33848:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var r=n(65043),i=n(13225),a=n(84063),s=n(38628),o=n(61072),d=n(78602),l=n(29853),c=n(14282),u=n(35919),m=n(5328),p=n(83910),h=n(97929),y=n(74117),v=n(45577),j=n(27338),x=n(18097),g=n(70579);const f=e=>{let{userProfile:t,onSelectWorkout:n,onSaveWorkout:f}=e;const{t:w}=(0,y.Bd)(),{notify:A}=(0,v.hN)(),[N,M]=(0,r.useState)("all"),[b,E]=(0,r.useState)([]),[C,R]=(0,r.useState)([]),[S,D]=(0,r.useState)(null),[L,T]=(0,r.useState)({duration:[0,180],intensity:[0,5],type:"all",difficulty:0}),[I,k]=(0,r.useState)(!0),[H,O]=(0,r.useState)([]);(0,r.useEffect)((()=>{(async()=>{try{k(!0),await new Promise((e=>setTimeout(e,500)));const e=P(t);if(E(e),R(e),t){const e=j.Ay.getTrainingRecommendations(t,[]);O(e)}A.success("Biblioth\xe8que d'entra\xeenements charg\xe9e")}catch(e){console.error("Erreur lors du chargement des entra\xeenements:",e),A.error("Impossible de charger les entra\xeenements",e)}finally{k(!1)}})()}),[t,A]),(0,r.useEffect)((()=>{let e=[...b];"all"!==N&&(e=e.filter((e=>e.type===N))),e=e.filter((e=>e.duration>=L.duration[0]&&e.duration<=L.duration[1])),e=e.filter((e=>e.intensityLevel>=L.intensity[0]&&e.intensityLevel<=L.intensity[1])),L.difficulty>0&&(e=e.filter((e=>e.difficulty===L.difficulty))),R(e)}),[N,L,b]);const P=e=>{if(!e)return _();const t=x.Ay.validateFTP(e.ftp,e),n=e.level||"intermediate";let r=[];return r=[...r,...K(t,n)],r=[...r,...F(t,n)],r=[...r,...z(t,n)],r=[...r,...U(t)],r=[...r,...q(t,n)],"mountain"!==e.preferred_terrain&&"climber"!==e.cyclist_type||(r=[...r,...B(t,n)]),"intermediate"!==n&&"advanced"!==n&&"elite"!==n||(r=[...r,...G(t,n)]),r},_=()=>{const e=200;return[...K(e,"intermediate").slice(0,3),...F(e,"intermediate").slice(0,2),...U(e).slice(0,1),...z(e,"intermediate").slice(0,1)]},K=(e,t)=>{const n={beginner:.65,intermediate:.7,advanced:.75,elite:.75}[t]||.7;return[{id:"endurance-foundation",name:"Fondation d'Endurance",type:j.jt.ENDURANCE,description:"D\xe9veloppez votre endurance a\xe9robie fondamentale avec cette sortie stable en zone 2.",duration:90,intensityLevel:2,difficulty:"beginner"===t?2:1,targetPower:Math.round(e*n),terrain:"flat",intervals:[{type:"warmup",duration:600,power:Math.round(.6*e)},{type:"steady",duration:4200,power:Math.round(e*n)},{type:"cooldown",duration:600,power:Math.round(.5*e)}]},{id:"endurance-builder",name:"Construction d'Endurance",type:j.jt.ENDURANCE,description:"Sortie longue pour d\xe9velopper l'endurance a\xe9robie et la capacit\xe9 \xe0 utiliser les graisses comme carburant.",duration:120,intensityLevel:2,difficulty:"beginner"===t?3:2,targetPower:Math.round(e*n),terrain:"mixed",intervals:[{type:"warmup",duration:900,power:Math.round(.6*e)},{type:"steady",duration:5400,power:Math.round(e*n)},{type:"cooldown",duration:900,power:Math.round(.5*e)}]},{id:"tempo-intervals",name:"Intervalles Tempo",type:j.jt.TEMPO,description:"Alternance entre zone d'endurance et zone tempo pour am\xe9liorer l'\xe9conomie et la tol\xe9rance \xe0 l'acide lactique.",duration:75,intensityLevel:3,difficulty:2,targetPower:Math.round(.85*e),terrain:"mixed",intervals:[{type:"warmup",duration:600,power:Math.round(.6*e)},{type:"steady",duration:900,power:Math.round(.75*e)},{type:"steady",duration:600,power:Math.round(.85*e)},{type:"recovery",duration:300,power:Math.round(.6*e)},{type:"steady",duration:600,power:Math.round(.75*e)},{type:"steady",duration:600,power:Math.round(.85*e)},{type:"recovery",duration:300,power:Math.round(.6*e)},{type:"cooldown",duration:600,power:Math.round(.5*e)}]}]},F=(e,t)=>{const n={beginner:{intensity:.9,intervalDuration:300,sets:3},intermediate:{intensity:.95,intervalDuration:480,sets:3},advanced:{intensity:1,intervalDuration:600,sets:3},elite:{intensity:1.02,intervalDuration:720,sets:3}},r=n[t]||n.intermediate;return[{id:"threshold-classic",name:"Seuil Classique",type:j.jt.THRESHOLD,description:"Intervalles au seuil pour am\xe9liorer votre puissance soutenue et repousser votre seuil lactique.",duration:60,intensityLevel:4,difficulty:"beginner"===t?3:2,targetPower:Math.round(e*r.intensity),terrain:"flat",intervals:[{type:"warmup",duration:600,power:Math.round(.65*e)},{type:"threshold",duration:r.intervalDuration,power:Math.round(e*r.intensity)},{type:"recovery",duration:Math.round(r.intervalDuration/2),power:Math.round(.5*e)},{type:"threshold",duration:r.intervalDuration,power:Math.round(e*r.intensity)},{type:"recovery",duration:Math.round(r.intervalDuration/2),power:Math.round(.5*e)},{type:"threshold",duration:r.intervalDuration,power:Math.round(e*r.intensity)},{type:"cooldown",duration:600,power:Math.round(.5*e)}]},{id:"threshold-progessive",name:"Seuil Progressif",type:j.jt.THRESHOLD,description:"Intervalles au seuil avec intensit\xe9 progressive pour simuler des conditions de course.",duration:75,intensityLevel:4,difficulty:3,targetPower:Math.round(e*r.intensity),terrain:"mixed",intervals:[{type:"warmup",duration:720,power:Math.round(.65*e)},{type:"threshold",duration:240,power:Math.round(.9*e)},{type:"threshold",duration:240,power:Math.round(.95*e)},{type:"threshold",duration:240,power:Math.round(1*e)},{type:"recovery",duration:300,power:Math.round(.5*e)},{type:"threshold",duration:240,power:Math.round(.9*e)},{type:"threshold",duration:240,power:Math.round(.95*e)},{type:"threshold",duration:240,power:Math.round(1*e)},{type:"recovery",duration:300,power:Math.round(.5*e)},{type:"threshold",duration:240,power:Math.round(.9*e)},{type:"threshold",duration:240,power:Math.round(.95*e)},{type:"threshold",duration:240,power:Math.round(1*e)},{type:"cooldown",duration:720,power:Math.round(.5*e)}]}]},z=(e,t)=>[],U=e=>[{id:"active-recovery",name:"R\xe9cup\xe9ration Active",type:j.jt.RECOVERY,description:"Sortie l\xe9g\xe8re pour favoriser la r\xe9cup\xe9ration tout en maintenant le mouvement.",duration:45,intensityLevel:1,difficulty:1,targetPower:Math.round(.55*e),terrain:"flat",intervals:[{type:"warmup",duration:300,power:Math.round(.5*e)},{type:"steady",duration:2100,power:Math.round(.55*e)},{type:"cooldown",duration:300,power:Math.round(.5*e)}]}],q=(e,t)=>[],B=(e,t)=>[],G=(e,t)=>[],V=(e,t)=>{T((n=>({...n,[e]:t})))},Y={[j.jt.ENDURANCE]:h.N6U,[j.jt.TEMPO]:h.gK3,[j.jt.THRESHOLD]:h._gR,[j.jt.VO2MAX]:h.xf,[j.jt.HIIT]:h.gK3,[j.jt.RECOVERY]:h._gR,[j.jt.STRENGTH]:h.VwO,[j.jt.CLIMBING]:h.xdu};return I?(0,g.jsxs)("div",{className:"text-center my-5",children:[(0,g.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,g.jsx)("span",{className:"visually-hidden",children:"Chargement..."})}),(0,g.jsx)("p",{className:"mt-2",children:"Chargement de la biblioth\xe8que d'entra\xeenements..."})]}):(0,g.jsxs)("div",{className:"workout-library",children:[(0,g.jsxs)("div",{className:"heading mb-4",children:[(0,g.jsx)("h2",{children:"Biblioth\xe8que d'Entra\xeenements"}),(0,g.jsx)("p",{className:"text-muted",children:"Explorez notre collection compl\xe8te d'entra\xeenements adapt\xe9s \xe0 votre profil"})]}),H&&H.message&&(0,g.jsxs)(i.A,{variant:"info",className:"mb-4",children:[(0,g.jsx)(i.A.Heading,{children:"Recommandations personnalis\xe9es"}),(0,g.jsx)("p",{children:H.message}),H.focusAreas&&H.focusAreas.length>0&&(0,g.jsxs)("div",{className:"mt-2",children:[(0,g.jsx)("strong",{children:"Domaines \xe0 privil\xe9gier:"}),(0,g.jsx)("div",{className:"d-flex flex-wrap gap-2 mt-1",children:H.focusAreas.map(((e,t)=>(0,g.jsx)(a.A,{bg:"primary",children:e},t)))})]})]}),(0,g.jsx)("div",{className:"filters-container mb-4",children:(0,g.jsxs)(s.A,{children:[(0,g.jsxs)(s.A.Header,{children:[(0,g.jsx)(p.g,{icon:h.mRM,className:"me-2"}),"Filtres"]}),(0,g.jsxs)(s.A.Body,{children:[(0,g.jsxs)(o.A,{children:[(0,g.jsx)(d.A,{md:6,children:(0,g.jsxs)(l.A.Group,{className:"mb-3",children:[(0,g.jsx)(l.A.Label,{children:"Dur\xe9e (minutes)"}),(0,g.jsxs)("div",{className:"d-flex align-items-center",children:[(0,g.jsx)(l.A.Control,{type:"number",min:"0",max:"300",value:L.duration[0],onChange:e=>V("duration",[parseInt(e.target.value)||0,L.duration[1]]),className:"me-2"}),(0,g.jsx)("span",{children:"\xe0"}),(0,g.jsx)(l.A.Control,{type:"number",min:"0",max:"300",value:L.duration[1],onChange:e=>V("duration",[L.duration[0],parseInt(e.target.value)||180]),className:"ms-2"})]})]})}),(0,g.jsx)(d.A,{md:6,children:(0,g.jsxs)(l.A.Group,{className:"mb-3",children:[(0,g.jsx)(l.A.Label,{children:"Niveau d'intensit\xe9 (1-5)"}),(0,g.jsxs)("div",{className:"d-flex align-items-center",children:[(0,g.jsx)(l.A.Control,{type:"number",min:"1",max:"5",value:L.intensity[0],onChange:e=>V("intensity",[parseInt(e.target.value)||1,L.intensity[1]]),className:"me-2"}),(0,g.jsx)("span",{children:"\xe0"}),(0,g.jsx)(l.A.Control,{type:"number",min:"1",max:"5",value:L.intensity[1],onChange:e=>V("intensity",[L.intensity[0],parseInt(e.target.value)||5]),className:"ms-2"})]})]})})]}),(0,g.jsxs)(o.A,{children:[(0,g.jsx)(d.A,{md:6,children:(0,g.jsxs)(l.A.Group,{className:"mb-3",children:[(0,g.jsx)(l.A.Label,{children:"Difficult\xe9"}),(0,g.jsx)("div",{className:"d-flex",children:[0,1,2,3].map((e=>(0,g.jsx)(c.A,{variant:L.difficulty===e?"primary":"outline-primary",className:"me-2",onClick:()=>V("difficulty",e),children:0===e?"Tous":Array(e).fill("\u2605").join("")},e)))})]})}),(0,g.jsx)(d.A,{md:6,className:"d-flex align-items-end",children:(0,g.jsx)(c.A,{variant:"secondary",className:"mb-3",onClick:()=>T({duration:[0,180],intensity:[0,5],type:"all",difficulty:0}),children:"R\xe9initialiser les filtres"})})]})]})]})}),(0,g.jsxs)(u.A,{activeKey:N,onSelect:e=>M(e),className:"mb-4",children:[(0,g.jsx)(m.A,{eventKey:"all",title:"Tous les types"}),(0,g.jsx)(m.A,{eventKey:j.jt.ENDURANCE,title:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(p.g,{icon:h.N6U,className:"me-2"}),w("training.endurance")]})}),(0,g.jsx)(m.A,{eventKey:j.jt.THRESHOLD,title:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(p.g,{icon:h._gR,className:"me-2"}),w("training.threshold")]})}),(0,g.jsx)(m.A,{eventKey:j.jt.HIIT,title:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(p.g,{icon:h.gK3,className:"me-2"}),w("training.hiit")]})}),(0,g.jsx)(m.A,{eventKey:j.jt.RECOVERY,title:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(p.g,{icon:h._gR,className:"me-2"}),w("training.recovery")]})})]}),(0,g.jsx)("div",{className:"workouts-container",children:0===C.length?(0,g.jsx)(i.A,{variant:"warning",children:"Aucun entra\xeenement ne correspond aux crit\xe8res s\xe9lectionn\xe9s. Essayez d'ajuster vos filtres."}):(0,g.jsx)(o.A,{xs:1,md:2,lg:3,className:"g-4",children:C.map((e=>(0,g.jsx)(d.A,{children:(0,g.jsxs)(s.A,{className:"h-100 workout-card "+((null===S||void 0===S?void 0:S.id)===e.id?"border-primary":""),onClick:()=>(e=>{D(e),n&&n(e)})(e),children:[(0,g.jsxs)(s.A.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)(p.g,{icon:Y[e.type]||h.N6U,className:"me-2"}),w(`trainingTypes.${e.type}`)]}),(0,g.jsxs)(a.A,{bg:e.intensityLevel<=2?"success":e.intensityLevel<=3?"info":e.intensityLevel<=4?"warning":"danger",children:["Niveau ",e.intensityLevel]})]}),(0,g.jsxs)(s.A.Body,{children:[(0,g.jsx)(s.A.Title,{children:e.name}),(0,g.jsxs)("div",{className:"mb-2",children:[(0,g.jsx)(p.g,{icon:h.a$,className:"me-2 text-muted"}),(0,g.jsxs)("span",{children:[e.duration," min"]}),(0,g.jsx)("span",{className:"ms-3",children:Array(e.difficulty).fill("\u2605").join("")})]}),(0,g.jsx)(s.A.Text,{children:e.description})]}),(0,g.jsx)(s.A.Footer,{children:(0,g.jsx)(c.A,{variant:(null===S||void 0===S?void 0:S.id)===e.id?"primary":"outline-primary",size:"sm",className:"w-100",children:(null===S||void 0===S?void 0:S.id)===e.id?"S\xe9lectionn\xe9":"S\xe9lectionner"})})]})},e.id)))})}),S&&(0,g.jsx)("div",{className:"selected-workout-actions mt-4 d-flex justify-content-end",children:(0,g.jsxs)(c.A,{variant:"success",onClick:()=>{if(S)try{if(f){f({...S,date:(new Date).toISOString(),userId:null===t||void 0===t?void 0:t.id})&&A.success("Entra\xeenement ajout\xe9 \xe0 votre calendrier")}}catch(e){console.error("Erreur lors de la sauvegarde de l'entra\xeenement:",e),A.error("Impossible de sauvegarder l'entra\xeenement",e)}else A.warning("Aucun entra\xeenement s\xe9lectionn\xe9")},children:[(0,g.jsx)(p.g,{icon:h.yy,className:"me-2"}),"Ajouter \xe0 mon calendrier"]})})]})}}}]);
//# sourceMappingURL=3848.2b8099ee.chunk.js.map