/*! For license information please see 6961.5e729060.chunk.js.LICENSE.txt */
(self.webpackChunkgrand_est_cyclisme_client=self.webpackChunkgrand_est_cyclisme_client||[]).push([[6961],{4488:(e,s,r)=>{"use strict";r.d(s,{A:()=>l});var a=r(65043),t=r(98139),n=r.n(t),i=r(70579);const l=e=>a.forwardRef(((s,r)=>(0,i.jsx)("div",{...s,ref:r,className:n()(s.className,e)})))},11778:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});const a=r(65043).createContext(null);a.displayName="CardHeaderContext";const t=a},14140:(e,s,r)=>{"use strict";r.d(s,{Am:()=>i,Ay:()=>o});var a=r(65043),t=r(70579);const n=["as","disabled"];function i(e){let{tagName:s,disabled:r,href:a,target:t,rel:n,role:i,onClick:l,tabIndex:o=0,type:c}=e;s||(s=null!=a||null!=t||null!=n?"a":"button");const d={tagName:s};if("button"===s)return[{type:c||"button",disabled:r},d];const m=e=>{(r||"a"===s&&function(e){return!e||"#"===e.trim()}(a))&&e.preventDefault(),r?e.stopPropagation():null==l||l(e)};return"a"===s&&(a||(a="#"),r&&(a=void 0)),[{role:null!=i?i:"button",disabled:void 0,tabIndex:r?void 0:o,href:a,target:"a"===s?t:void 0,"aria-disabled":r||void 0,rel:"a"===s?n:void 0,onClick:m,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),m(e))}},d]}const l=a.forwardRef(((e,s)=>{let{as:r,disabled:a}=e,l=function(e,s){if(null==e)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(s.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,n);const[o,{tagName:c}]=i(Object.assign({tagName:r,disabled:a},l));return(0,t.jsx)(c,Object.assign({},l,o,{ref:s}))}));l.displayName="Button";const o=l},14282:(e,s,r)=>{"use strict";r.d(s,{A:()=>d});var a=r(98139),t=r.n(a),n=r(65043),i=r(14140),l=r(45471),o=r(70579);const c=n.forwardRef(((e,s)=>{let{as:r,bsPrefix:a,variant:n="primary",size:c,active:d=!1,disabled:m=!1,className:u,...f}=e;const x=(0,l.oU)(a,"btn"),[v,{tagName:p}]=(0,i.Am)({tagName:r,disabled:m,...f}),h=p;return(0,o.jsx)(h,{...v,...f,ref:s,disabled:m,className:t()(u,x,d&&"active",n&&`${x}-${n}`,c&&`${x}-${c}`,f.href&&m&&"disabled")})}));c.displayName="Button";const d=c},38628:(e,s,r)=>{"use strict";r.d(s,{A:()=>I});var a=r(98139),t=r.n(a),n=r(65043),i=r(45471),l=r(70579);const o=n.forwardRef(((e,s)=>{let{className:r,bsPrefix:a,as:n="div",...o}=e;return a=(0,i.oU)(a,"card-body"),(0,l.jsx)(n,{ref:s,className:t()(r,a),...o})}));o.displayName="CardBody";const c=o,d=n.forwardRef(((e,s)=>{let{className:r,bsPrefix:a,as:n="div",...o}=e;return a=(0,i.oU)(a,"card-footer"),(0,l.jsx)(n,{ref:s,className:t()(r,a),...o})}));d.displayName="CardFooter";const m=d;var u=r(11778);const f=n.forwardRef(((e,s)=>{let{bsPrefix:r,className:a,as:o="div",...c}=e;const d=(0,i.oU)(r,"card-header"),m=(0,n.useMemo)((()=>({cardHeaderBsPrefix:d})),[d]);return(0,l.jsx)(u.A.Provider,{value:m,children:(0,l.jsx)(o,{ref:s,...c,className:t()(a,d)})})}));f.displayName="CardHeader";const x=f,v=n.forwardRef(((e,s)=>{let{bsPrefix:r,className:a,variant:n,as:o="img",...c}=e;const d=(0,i.oU)(r,"card-img");return(0,l.jsx)(o,{ref:s,className:t()(n?`${d}-${n}`:d,a),...c})}));v.displayName="CardImg";const p=v,h=n.forwardRef(((e,s)=>{let{className:r,bsPrefix:a,as:n="div",...o}=e;return a=(0,i.oU)(a,"card-img-overlay"),(0,l.jsx)(n,{ref:s,className:t()(r,a),...o})}));h.displayName="CardImgOverlay";const b=h,N=n.forwardRef(((e,s)=>{let{className:r,bsPrefix:a,as:n="a",...o}=e;return a=(0,i.oU)(a,"card-link"),(0,l.jsx)(n,{ref:s,className:t()(r,a),...o})}));N.displayName="CardLink";const j=N;var g=r(4488);const y=(0,g.A)("h6"),w=n.forwardRef(((e,s)=>{let{className:r,bsPrefix:a,as:n=y,...o}=e;return a=(0,i.oU)(a,"card-subtitle"),(0,l.jsx)(n,{ref:s,className:t()(r,a),...o})}));w.displayName="CardSubtitle";const A=w,$=n.forwardRef(((e,s)=>{let{className:r,bsPrefix:a,as:n="p",...o}=e;return a=(0,i.oU)(a,"card-text"),(0,l.jsx)(n,{ref:s,className:t()(r,a),...o})}));$.displayName="CardText";const P=$,C=(0,g.A)("h5"),k=n.forwardRef(((e,s)=>{let{className:r,bsPrefix:a,as:n=C,...o}=e;return a=(0,i.oU)(a,"card-title"),(0,l.jsx)(n,{ref:s,className:t()(r,a),...o})}));k.displayName="CardTitle";const S=k,R=n.forwardRef(((e,s)=>{let{bsPrefix:r,className:a,bg:n,text:o,border:d,body:m=!1,children:u,as:f="div",...x}=e;const v=(0,i.oU)(r,"card");return(0,l.jsx)(f,{ref:s,...x,className:t()(a,v,n&&`bg-${n}`,o&&`text-${o}`,d&&`border-${d}`),children:m?(0,l.jsx)(c,{children:u}):u})}));R.displayName="Card";const I=Object.assign(R,{Img:p,Title:S,Subtitle:A,Body:c,Link:j,Text:P,Header:x,Footer:m,ImgOverlay:b})},45471:(e,s,r)=>{"use strict";r.d(s,{Jm:()=>m,gy:()=>d,oU:()=>c});var a=r(65043);r(70579);const t=["xxl","xl","lg","md","sm","xs"],n="xs",i=a.createContext({prefixes:{},breakpoints:t,minBreakpoint:n}),{Consumer:l,Provider:o}=i;function c(e,s){const{prefixes:r}=(0,a.useContext)(i);return e||r[s]||s}function d(){const{breakpoints:e}=(0,a.useContext)(i);return e}function m(){const{minBreakpoint:e}=(0,a.useContext)(i);return e}},46961:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>A});var a=r(65043),t=r(38628),n=r(84063),i=r(98139),l=r.n(i),o=r(45471),c=r(62663),d=r(70579);function m(e,s,r){const a=(e-s)/(r-s)*100;return Math.round(1e3*a)/1e3}function u(e,s){let{min:r,now:a,max:t,label:n,visuallyHidden:i,striped:o,animated:c,className:u,style:f,variant:x,bsPrefix:v,...p}=e;return(0,d.jsx)("div",{ref:s,...p,role:"progressbar",className:l()(u,`${v}-bar`,{[`bg-${x}`]:x,[`${v}-bar-animated`]:c,[`${v}-bar-striped`]:c||o}),style:{width:`${m(a,r,t)}%`,...f},"aria-valuenow":a,"aria-valuemin":r,"aria-valuemax":t,children:i?(0,d.jsx)("span",{className:"visually-hidden",children:n}):n})}const f=a.forwardRef(((e,s)=>{let{isChild:r=!1,...t}=e;const n={min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1,...t};if(n.bsPrefix=(0,o.oU)(n.bsPrefix,"progress"),r)return u(n,s);const{min:i,now:m,max:f,label:x,visuallyHidden:v,striped:p,animated:h,bsPrefix:b,variant:N,className:j,children:g,...y}=n;return(0,d.jsx)("div",{ref:s,...y,className:l()(j,b),children:g?(0,c.Tj)(g,(e=>(0,a.cloneElement)(e,{isChild:!0}))):u({min:i,now:m,max:f,label:x,visuallyHidden:v,striped:p,animated:h,bsPrefix:b,variant:N},s)})}));f.displayName="ProgressBar";const x=f;var v=r(61072),p=r(78602),h=r(14282),b=r(83910),N=r(97929),j=r(74117),g=r(461);g.t1.register(...g.$L);const y=g.t1;var w=r(45577);const A=e=>{let{workout:s,onComplete:r,onSave:i}=e;const{t:l}=(0,j.Bd)(),{notify:o}=(0,w.hN)(),c=(0,a.useRef)(null),m=(0,a.useRef)(null),[u,f]=(0,a.useState)(!1),[g,A]=(0,a.useState)(0),[$,P]=(0,a.useState)(0),[C,k]=(0,a.useState)(0),[S,R]=(0,a.useState)(null),[I,T]=(0,a.useState)({tss:0,kj:0,timeInZones:[0,0,0,0,0,0,0]}),U=e=>{const s=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`};(0,a.useEffect)((()=>{if(s)try{if(!s.intervals||!Array.isArray(s.intervals))return void o.error("Intervalles d'entra\xeenement invalides");const e=s.intervals.reduce(((e,s)=>e+(s.duration||0)),0);if(e<=0)return void o.error("Dur\xe9e d'entra\xeenement invalide");k(e),B()}catch(e){console.error("Erreur lors de l'initialisation de l'entra\xeenement",e),o.error("Erreur lors de l'initialisation",e.message)}else o.error("Donn\xe9es d'entra\xeenement manquantes")}),[s,o]);const B=()=>{if(!s||!s.intervals||!c.current)return;m.current&&m.current.destroy();const e=[],r=[];let a=0;s.intervals.forEach((s=>{const t=s.duration/60;s.type;for(let n=0;n<t;n++)a+=60,e.push(U(a)),r.push(s.power)}));const t=s.targetPower||200,n=c.current.getContext("2d");m.current=new y(n,{type:"line",data:{labels:e,datasets:[{label:"Puissance Cible (Watts)",data:r,borderColor:"rgb(75, 192, 192)",tension:.1,fill:!0,backgroundColor:"rgba(75, 192, 192, 0.2)"},{label:"FTP",data:Array(e.length).fill(t),borderColor:"rgba(255, 99, 132, 0.8)",borderDash:[5,5],borderWidth:2,pointRadius:0}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,title:{display:!0,text:"Watts"}},x:{title:{display:!0,text:"Temps (minutes)"}}},plugins:{tooltip:{callbacks:{title:e=>`Temps: ${e[0].label}`,label:e=>{const s=e.raw;return[`Puissance: ${s} W`,`${Math.round(s/t*100)}% de FTP`]}}}}}})},E=e=>{if(!s||!s.intervals)return;let r=0,a=null;for(const t of s.intervals)if(r+=t.duration,e<=r){a=t;break}a&&T((e=>{const r=e.kj+a.power*(1/3600),t=s.targetPower||200,n=a.power/t,i=[...e.timeInZones];n<=.55?i[0]++:n<=.75?i[1]++:n<=.9?i[2]++:n<=1.05?i[3]++:n<=1.3?i[4]++:n<=1.5?i[5]++:i[6]++;const l=1*a.power*(a.power/t)/(36*t);return{tss:e.tss+l,kj:r,timeInZones:i}}))},z=()=>{clearInterval(S),f(!1);const e={tss:Math.round(I.tss),kj:Math.round(I.kj),timeInZones:I.timeInZones,duration:$,completed:$>=C};o.success("Entra\xeenement termin\xe9 !",`TSS: ${e.tss}, \xc9nergie d\xe9pens\xe9e: ${e.kj} kJ`),r&&r(e)};if(!s)return(0,d.jsx)(t.A,{className:"text-center my-4",children:(0,d.jsxs)(t.A.Body,{children:[(0,d.jsx)(t.A.Title,{children:"Aucun entra\xeenement s\xe9lectionn\xe9"}),(0,d.jsx)(t.A.Text,{children:"Veuillez s\xe9lectionner un entra\xeenement pour commencer la session."})]})});const M=(()=>{if(!s||!s.intervals||0===s.intervals.length)return{type:"inconnu",power:0,duration:0};const e=Math.min(g,s.intervals.length-1);return s.intervals[e]})(),D=(e=>{const s={warmup:{color:"info",icon:N.ijD},steady:{color:"success",icon:N.gK3},threshold:{color:"warning",icon:N.kNw},vo2max:{color:"danger",icon:N.kNw},recovery:{color:"info",icon:N.a$},cooldown:{color:"primary",icon:N.a$},default:{color:"secondary",icon:N.gK3}};return s[e]||s.default})(M.type),H=Math.min(100,$/C*100);return(0,d.jsx)("div",{className:"hiit-visualizer",children:(0,d.jsxs)(t.A,{className:"mb-4",children:[(0,d.jsxs)(t.A.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,d.jsx)("h4",{className:"mb-0",children:s.name}),(0,d.jsxs)(n.A,{bg:"primary",children:[U($)," / ",U(C)]})]}),(0,d.jsxs)(t.A.Body,{children:[(0,d.jsx)("div",{className:"mb-4",children:(0,d.jsx)(x,{now:H,variant:"primary",label:`${Math.round(H)}%`,className:"mb-2",style:{height:"25px"}})}),(0,d.jsxs)(v.A,{className:"mb-4",children:[(0,d.jsx)(p.A,{md:6,children:(0,d.jsxs)(t.A,{className:"h-100 current-interval",children:[(0,d.jsxs)(t.A.Header,{className:`bg-${D.color} text-white`,children:[(0,d.jsx)(b.g,{icon:D.icon,className:"me-2"}),"Intervalle Actuel: ",l(`intervals.${M.type}`)||M.type]}),(0,d.jsxs)(t.A.Body,{className:"text-center",children:[(0,d.jsxs)("div",{className:"power-display mb-3",children:[(0,d.jsx)("h1",{className:"power-value",children:M.power}),(0,d.jsx)("span",{className:"power-unit",children:"watts"})]}),(0,d.jsxs)(v.A,{className:"interval-details",children:[(0,d.jsx)(p.A,{xs:6,children:(0,d.jsxs)("div",{className:"detail-item",children:[(0,d.jsx)(b.g,{icon:N.a$,className:"me-2 text-muted"}),U(M.duration)]})}),(0,d.jsx)(p.A,{xs:6,children:(0,d.jsxs)("div",{className:"detail-item",children:[(0,d.jsx)(b.g,{icon:N.kNw,className:"me-2 text-muted"}),s.targetPower?`${Math.round(M.power/s.targetPower*100)}% FTP`:"FTP inconnue"]})})]})]})]})}),(0,d.jsx)(p.A,{md:6,children:(0,d.jsxs)(t.A,{className:"h-100 session-stats",children:[(0,d.jsx)(t.A.Header,{children:"Statistiques de la Session"}),(0,d.jsxs)(t.A.Body,{children:[(0,d.jsxs)(v.A,{children:[(0,d.jsxs)(p.A,{xs:6,className:"mb-3",children:[(0,d.jsx)("div",{className:"stat-label",children:"TSS"}),(0,d.jsx)("div",{className:"stat-value",children:Math.round(I.tss)})]}),(0,d.jsxs)(p.A,{xs:6,className:"mb-3",children:[(0,d.jsx)("div",{className:"stat-label",children:"Kilojoules"}),(0,d.jsxs)("div",{className:"stat-value",children:[Math.round(I.kj)," kJ"]})]})]}),(0,d.jsxs)("div",{className:"zones-distribution",children:[(0,d.jsx)("div",{className:"stat-label mb-2",children:"Temps dans les zones"}),(0,d.jsx)("div",{className:"zones-bars",children:I.timeInZones.map(((e,s)=>(0,d.jsxs)("div",{className:"zone-bar-container mb-1",children:[(0,d.jsxs)("div",{className:"zone-name",children:["Z",s+1]}),(0,d.jsx)(x,{now:e,max:C,variant:0===s?"info":1===s?"success":2===s?"primary":3===s?"warning":4===s?"danger":5===s?"dark":"secondary",className:"flex-grow-1"}),(0,d.jsxs)("div",{className:"zone-time",children:[Math.round(e),"s"]})]},s)))})]})]})]})})]}),(0,d.jsx)("div",{className:"chart-container",style:{height:"300px"},children:(0,d.jsx)("canvas",{ref:c})}),(0,d.jsxs)("div",{className:"workout-controls mt-4 d-flex justify-content-center",children:[u?(0,d.jsxs)(h.A,{variant:"warning",size:"lg",onClick:()=>{clearInterval(S),f(!1)},className:"me-2",children:[(0,d.jsx)(b.g,{icon:N.G1Y,className:"me-2"}),"Pause"]}):(0,d.jsxs)(h.A,{variant:"success",size:"lg",onClick:()=>{if(u)return;f(!0);const e=setInterval((()=>{P((e=>{const r=e+1;let a=0,t=0;for(let n=0;n<s.intervals.length;n++)if(a+=s.intervals[n].duration,r<=a){t=n;break}if(t!==g){A(t);const e=s.intervals[t].type,r=s.intervals[t].power;o.info(`Nouvel intervalle: ${e}, ${r}W`)}return E(r),r>=C?(clearInterval(S),z(),C):r}))}),1e3);R(e)},className:"me-2",children:[(0,d.jsx)(b.g,{icon:N.ijD,className:"me-2"}),$>0?"Reprendre":"D\xe9marrer"]}),(0,d.jsxs)(h.A,{variant:"danger",size:"lg",onClick:z,className:"me-2",children:[(0,d.jsx)(b.g,{icon:N.APi,className:"me-2"}),"Terminer"]}),(0,d.jsx)(h.A,{variant:"secondary",size:"lg",onClick:()=>{if(s)try{if(i){const e={...s,stats:I,completedTime:$,completionDate:(new Date).toISOString(),completed:$>=C};i(e),o.success("Entra\xeenement sauvegard\xe9 !")}}catch(e){console.error("Erreur lors de la sauvegarde",e),o.error("Impossible de sauvegarder l'entra\xeenement",e.message)}},children:"Sauvegarder"})]})]})]})})}},61072:(e,s,r)=>{"use strict";r.d(s,{A:()=>c});var a=r(98139),t=r.n(a),n=r(65043),i=r(45471),l=r(70579);const o=n.forwardRef(((e,s)=>{let{bsPrefix:r,className:a,as:n="div",...o}=e;const c=(0,i.oU)(r,"row"),d=(0,i.gy)(),m=(0,i.Jm)(),u=`${c}-cols`,f=[];return d.forEach((e=>{const s=o[e];let r;delete o[e],null!=s&&"object"===typeof s?({cols:r}=s):r=s;const a=e!==m?`-${e}`:"";null!=r&&f.push(`${u}${a}-${r}`)})),(0,l.jsx)(n,{ref:s,...o,className:t()(a,c,...f)})}));o.displayName="Row";const c=o},62663:(e,s,r)=>{"use strict";r.d(s,{Tj:()=>t,jJ:()=>n,mf:()=>i});var a=r(65043);function t(e,s){let r=0;return a.Children.map(e,(e=>a.isValidElement(e)?s(e,r++):e))}function n(e,s){let r=0;a.Children.forEach(e,(e=>{a.isValidElement(e)&&s(e,r++)}))}function i(e,s){return a.Children.toArray(e).some((e=>a.isValidElement(e)&&e.type===s))}},78602:(e,s,r)=>{"use strict";r.d(s,{A:()=>c});var a=r(98139),t=r.n(a),n=r(65043),i=r(45471),l=r(70579);const o=n.forwardRef(((e,s)=>{const[{className:r,...a},{as:n="div",bsPrefix:o,spans:c}]=function(e){let{as:s,bsPrefix:r,className:a,...n}=e;r=(0,i.oU)(r,"col");const l=(0,i.gy)(),o=(0,i.Jm)(),c=[],d=[];return l.forEach((e=>{const s=n[e];let a,t,i;delete n[e],"object"===typeof s&&null!=s?({span:a,offset:t,order:i}=s):a=s;const l=e!==o?`-${e}`:"";a&&c.push(!0===a?`${r}${l}`:`${r}${l}-${a}`),null!=i&&d.push(`order${l}-${i}`),null!=t&&d.push(`offset${l}-${t}`)})),[{...n,className:t()(a,...c,...d)},{as:s,bsPrefix:r,spans:c}]}(e);return(0,l.jsx)(n,{...a,ref:s,className:t()(r,!c.length&&o)})}));o.displayName="Col";const c=o},84063:(e,s,r)=>{"use strict";r.d(s,{A:()=>c});var a=r(98139),t=r.n(a),n=r(65043),i=r(45471),l=r(70579);const o=n.forwardRef(((e,s)=>{let{bsPrefix:r,bg:a="primary",pill:n=!1,text:o,className:c,as:d="span",...m}=e;const u=(0,i.oU)(r,"badge");return(0,l.jsx)(d,{ref:s,...m,className:t()(c,u,n&&"rounded-pill",o&&`text-${o}`,a&&`bg-${a}`)})}));o.displayName="Badge";const c=o},98139:(e,s)=>{var r;!function(){"use strict";var a={}.hasOwnProperty;function t(){for(var e="",s=0;s<arguments.length;s++){var r=arguments[s];r&&(e=i(e,n(r)))}return e}function n(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return t.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var s="";for(var r in e)a.call(e,r)&&e[r]&&(s=i(s,r));return s}function i(e,s){return s?e?e+" "+s:e+s:e}e.exports?(t.default=t,e.exports=t):void 0===(r=function(){return t}.apply(s,[]))||(e.exports=r)}()}}]);
//# sourceMappingURL=6961.5e729060.chunk.js.map