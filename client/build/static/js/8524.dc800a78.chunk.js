"use strict";(self.webpackChunkgrand_est_cyclisme_client=self.webpackChunkgrand_est_cyclisme_client||[]).push([[8524],{2828:(e,t,i)=>{i.d(t,{A:()=>y});var r=i(58168),a=i(98587),n=i(65043),s=i(58387),l=i(98610),o=i(98206),c=i(34535),d=i(92532),u=i(72372);function h(e){return(0,u.Ay)("MuiCardActionArea",e)}const g=(0,d.A)("MuiCardActionArea",["root","focusVisible","focusHighlight"]);var A=i(75429),p=i(70579);const x=["children","className","focusVisibleClassName"],f=(0,c.Ay)(A.A,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${g.focusHighlight}`]:{opacity:(t.vars||t).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${g.focusVisible} .${g.focusHighlight}`]:{opacity:(t.vars||t).palette.action.focusOpacity}}})),m=(0,c.Ay)("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(e,t)=>t.focusHighlight})((e=>{let{theme:t}=e;return{overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:t.transitions.create("opacity",{duration:t.transitions.duration.short})}})),y=n.forwardRef((function(e,t){const i=(0,o.b)({props:e,name:"MuiCardActionArea"}),{children:n,className:c,focusVisibleClassName:d}=i,u=(0,a.A)(i,x),g=i,A=(e=>{const{classes:t}=e;return(0,l.A)({root:["root"],focusHighlight:["focusHighlight"]},h,t)})(g);return(0,p.jsxs)(f,(0,r.A)({className:(0,s.A)(A.root,c),focusVisibleClassName:(0,s.A)(d,A.focusVisible),ref:t,ownerState:g},u,{children:[n,(0,p.jsx)(m,{className:A.focusHighlight,ownerState:g})]}))}))},5844:(e,t,i)=>{var r;i.d(t,{A:()=>l});var a=i(65043);let n=0;const s=(r||(r=i.t(a,2)))["useId".toString()];function l(e){if(void 0!==s){const t=s();return null!=e?e:t}return function(e){const[t,i]=a.useState(e),r=e||t;return a.useEffect((()=>{null==t&&(n+=1,i(`mui-${n}`))}),[t]),r}(e)}},45879:(e,t,i)=>{i.d(t,{A:()=>r});const r=i(5844).A},51052:(e,t,i)=>{i.d(t,{A:()=>a});var r=i(65043);function a(e){let{controlled:t,default:i,name:a,state:n="value"}=e;const{current:s}=r.useRef(void 0!==t),[l,o]=r.useState(i);return[s?t:l,r.useCallback((e=>{s||o(e)}),[])]}},53211:(e,t,i)=>{var r=i(24994);t.A=void 0;var a=r(i(40039)),n=i(70579);t.A=(0,a.default)((0,n.jsx)("path",{d:"M13 6.99h3L12 3 8 6.99h3v10.02H8L12 21l4-3.99h-3z"}),"Height")},54516:(e,t,i)=>{i.d(t,{A:()=>r});const r=i(51052).A},61783:(e,t,i)=>{var r=i(24994);t.A=void 0;var a=r(i(40039)),n=i(70579);t.A=(0,a.default)((0,n.jsx)("path",{d:"M19 15.18V7c0-2.21-1.79-4-4-4s-4 1.79-4 4v10c0 1.1-.9 2-2 2s-2-.9-2-2V8.82C8.16 8.4 9 7.3 9 6c0-1.66-1.34-3-3-3S3 4.34 3 6c0 1.3.84 2.4 2 2.82V17c0 2.21 1.79 4 4 4s4-1.79 4-4V7c0-1.1.9-2 2-2s2 .9 2 2v8.18c-1.16.41-2 1.51-2 2.82 0 1.66 1.34 3 3 3s3-1.34 3-3c0-1.3-.84-2.4-2-2.82"}),"Route")},74738:(e,t,i)=>{var r=i(24994);t.A=void 0;var a=r(i(40039)),n=i(70579);t.A=(0,a.default)((0,n.jsx)("path",{d:"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67M11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8"}),"Whatshot")},93911:(e,t,i)=>{i.r(t),i.d(t,{default:()=>R});var r=i(65043),a=i(84511),n=i(12110),s=i(68903),l=i(63336),o=i(85865),c=i(15078),d=i(96446),u=i(81637),h=i(43845),g=i(2828),A=i(36591),p=i(26494),x=i(34535),f=i(74738),m=i(53211),y=i(61783),j=i(86213);const v={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://api.grand-est-cyclisme.fr",REACT_APP_ENVIRONMENT:"production",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoiZ3JhbmRlc3RjeWNsaXNtZSIsImEiOiJjbHpqMnZ5eTUwMDFqMnFxcTRpbXg1NXZrIn0.5Z5Kg9_Qx3_Y5Xj2Z5Z5Zw",REACT_APP_USE_MOCK_DATA:"false"}.REACT_APP_API_BASE_URL||"/api",b={async getCols(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await j.A.get(`${v}/api/cols`,{params:e})).data}catch(t){throw console.error("Erreur lors de la r\xe9cup\xe9ration des cols:",t),t}},async getColDetails(e){try{return(await j.A.get(`${v}/api/cols/${e}`)).data}catch(t){throw console.error(`Erreur lors de la r\xe9cup\xe9ration des d\xe9tails du col ${e}:`,t),t}},async generateTrainingPlan(e,t){try{return(await j.A.post(`${v}/api/mountain/training-plan`,{colId:e,userMetrics:t})).data}catch(i){throw console.error("Erreur lors de la g\xe9n\xe9ration du plan d'entra\xeenement:",i),i}},async generateNutritionPlan(e,t){try{return(await j.A.post(`${v}/api/mountain/nutrition-plan`,{colId:e,userMetrics:t})).data}catch(i){throw console.error("Erreur lors de la g\xe9n\xe9ration du plan nutritionnel:",i),i}},async getRegionalTrainingPlans(e){try{return(await j.A.get(`${v}/api/mountain/regional-plans/${e}`)).data}catch(t){throw console.error(`Erreur lors de la r\xe9cup\xe9ration des plans r\xe9gionaux pour ${e}:`,t),t}},async getCol3DVisualizationData(e){try{return(await j.A.get(`${v}/api/cols/${e}/3d-data`)).data}catch(t){throw console.error(`Erreur lors de la r\xe9cup\xe9ration des donn\xe9es 3D pour le col ${e}:`,t),t}}};var C=i(34222),w=i(92529),S=i(70579);const _=(0,x.Ay)(a.A)((e=>{let{theme:t}=e;return{"&.Mui-selected":{backgroundColor:t.palette.primary.main,color:t.palette.primary.contrastText,"&:hover":{backgroundColor:t.palette.primary.dark}}}})),E=(0,x.Ay)(n.A)((e=>{let{theme:t,selected:i}=e;return{height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s ease",border:i?`2px solid ${t.palette.primary.main}`:"none",transform:i?"translateY(-4px)":"none",boxShadow:i?t.shadows[8]:t.shadows[1]}}));const D=[{id:1,name:"Col du Galibier",region:"alpes",altitude:2642,length:23,gradient:5.5,difficulty:8.5,image:"https://www.cyclingcols.com/sites/default/files/col/galibier%20S%20%2810%29.jpg"},{id:2,name:"Alpe d'Huez",region:"alpes",altitude:1860,length:13.8,gradient:8.1,difficulty:8,image:"https://www.cyclingcols.com/sites/default/files/col/alpe_d_huez.jpg"},{id:3,name:"Col du Tourmalet",region:"pyrenees",altitude:2115,length:19,gradient:7.4,difficulty:8.8,image:"https://www.cyclingcols.com/sites/default/files/col/tourmalet.jpg"},{id:4,name:"Stelvio",region:"dolomites",altitude:2758,length:24.3,gradient:7.4,difficulty:9.2,image:"https://www.cyclingcols.com/sites/default/files/col/stelvio%20N%20%281%29.jpg"},{id:5,name:"Mur de Huy",region:"ardennes",altitude:204,length:1.3,gradient:9.6,difficulty:7,image:"https://www.cyclingcols.com/sites/default/files/col/huy%20%285%29.JPG"},{id:6,name:"Col d'Izoard",region:"alpes",altitude:2360,length:19,gradient:6,difficulty:7.5,image:"https://www.cyclingcols.com/sites/default/files/col/izoard%20north%20%287%29.jpg"}],R=function(e){let{onRegionChange:t,onColSelect:i,selectedRegion:a="alpes",selectedCol:n}=e;const[x,j]=(0,r.useState)([]),[v,R]=(0,r.useState)(!0),[T,P]=(0,r.useState)(null),[$,M]=(0,r.useState)(!1),{enableColSpecificTraining:N,enableColSpecificNutrition:I}=(0,w.h)(),[k,H]=(0,r.useState)({totalCols:0,averageAltitude:0,averageDifficulty:0,regionDistribution:{}}),[O,V]=(0,r.useState)(a||"alpes"),[z,B]=(0,r.useState)(null),W=a||O,F=n||z;(0,r.useEffect)((()=>{(async()=>{R(!0);try{const e=await b.getCols({region:W});j(e||D),e&&e.length>0?Z(e):Z(D)}catch(e){console.error("Erreur lors du chargement des cols:",e),j(D),Z(D)}finally{R(!1)}})()}),[W]),(0,r.useEffect)((()=>{(async()=>{if(F){M(!0);try{const e=await b.getCol3DVisualizationData(F.id);P(e)}catch(e){console.error("Erreur lors du chargement des donn\xe9es 3D:",e),P(null)}finally{M(!1)}}})()}),[F]);const Z=e=>{const t=e.length,i=e.reduce(((e,t)=>e+t.altitude),0),r=e.reduce(((e,t)=>e+t.difficulty),0),a={};e.forEach((e=>{a[e.region]||(a[e.region]=0),a[e.region]++})),H({totalCols:t,averageAltitude:i/t,averageDifficulty:r/t,regionDistribution:a})};return(0,S.jsxs)(s.Ay,{container:!0,spacing:3,children:[(0,S.jsx)(s.Ay,{item:!0,xs:12,children:(0,S.jsxs)(l.A,{sx:{p:2,mb:2},children:[(0,S.jsx)(o.A,{variant:"h6",gutterBottom:!0,children:"S\xe9lection de r\xe9gion"}),(0,S.jsxs)(c.A,{value:W,exclusive:!0,onChange:(e,i)=>{null!==i&&(t?t(i):V(i))},"aria-label":"r\xe9gion de cols",color:"primary",fullWidth:!0,children:[(0,S.jsx)(_,{value:"alpes","aria-label":"Alpes",children:"Alpes"}),(0,S.jsx)(_,{value:"pyrenees","aria-label":"Pyr\xe9n\xe9es",children:"Pyr\xe9n\xe9es"}),(0,S.jsx)(_,{value:"dolomites","aria-label":"Dolomites",children:"Dolomites"}),(0,S.jsx)(_,{value:"ardennes","aria-label":"Ardennes/Flandres",children:"Ardennes/Flandres"})]})]})}),(0,S.jsx)(s.Ay,{item:!0,xs:12,md:4,children:(0,S.jsxs)(l.A,{sx:{p:2,height:"100%"},children:[(0,S.jsx)(o.A,{variant:"h6",gutterBottom:!0,children:"Statistiques"}),v?(0,S.jsx)(d.A,{sx:{display:"flex",justifyContent:"center",p:5},children:(0,S.jsx)(u.A,{})}):(0,S.jsx)(d.A,{children:(0,S.jsxs)(s.Ay,{container:!0,spacing:2,children:[(0,S.jsx)(s.Ay,{item:!0,xs:6,children:(0,S.jsxs)(d.A,{sx:{textAlign:"center",mb:2},children:[(0,S.jsx)(m.A,{color:"primary",sx:{fontSize:40}}),(0,S.jsxs)(o.A,{variant:"h6",children:[Math.round(k.averageAltitude),"m"]}),(0,S.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Altitude moyenne"})]})}),(0,S.jsx)(s.Ay,{item:!0,xs:6,children:(0,S.jsxs)(d.A,{sx:{textAlign:"center",mb:2},children:[(0,S.jsx)(f.A,{color:"warning",sx:{fontSize:40}}),(0,S.jsxs)(o.A,{variant:"h6",children:[k.averageDifficulty.toFixed(1),"/10"]}),(0,S.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Difficult\xe9 moyenne"})]})}),(0,S.jsxs)(s.Ay,{item:!0,xs:12,children:[(0,S.jsxs)(o.A,{variant:"subtitle2",gutterBottom:!0,children:[k.totalCols," cols disponibles"]}),F&&(0,S.jsxs)(d.A,{sx:{mt:3,p:2,bgcolor:"background.default",borderRadius:1},children:[(0,S.jsxs)(o.A,{variant:"subtitle1",gutterBottom:!0,children:["Col s\xe9lectionn\xe9: ",F.name]}),(0,S.jsxs)(o.A,{variant:"body2",children:["Altitude: ",F.altitude,"m"]}),(0,S.jsxs)(o.A,{variant:"body2",children:["Longueur: ",F.length,"km \xe0 ",F.gradient,"%"]}),(0,S.jsxs)(o.A,{variant:"body2",children:["Difficult\xe9: ",F.difficulty,"/10"]}),(0,S.jsxs)(d.A,{sx:{mt:2,display:"flex",flexWrap:"wrap",gap:1},children:[N&&(0,S.jsx)(h.A,{label:"Entra\xeenement",color:"primary",size:"small",onClick:()=>window.location.href=`/mountain/training?colId=${F.id}`}),I&&(0,S.jsx)(h.A,{label:"Nutrition",color:"secondary",size:"small",onClick:()=>window.location.href=`/mountain/nutrition?colId=${F.id}`})]})]})]})]})})]})}),(0,S.jsx)(s.Ay,{item:!0,xs:12,md:8,children:(0,S.jsxs)(l.A,{sx:{p:2},children:[(0,S.jsxs)(o.A,{variant:"h6",gutterBottom:!0,children:["Cols ",W.charAt(0).toUpperCase()+W.slice(1)]}),v?(0,S.jsx)(d.A,{sx:{display:"flex",justifyContent:"center",p:5},children:(0,S.jsx)(u.A,{})}):(0,S.jsx)(s.Ay,{container:!0,spacing:2,children:x.map((e=>(0,S.jsx)(s.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,S.jsx)(E,{selected:F&&F.id===e.id,children:(0,S.jsxs)(g.A,{onClick:()=>(e=>{i?i(e):B(e)})(e),children:[(0,S.jsx)(A.A,{component:"img",height:"140",image:e.image,alt:e.name}),(0,S.jsxs)(p.A,{children:[(0,S.jsx)(o.A,{gutterBottom:!0,variant:"h6",component:"div",noWrap:!0,children:e.name}),(0,S.jsxs)(d.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mb:1},children:[(0,S.jsx)(h.A,{icon:(0,S.jsx)(m.A,{}),label:`${e.altitude}m`,size:"small",color:"primary",variant:"outlined"}),(0,S.jsx)(h.A,{icon:(0,S.jsx)(f.A,{}),label:`Difficult\xe9: ${e.difficulty}/10`,size:"small",color:e.difficulty>7?"error":e.difficulty>5?"warning":"success",variant:"outlined"})]}),(0,S.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",mt:1},children:[(0,S.jsx)(y.A,{fontSize:"small",color:"action",sx:{mr:.5}}),(0,S.jsxs)(o.A,{variant:"body2",color:"text.secondary",children:[e.length,"km @ ",e.gradient,"%"]})]})]})]})})},e.id)))})]})}),F&&(0,S.jsx)(s.Ay,{item:!0,xs:12,children:(0,S.jsxs)(l.A,{sx:{p:2},children:[(0,S.jsxs)(o.A,{variant:"h6",gutterBottom:!0,children:["Visualisation 3D: ",F.name]}),$?(0,S.jsx)(d.A,{sx:{display:"flex",justifyContent:"center",p:5},children:(0,S.jsx)(u.A,{})}):T?(0,S.jsx)(C.A,{passId:F.id,elevationData:T.elevationData,surfaceTypes:T.surfaceTypes,pointsOfInterest:T.pointsOfInterest}):(0,S.jsx)(d.A,{sx:{p:3,textAlign:"center"},children:(0,S.jsx)(o.A,{color:"text.secondary",children:"Donn\xe9es de visualisation 3D non disponibles pour ce col."})})]})})]})}}}]);
//# sourceMappingURL=8524.dc800a78.chunk.js.map