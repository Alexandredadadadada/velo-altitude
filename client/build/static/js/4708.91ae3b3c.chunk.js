"use strict";(self.webpackChunkgrand_est_cyclisme_client=self.webpackChunkgrand_est_cyclisme_client||[]).push([[4708],{29653:(e,s,i)=>{i.d(s,{A:()=>r});i(65043);var a=i(38248),t=i(96446),n=i(70579);const r=e=>{let{children:s,transition:i="fade"}=e;const r={fade:{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4}},slide:{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{type:"spring",stiffness:300,damping:30}},scale:{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.5}},slideUp:{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{type:"spring",stiffness:500,damping:30}}},l=r[i]||r.fade;return(0,n.jsx)(a.P.div,{initial:l.initial,animate:l.animate,exit:l.exit,transition:l.transition,style:{width:"100%"},children:(0,n.jsx)(t.A,{sx:{overflow:"hidden"},children:s})})}},57599:(e,s,i)=>{i.r(s),i.d(s,{default:()=>Is});var a=i(65043),t=i(96446),n=i(8939),r=i(24056),l=i(12110),o=i(90310),d=i(26240),c=i(30344),m=i(81637),h=i(14194),x=i(19252),p=i(85865),u=i(68903),g=i(26494),j=i(63336),v=i(34535),f=i(58602),y=i(33254),b=i(31505),A=i(21323),k=i(94271),N=i(4623),C=i(15244),w=i(32782),S=i(16965),P=i(38248),B=i(29653),z=i(62211),F=(i(84189),i(62690)),D=i(80150),R=i(52076),I=i(59131),T=i(99972),W=i(97461),$=i(94382),E=i(92646),M=i(30275),G=i(86213),L=i(29408),V=i(71985),U=i(31951),q=i(5029),O=i(50007),K=i(70579);const X=e=>{let{position:s,name:i,type:a,onClick:t}=e;const n="start"===a?"#4CAF50":"summit"===a?"#F44336":"panorama"===a?"#2196F3":"ravitaillement"===a?"#FF9800":"#9C27B0";return(0,K.jsxs)("group",{position:s,onClick:t,children:[(0,K.jsxs)("mesh",{children:[(0,K.jsx)("sphereGeometry",{args:[5,16,16]}),(0,K.jsx)("meshStandardMaterial",{color:n})]}),(0,K.jsx)(U.E,{position:[0,8,0],color:"white",fontSize:5,maxWidth:100,textAlign:"center",anchorX:"center",anchorY:"middle",outlineWidth:.5,outlineColor:"#000000",children:i})]})},_=e=>{let{coordinates:s}=e;const i=s.map((e=>new L.Vector3(e.position[0],e.position[2],e.position[1])));return(0,K.jsx)(q.N,{points:i,color:"#E91E63",lineWidth:5})},H=e=>{let{passId:s}=e;const[i,t]=(0,a.useState)(null),[n,r]=(0,a.useState)(!0),[l,o]=(0,a.useState)(null),[d,c]=(0,a.useState)(null),[m,h]=(0,a.useState)([0,100,200]);(0,a.useEffect)((()=>{r(!0),G.A.get(`/api/visualization/passes/${s}/visualization-3d`).then((e=>{"success"===e.data.status?(t(e.data.data),e.data.data.camera&&e.data.data.camera.initialPosition&&h(e.data.data.camera.initialPosition)):o("Erreur lors du chargement des donn\xe9es")})).catch((e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es 3D",e),o(`Erreur lors de la r\xe9cup\xe9ration des donn\xe9es: ${e.message}`)})).finally((()=>{r(!1)}))}),[s]);return n?(0,K.jsx)("div",{className:"pass-3d-loading",children:"Chargement de la visualisation 3D..."}):l?(0,K.jsxs)("div",{className:"pass-3d-error",children:["Erreur: ",l]}):i?(0,K.jsxs)("div",{className:"pass-3d-container",children:[(0,K.jsxs)("div",{className:"pass-3d-header",children:[(0,K.jsxs)("h2",{children:[i.name," - Visualisation 3D"]}),(0,K.jsxs)("div",{className:"pass-3d-controls",children:[(0,K.jsx)("button",{onClick:()=>h(i.camera.initialPosition),children:"Vue par d\xe9faut"}),(0,K.jsx)("button",{onClick:()=>h([0,200,0]),children:"Vue a\xe9rienne"})]})]}),(0,K.jsx)("div",{className:"pass-3d-viewer",children:(0,K.jsxs)(V.Hl,{camera:{position:m,fov:45},children:[(0,K.jsx)("ambientLight",{intensity:.5}),(0,K.jsx)("directionalLight",{position:[10,10,5],intensity:1}),(0,K.jsx)(_,{coordinates:i.coordinates3D}),i.markers&&i.markers.map(((e,s)=>(0,K.jsx)(X,{position:e.position,name:e.name,type:e.type,onClick:()=>(e=>{c(e)})(e)},e.id||s))),(0,K.jsx)(O.N,{target:i.camera.lookAt||[0,0,0]})]})}),d&&(0,K.jsxs)("div",{className:"pass-3d-info-panel",children:[(0,K.jsxs)("div",{className:"pass-3d-info-header",children:[(0,K.jsx)("h3",{children:d.name}),(0,K.jsx)("button",{onClick:()=>{c(null)},children:"\xd7"})]}),(0,K.jsxs)("div",{className:"pass-3d-info-content",children:[(0,K.jsx)("p",{children:d.description||"Pas de description disponible"}),"start"===d.type&&(0,K.jsx)("div",{className:"pass-3d-elevation-info",children:(0,K.jsxs)("p",{children:["Altitude de d\xe9part: ",d.position[2],"m"]})}),"summit"===d.type&&(0,K.jsx)("div",{className:"pass-3d-elevation-info",children:(0,K.jsxs)("p",{children:["Altitude au sommet: ",d.position[2],"m"]})})]})]}),(0,K.jsxs)("div",{className:"pass-3d-legend",children:[(0,K.jsx)("h3",{children:"L\xe9gende"}),(0,K.jsxs)("div",{className:"pass-3d-legend-item",children:[(0,K.jsx)("span",{className:"legend-color start"}),(0,K.jsx)("span",{children:"D\xe9part"})]}),(0,K.jsxs)("div",{className:"pass-3d-legend-item",children:[(0,K.jsx)("span",{className:"legend-color summit"}),(0,K.jsx)("span",{children:"Sommet"})]}),(0,K.jsxs)("div",{className:"pass-3d-legend-item",children:[(0,K.jsx)("span",{className:"legend-color panorama"}),(0,K.jsx)("span",{children:"Point de vue"})]}),(0,K.jsxs)("div",{className:"pass-3d-legend-item",children:[(0,K.jsx)("span",{className:"legend-color ravitaillement"}),(0,K.jsx)("span",{children:"Ravitaillement"})]})]}),(0,K.jsx)("div",{className:"pass-3d-instructions",children:(0,K.jsxs)("p",{children:[(0,K.jsx)("strong",{children:"Navigation :"})," Cliquez et faites glisser pour pivoter la vue. Utilisez la molette de la souris pour zoomer et d\xe9zoomer. Cliquez sur un marqueur pour afficher plus d'informations."]})})]}):(0,K.jsx)("div",{className:"pass-3d-error",children:"Aucune donn\xe9e disponible pour ce col"})},Y="2d",J="profile",Q="3d",Z=e=>{var s,i,t;let{passId:n}=e;const[r,l]=(0,a.useState)(null),[o,d]=(0,a.useState)(!0),[c,m]=(0,a.useState)(null),[h,x]=(0,a.useState)(Y),[p,u]=(0,a.useState)({longitude:2.3488,latitude:46.8534,zoom:9}),[g,j]=(0,a.useState)(null),[v,f]=(0,a.useState)([]);(0,a.useEffect)((()=>{d(!0),G.A.get(`/api/visualization/passes/${n}/visualization`).then((e=>{if("success"===e.data.status){if(l(e.data.data),e.data.data.coordinates){const s=Math.floor(e.data.data.coordinates.length/2);u({longitude:e.data.data.coordinates[s][0],latitude:e.data.data.coordinates[s][1],zoom:12})}}else m("Erreur lors du chargement des donn\xe9es")})).catch((e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es du col:",e),m(`Erreur lors de la r\xe9cup\xe9ration des donn\xe9es: ${e.message}`)})).finally((()=>{d(!1)}))}),[n]);const y=e=>{x(e)};return o?(0,K.jsx)("div",{className:"pass-visualizer-loading",children:"Chargement des donn\xe9es..."}):c?(0,K.jsxs)("div",{className:"pass-visualizer-error",children:["Erreur: ",c]}):r?(0,K.jsxs)("div",{className:"pass-visualizer-container",children:[(0,K.jsxs)("div",{className:"pass-visualizer-header",children:[(0,K.jsx)("h2",{children:r.name}),(0,K.jsxs)("div",{className:"pass-visualizer-info",children:[(0,K.jsxs)("div",{className:"info-item",children:[(0,K.jsx)("span",{className:"info-label",children:"Distance"}),(0,K.jsxs)("span",{className:"info-value",children:[r.length," km"]})]}),(0,K.jsxs)("div",{className:"info-item",children:[(0,K.jsx)("span",{className:"info-label",children:"D\xe9nivel\xe9"}),(0,K.jsxs)("span",{className:"info-value",children:[(null===(s=r.summary)||void 0===s?void 0:s.elevationGain)||0," m"]})]}),(0,K.jsxs)("div",{className:"info-item",children:[(0,K.jsx)("span",{className:"info-label",children:"Pente moyenne"}),(0,K.jsxs)("span",{className:"info-value",children:[(null===(i=r.summary)||void 0===i?void 0:i.averageGradient.toFixed(1))||0,"%"]})]}),(0,K.jsxs)("div",{className:"info-item",children:[(0,K.jsx)("span",{className:"info-label",children:"Pente max"}),(0,K.jsxs)("span",{className:"info-value",children:[(null===(t=r.summary)||void 0===t?void 0:t.maxGradient.toFixed(1))||0,"%"]})]}),(0,K.jsxs)("div",{className:"info-item",children:[(0,K.jsx)("span",{className:"info-label",children:"Difficult\xe9"}),(0,K.jsx)("span",{className:"info-value",children:r.difficulty})]})]})]}),(0,K.jsxs)("div",{className:"pass-visualizer-tabs",children:[(0,K.jsxs)("button",{className:h===Y?"active":"",onClick:()=>y(Y),children:[(0,K.jsx)("i",{className:"fas fa-map"})," Carte 2D"]}),(0,K.jsxs)("button",{className:h===J?"active":"",onClick:()=>y(J),children:[(0,K.jsx)("i",{className:"fas fa-chart-line"})," Profil d'\xe9l\xe9vation"]}),(0,K.jsxs)("button",{className:h===Q?"active":"",onClick:()=>y(Q),children:[(0,K.jsx)("i",{className:"fas fa-cube"})," Visualisation 3D"]})]}),(0,K.jsx)(E.A,{children:(0,K.jsx)(M.A,{timeout:300,classNames:"fade",children:(0,K.jsxs)("div",{className:"pass-visualizer-content",children:[h===Y&&(0,K.jsxs)("div",{className:"pass-visualizer-map",children:[(0,K.jsx)(z.Ay,{...p,onMove:e=>u(e.viewState),style:{width:"100%",height:"100%"},mapStyle:"mapbox://styles/mapbox/outdoors-v11",mapboxAccessToken:"YOUR_MAPBOX_TOKEN",children:r.keyPoints&&r.keyPoints.map(((e,s)=>(0,K.jsx)("div",{className:"map-marker",style:{left:`${e.x}px`,top:`${e.y}px`,backgroundColor:"start"===e.type?"#4CAF50":"summit"===e.type?"#F44336":"#2196F3"},children:(0,K.jsx)("div",{className:"map-marker-label",children:e.name})},s)))}),(0,K.jsxs)("div",{className:"map-legend",children:[(0,K.jsx)("h3",{children:"L\xe9gende"}),(0,K.jsx)("div",{className:"legend-items",children:r.colorScale&&r.colorScale.map(((e,s)=>(0,K.jsxs)("div",{className:"legend-item",children:[(0,K.jsx)("span",{className:"legend-color",style:{backgroundColor:e.color}}),(0,K.jsxs)("span",{className:"legend-label",children:[e.gradient," - ",e.difficulty]})]},s)))})]}),v.map(((e,s)=>(0,K.jsxs)("div",{className:`map-annotation ${e.type}`,style:{left:e.x,top:e.y},children:[(0,K.jsx)("div",{className:"annotation-marker"}),(0,K.jsxs)("div",{className:"annotation-content",children:[(0,K.jsx)("h4",{children:e.title}),(0,K.jsx)("p",{children:e.content})]})]},s)))]}),h===J&&(0,K.jsxs)("div",{className:"pass-visualizer-profile",children:[(0,K.jsx)("div",{className:"profile-chart",children:(0,K.jsx)(F.u,{width:"100%",height:400,children:(0,K.jsxs)(D.b,{data:r&&r.elevationProfile?r.elevationProfile.map((e=>({distance:e[0],elevation:e[1],gradient:e[2]||0}))):[],margin:{top:20,right:30,left:20,bottom:30},onClick:e=>{e&&e.activePayload&&e.activePayload[0]&&(e=>{if(j(e),r&&r.coordinates){const s=r.coordinates.reduce(((s,i,a)=>{const t=Math.abs(i[2]-e.distance);return t<s.distance?{index:a,distance:t,coords:[i[0],i[1]]}:s}),{index:0,distance:1/0,coords:[0,0]});u({...p,longitude:s.coords[0],latitude:s.coords[1],zoom:14})}})(e.activePayload[0].payload)},children:[(0,K.jsx)(R.d,{strokeDasharray:"3 3"}),(0,K.jsx)(I.W,{dataKey:"distance",label:{value:"Distance (km)",position:"insideBottom",offset:-10}}),(0,K.jsx)(T.h,{label:{value:"Altitude (m)",angle:-90,position:"insideLeft"}}),(0,K.jsx)(W.m,{formatter:(e,s,i)=>"elevation"===s?[`${e} m`,"Altitude"]:"gradient"===s?[`${e}%`,"Pente"]:[e,s]}),(0,K.jsx)($.N,{type:"monotone",dataKey:"elevation",stroke:"#8884d8",dot:!1,strokeWidth:3,isAnimationActive:!1}),r.segmentsByDifficulty&&r.segmentsByDifficulty.flatMap((e=>e.segments.map(((s,i)=>(0,K.jsx)($.N,{type:"monotone",dataKey:"elevation",stroke:e.color,strokeWidth:5,dot:!1,activeDot:!1,isAnimationActive:!1,name:`${e.difficulty} (${s.avgGradient.toFixed(1)}%)`},`${e.difficulty}-${i}`)))))]})})}),g&&(0,K.jsxs)("div",{className:"profile-point-info",children:[(0,K.jsx)("h3",{children:"Point s\xe9lectionn\xe9"}),(0,K.jsxs)("div",{className:"point-details",children:[(0,K.jsxs)("div",{className:"detail-item",children:[(0,K.jsx)("span",{className:"detail-label",children:"Distance"}),(0,K.jsxs)("span",{className:"detail-value",children:[g.distance.toFixed(1)," km"]})]}),(0,K.jsxs)("div",{className:"detail-item",children:[(0,K.jsx)("span",{className:"detail-label",children:"Altitude"}),(0,K.jsxs)("span",{className:"detail-value",children:[g.elevation," m"]})]}),(0,K.jsxs)("div",{className:"detail-item",children:[(0,K.jsx)("span",{className:"detail-label",children:"Pente"}),(0,K.jsxs)("span",{className:"detail-value",children:[g.gradient.toFixed(1),"%"]})]})]})]}),(0,K.jsxs)("div",{className:"profile-key-segments",children:[(0,K.jsx)("h3",{children:"Segments cl\xe9s"}),(0,K.jsx)("div",{className:"segments-list",children:r.keyPoints&&r.keyPoints.filter((e=>"key_segment"===e.type)).map(((e,s)=>(0,K.jsxs)("div",{className:`segment-item severity-${e.severity}`,children:[(0,K.jsxs)("div",{className:"segment-header",children:[(0,K.jsx)("h4",{children:e.name}),(0,K.jsxs)("span",{className:"segment-gradient",children:[e.gradient.toFixed(1),"%"]})]}),(0,K.jsxs)("div",{className:"segment-details",children:[(0,K.jsxs)("span",{children:["Du km ",e.distanceStart.toFixed(1)," au km ",e.distanceEnd.toFixed(1)]}),(0,K.jsxs)("span",{children:["Longueur: ",e.length.toFixed(1)," km"]})]})]},s)))})]})]}),h===Q&&(0,K.jsx)("div",{className:"pass-visualizer-3d",children:(0,K.jsx)(H,{passId:n})})]})},h)}),(0,K.jsxs)("div",{className:"pass-visualizer-actions",children:[(0,K.jsx)("button",{className:"btn-secondary",onClick:()=>window.history.back(),children:"Retour \xe0 la liste"}),(0,K.jsx)("button",{className:"btn-primary",children:"Ajouter \xe0 mon itin\xe9raire"}),(0,K.jsx)("button",{className:"btn-secondary",children:"T\xe9l\xe9charger GPX"}),(0,K.jsx)("button",{className:"btn-secondary",children:"Comparer avec un autre col"})]})]}):(0,K.jsx)("div",{className:"pass-visualizer-error",children:"Aucune donn\xe9e disponible pour ce col"})};var ee=i(10961),se=i(69089),ie=i(35682),ae=i(57650),te=i(38781),ne=i.n(te),re=i(60527),le=i(71806),oe=i(39948),de=i(42518),ce=i(84882),me=i(28076),he=i(10039),xe=i(73460),pe=i(94327),ue=i(3044),ge=i(15415),je=i(57875),ve=i(28994);const fe=e=>{let{passId1:s,passId2:i}=e;const[l,o]=(0,a.useState)(null),[d,c]=(0,a.useState)(!0),[x,g]=(0,a.useState)(null),[f,y]=(0,a.useState)("elevation"),b=(0,a.useRef)(null),[A,k]=(0,a.useState)(!1),[N,C]=(0,a.useState)(null);(0,a.useEffect)((()=>{c(!0),G.A.get(`/api/visualization/passes/compare/${s}/${i}`).then((e=>{"success"===e.data.status?o(e.data.data):g("Erreur lors du chargement des donn\xe9es")})).catch((e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es de comparaison",e),g(`Erreur lors de la r\xe9cup\xe9ration des donn\xe9es: ${e.message}`)})).finally((()=>{c(!1)}))}),[s,i]);const w=(0,v.Ay)(t.A)((e=>{let{theme:s}=e;return{padding:s.spacing(1)}})),S=(0,v.Ay)(t.A)((e=>{let{theme:s}=e;return{height:"400px",marginTop:s.spacing(3),marginBottom:s.spacing(3),borderRadius:s.shape.borderRadius,overflow:"hidden",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.05)",backgroundColor:s.palette.background.paper}})),P=((0,v.Ay)(t.A)((e=>{let{theme:s}=e;return{padding:s.spacing(3,0)}})),(0,v.Ay)(n.A)((e=>{let{theme:s}=e;return{marginBottom:s.spacing(2),"& .MuiTabs-indicator":{height:3,borderTopLeftRadius:3,borderTopRightRadius:3}}}))),B=(0,v.Ay)(le.A)((e=>{let{theme:s}=e;return{".positive":{color:s.palette.success.main,fontWeight:"bold"},".negative":{color:s.palette.error.main,fontWeight:"bold"},th:{fontWeight:"bold",backgroundColor:"light"===s.palette.mode?s.palette.grey[100]:s.palette.grey[800]}}})),z=(0,v.Ay)(t.A)((e=>{let{theme:s}=e;return{display:"flex",justifyContent:"flex-end",gap:s.spacing(1),marginBottom:s.spacing(2)}})),E=(0,v.Ay)(j.A)((e=>{let{theme:s}=e;return{padding:s.spacing(2),marginBottom:s.spacing(2),borderRadius:s.shape.borderRadius,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)",display:"flex",flexDirection:"column",gap:s.spacing(1)}})),M=(0,v.Ay)(t.A)((e=>{let{theme:s}=e;return{display:"flex",alignItems:"center",gap:s.spacing(1)}}));if(d)return(0,K.jsx)(t.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:400},children:(0,K.jsx)(m.A,{})});if(x)return(0,K.jsx)(h.A,{severity:"error",sx:{my:2},children:x});if(!l)return(0,K.jsx)(h.A,{severity:"info",sx:{my:2},children:"Donn\xe9es non disponibles pour la comparaison"});const{pass1:L,pass2:V,comparison:U}=l,q=[`${L.name} ${U.length.difference>0?"est plus long de":"est plus court de"} ${Math.abs(U.length.difference).toFixed(1)} km par rapport \xe0 ${V.name}.`,`Le d\xe9nivel\xe9 de ${L.name} est ${U.elevationGain.difference>0?"sup\xe9rieur de":"inf\xe9rieur de"} ${Math.abs(U.elevationGain.difference)} m.`,`${U.difficulty.comparison}`,`${L.name} pr\xe9sente des segments ${Object.keys(U.segmentsByDifficulty).length>0?Object.keys(U.segmentsByDifficulty).reduce(((e,s)=>U.segmentsByDifficulty[s].percentagePass1>U.segmentsByDifficulty[s].percentagePass2?`${e}${e?" et ":""}plus ${s}`:e),""):""}.`];return(0,K.jsxs)(w,{ref:b,children:[(0,K.jsxs)(p.A,{variant:"h4",gutterBottom:!0,children:["Comparaison : ",L.name," vs ",V.name]}),(0,K.jsx)(z,{children:(0,K.jsxs)(oe.A,{variant:"outlined",size:"small",children:[(0,K.jsx)(de.A,{startIcon:(0,K.jsx)(ue.A,{}),onClick:()=>{b.current&&ne()(b.current,{scale:2,logging:!1,useCORS:!0}).then((e=>{const s=e.toDataURL("image/png"),i=new re.uE("l","mm","a4"),a=i.internal.pageSize.getWidth(),t=i.internal.pageSize.getHeight(),n=e.width,r=e.height,o=Math.min(a/n,t/r),d=(a-n*o)/2;i.setFontSize(18),i.text(`Comparaison: ${l.pass1.name} vs. ${l.pass2.name}`,14,20),i.addImage(s,"PNG",d,30,n*o,r*o),i.save(`Comparaison-${l.pass1.name}-${l.pass2.name}.pdf`)}))},children:"Exporter en PDF"}),(0,K.jsx)(de.A,{startIcon:(0,K.jsx)(pe.A,{}),onClick:()=>{b.current&&ne()(b.current,{scale:2,logging:!1,useCORS:!0}).then((e=>{const s=document.createElement("a");s.download=`Comparaison-${l.pass1.name}-${l.pass2.name}.png`,s.href=e.toDataURL("image/png"),s.click()}))},children:"Exporter en image"})]})}),(0,K.jsxs)(P,{value:f,onChange:(e,s)=>y(s),indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"onglets de comparaison",sx:{mb:3},children:[(0,K.jsx)(r.A,{label:"Profil d'\xe9l\xe9vation",value:"elevation",icon:(0,K.jsx)(ge.A,{}),iconPosition:"start"}),(0,K.jsx)(r.A,{label:"Segments",value:"segments",icon:(0,K.jsx)(je.A,{}),iconPosition:"start"}),(0,K.jsx)(r.A,{label:"M\xe9triques",value:"metrics",icon:(0,K.jsx)(ve.A,{}),iconPosition:"start"})]}),"elevation"===f&&(0,K.jsx)(S,{children:(0,K.jsx)(F.u,{width:"100%",height:"100%",children:(0,K.jsxs)(D.b,{data:(()=>{if(!l)return[];const e=l.pass1,s=l.pass2,i=(e,s)=>{if(!e||0===e.length)return[];const i=[],a=e.length/s;for(let t=0;t<s;t++){const s=Math.floor(t*a);e[s]&&i.push(e[s])}return i},a=100,t=i(e.visualization.elevationProfile,a),n=i(s.visualization.elevationProfile,a);return Array.from({length:a},((e,s)=>{const i=t[s]||[0,0],r=n[s]||[0,0];return{distance:(s/a*100).toFixed(1)+"%",elevation1:i[1],elevation2:r[1]}}))})(),margin:{top:20,right:30,left:20,bottom:10},onMouseMove:e=>{e&&e.activePayload&&C(e.activePayload[0].payload)},onMouseLeave:()=>C(null),children:[(0,K.jsx)(R.d,{strokeDasharray:"3 3",opacity:.5}),(0,K.jsx)(I.W,{dataKey:"distance",label:{value:"Progression (%)",position:"insideBottomRight",offset:-5}}),(0,K.jsx)(T.h,{label:{value:"Altitude (m)",angle:-90,position:"insideLeft",style:{textAnchor:"middle"}}}),(0,K.jsx)(W.m,{content:e=>{let{active:s,payload:i}=e;return s&&i&&i.length?(0,K.jsxs)(j.A,{elevation:3,sx:{p:1.5,backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:1,boxShadow:"0 3px 14px rgba(0, 0, 0, 0.15)",borderLeft:"4px solid",borderColor:"primary.main"},children:[(0,K.jsxs)(p.A,{variant:"subtitle2",children:["Distance: ",i[0].payload.distance]}),(0,K.jsxs)(p.A,{variant:"body2",sx:{color:"#8884d8",fontWeight:"bold"},children:[L.name,": ",i[0].value," m"]}),(0,K.jsxs)(p.A,{variant:"body2",sx:{color:"#82ca9d",fontWeight:"bold"},children:[V.name,": ",i[1].value," m"]}),(0,K.jsxs)(p.A,{variant:"caption",sx:{color:"text.secondary",pt:.5,display:"block"},children:["Diff\xe9rence: ",Math.abs(i[0].value-i[1].value)," m"]})]}):null}}),(0,K.jsx)(ee.s,{payload:[{value:L.name,type:"line",color:"#8884d8"},{value:V.name,type:"line",color:"#82ca9d"}],wrapperStyle:{paddingTop:10}}),(0,K.jsx)($.N,{type:"monotone",dataKey:"elevation1",stroke:"#8884d8",strokeWidth:3,activeDot:{r:8,strokeWidth:0,fill:"#8884d8"},dot:!1,name:L.name}),(0,K.jsx)($.N,{type:"monotone",dataKey:"elevation2",stroke:"#82ca9d",strokeWidth:3,activeDot:{r:8,strokeWidth:0,fill:"#82ca9d"},dot:!1,name:V.name}),l&&l.comparison.criticalPoints&&l.comparison.criticalPoints.map(((e,s)=>(0,K.jsx)(se.e,{x:e.distance+"%",stroke:"#ff7300",strokeWidth:2,strokeDasharray:"5 5",label:{value:e.name,position:"top",fill:"#ff7300",fontSize:12,fontWeight:"bold"}},s)))]})})}),"segments"===f&&(0,K.jsx)(S,{children:(0,K.jsx)(F.u,{width:"100%",height:"100%",children:(0,K.jsxs)(ie.E,{data:(()=>{if(!l)return[];const e=l.comparison.segmentsByDifficulty;return Object.keys(e).map((s=>({difficulty:s,pass1:e[s].percentagePass1,pass2:e[s].percentagePass2})))})(),margin:{top:20,right:30,left:20,bottom:5},children:[(0,K.jsx)(R.d,{strokeDasharray:"3 3",opacity:.5}),(0,K.jsx)(I.W,{dataKey:"difficulty",label:{value:"Niveau de difficult\xe9",position:"insideBottomRight",offset:-5}}),(0,K.jsx)(T.h,{label:{value:"Pourcentage du parcours (%)",angle:-90,position:"insideLeft",style:{textAnchor:"middle"}}}),(0,K.jsx)(W.m,{content:e=>{let{active:s,payload:i,label:a}=e;return s&&i&&i.length?(0,K.jsxs)(j.A,{elevation:3,sx:{p:1.5,backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:1,boxShadow:"0 3px 14px rgba(0, 0, 0, 0.15)",borderLeft:"4px solid",borderColor:"primary.main"},children:[(0,K.jsxs)(p.A,{variant:"subtitle2",children:["Difficult\xe9: ",a]}),(0,K.jsxs)(p.A,{variant:"body2",sx:{color:"#8884d8",fontWeight:"bold"},children:[L.name,": ",i[0].value.toFixed(1),"%"]}),(0,K.jsxs)(p.A,{variant:"body2",sx:{color:"#82ca9d",fontWeight:"bold"},children:[V.name,": ",i[1].value.toFixed(1),"%"]}),(0,K.jsxs)(p.A,{variant:"caption",sx:{color:"text.secondary",pt:.5,display:"block"},children:["Diff\xe9rence: ",Math.abs(i[0].value-i[1].value).toFixed(1),"%"]})]}):null}}),(0,K.jsx)(ee.s,{payload:[{value:L.name,type:"rect",color:"#8884d8"},{value:V.name,type:"rect",color:"#82ca9d"}]}),(0,K.jsx)(ae.y,{dataKey:"pass1",fill:"#8884d8",name:L.name,radius:[4,4,0,0]}),(0,K.jsx)(ae.y,{dataKey:"pass2",fill:"#82ca9d",name:V.name,radius:[4,4,0,0]})]})})}),"metrics"===f&&(0,K.jsx)(S,{children:(0,K.jsx)(F.u,{width:"100%",height:"100%",children:(0,K.jsxs)(ie.E,{data:(()=>{if(!l)return[];const{length:e,elevationGain:s,averageGradient:i,maxGradient:a}=l.comparison;return[{name:"Longueur (km)",pass1:e.pass1,pass2:e.pass2},{name:"D\xe9nivel\xe9 (m)",pass1:s.pass1,pass2:s.pass2},{name:"Pente moy. (%)",pass1:i.pass1,pass2:i.pass2},{name:"Pente max. (%)",pass1:a.pass1,pass2:a.pass2}]})(),margin:{top:20,right:30,left:20,bottom:5},layout:"vertical",children:[(0,K.jsx)(R.d,{strokeDasharray:"3 3",opacity:.5,horizontal:!0,vertical:!1}),(0,K.jsx)(I.W,{type:"number"}),(0,K.jsx)(T.h,{type:"category",dataKey:"name",width:150,tickLine:!1,axisLine:!1}),(0,K.jsx)(W.m,{content:e=>{let{active:s,payload:i,label:a}=e;if(s&&i&&i.length){let e="";return a.includes("Longueur")?e=" km":a.includes("D\xe9nivel\xe9")?e=" m":a.includes("Pente")&&(e="%"),(0,K.jsxs)(j.A,{elevation:3,sx:{p:1.5,backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:1,boxShadow:"0 3px 14px rgba(0, 0, 0, 0.15)",borderLeft:"4px solid",borderColor:"primary.main"},children:[(0,K.jsx)(p.A,{variant:"subtitle2",children:a}),(0,K.jsxs)(p.A,{variant:"body2",sx:{color:"#8884d8",fontWeight:"bold"},children:[L.name,": ",i[0].value,e]}),(0,K.jsxs)(p.A,{variant:"body2",sx:{color:"#82ca9d",fontWeight:"bold"},children:[V.name,": ",i[1].value,e]}),(0,K.jsxs)(p.A,{variant:"caption",sx:{color:"text.secondary",pt:.5,display:"block"},children:["Diff\xe9rence: ",Math.abs(i[0].value-i[1].value).toFixed(1),e]})]})}return null}}),(0,K.jsx)(ee.s,{payload:[{value:L.name,type:"rect",color:"#8884d8"},{value:V.name,type:"rect",color:"#82ca9d"}]}),(0,K.jsx)(ae.y,{dataKey:"pass1",fill:"#8884d8",name:L.name,radius:[0,4,4,0]}),(0,K.jsx)(ae.y,{dataKey:"pass2",fill:"#82ca9d",name:V.name,radius:[0,4,4,0]})]})})}),(0,K.jsxs)(u.Ay,{container:!0,spacing:3,sx:{mt:2},children:[(0,K.jsx)(u.Ay,{item:!0,xs:12,md:6,children:(0,K.jsxs)(E,{children:[(0,K.jsx)(p.A,{variant:"h6",component:"h3",gutterBottom:!0,color:"primary",children:L.name}),(0,K.jsxs)(M,{children:[(0,K.jsx)(t.A,{sx:{bgcolor:"primary.light",p:1,borderRadius:2,minWidth:40,textAlign:"center"},children:(0,K.jsx)(p.A,{variant:"body2",fontWeight:"bold",color:"primary.contrastText",children:U.difficulty.pass1})}),(0,K.jsx)(p.A,{variant:"body1",children:"Difficult\xe9 globale"})]}),(0,K.jsxs)(t.A,{sx:{display:"flex",flexWrap:"wrap",gap:2,my:1},children:[(0,K.jsxs)(p.A,{variant:"body2",sx:{display:"flex",alignItems:"center",mr:2},children:[(0,K.jsx)("i",{className:"fas fa-ruler-combined",style:{marginRight:"8px"}}),U.length.pass1," km"]}),(0,K.jsxs)(p.A,{variant:"body2",sx:{display:"flex",alignItems:"center",mr:2},children:[(0,K.jsx)("i",{className:"fas fa-mountain",style:{marginRight:"8px"}}),U.elevationGain.pass1," m D+"]}),(0,K.jsxs)(p.A,{variant:"body2",sx:{display:"flex",alignItems:"center",mr:2},children:[(0,K.jsx)("i",{className:"fas fa-angle-up",style:{marginRight:"8px"}}),U.averageGradient.pass1.toFixed(1),"% moyenne"]}),(0,K.jsxs)(p.A,{variant:"body2",sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)("i",{className:"fas fa-angle-double-up",style:{marginRight:"8px"}}),U.maxGradient.pass1.toFixed(1),"% max"]})]}),L.keyPoints&&(0,K.jsxs)(t.A,{mt:1,children:[(0,K.jsx)(p.A,{variant:"subtitle2",gutterBottom:!0,children:"Points cl\xe9s:"}),(0,K.jsx)(t.A,{component:"ul",sx:{pl:2,mb:0,mt:.5},children:L.keyPoints.map(((e,s)=>(0,K.jsx)(p.A,{component:"li",variant:"body2",children:e},s)))})]})]})}),(0,K.jsx)(u.Ay,{item:!0,xs:12,md:6,children:(0,K.jsxs)(E,{children:[(0,K.jsx)(p.A,{variant:"h6",component:"h3",gutterBottom:!0,color:"secondary",children:V.name}),(0,K.jsxs)(M,{children:[(0,K.jsx)(t.A,{sx:{bgcolor:"secondary.light",p:1,borderRadius:2,minWidth:40,textAlign:"center"},children:(0,K.jsx)(p.A,{variant:"body2",fontWeight:"bold",color:"secondary.contrastText",children:U.difficulty.pass2})}),(0,K.jsx)(p.A,{variant:"body1",children:"Difficult\xe9 globale"})]}),(0,K.jsxs)(t.A,{sx:{display:"flex",flexWrap:"wrap",gap:2,my:1},children:[(0,K.jsxs)(p.A,{variant:"body2",sx:{display:"flex",alignItems:"center",mr:2},children:[(0,K.jsx)("i",{className:"fas fa-ruler-combined",style:{marginRight:"8px"}}),U.length.pass2," km"]}),(0,K.jsxs)(p.A,{variant:"body2",sx:{display:"flex",alignItems:"center",mr:2},children:[(0,K.jsx)("i",{className:"fas fa-mountain",style:{marginRight:"8px"}}),U.elevationGain.pass2," m D+"]}),(0,K.jsxs)(p.A,{variant:"body2",sx:{display:"flex",alignItems:"center",mr:2},children:[(0,K.jsx)("i",{className:"fas fa-angle-up",style:{marginRight:"8px"}}),U.averageGradient.pass2.toFixed(1),"% moyenne"]}),(0,K.jsxs)(p.A,{variant:"body2",sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)("i",{className:"fas fa-angle-double-up",style:{marginRight:"8px"}}),U.maxGradient.pass2.toFixed(1),"% max"]})]}),V.keyPoints&&(0,K.jsxs)(t.A,{mt:1,children:[(0,K.jsx)(p.A,{variant:"subtitle2",gutterBottom:!0,children:"Points cl\xe9s:"}),(0,K.jsx)(t.A,{component:"ul",sx:{pl:2,mb:0,mt:.5},children:V.keyPoints.map(((e,s)=>(0,K.jsx)(p.A,{component:"li",variant:"body2",children:e},s)))})]})]})})]}),(0,K.jsxs)(t.A,{mt:4,mb:3,children:[(0,K.jsx)(p.A,{variant:"h6",gutterBottom:!0,children:"Tableau comparatif"}),(0,K.jsxs)(B,{children:[(0,K.jsx)(ce.A,{children:(0,K.jsxs)(me.A,{children:[(0,K.jsx)(he.A,{children:"M\xe9trique"}),(0,K.jsx)(he.A,{children:L.name}),(0,K.jsx)(he.A,{children:V.name}),(0,K.jsx)(he.A,{children:"Diff\xe9rence"})]})}),(0,K.jsxs)(xe.A,{children:[(0,K.jsxs)(me.A,{children:[(0,K.jsx)(he.A,{children:"Longueur"}),(0,K.jsxs)(he.A,{children:[U.length.pass1," km"]}),(0,K.jsxs)(he.A,{children:[U.length.pass2," km"]}),(0,K.jsxs)(he.A,{className:U.length.difference>0?"positive":"negative",children:[Math.abs(U.length.difference).toFixed(1)," km ",U.length.difference>0?"de plus":"de moins"]})]}),(0,K.jsxs)(me.A,{children:[(0,K.jsx)(he.A,{children:"D\xe9nivel\xe9"}),(0,K.jsxs)(he.A,{children:[U.elevationGain.pass1," m"]}),(0,K.jsxs)(he.A,{children:[U.elevationGain.pass2," m"]}),(0,K.jsxs)(he.A,{className:U.elevationGain.difference>0?"positive":"negative",children:[Math.abs(U.elevationGain.difference)," m ",U.elevationGain.difference>0?"de plus":"de moins"]})]}),(0,K.jsxs)(me.A,{children:[(0,K.jsx)(he.A,{children:"Pente moyenne"}),(0,K.jsxs)(he.A,{children:[U.averageGradient.pass1.toFixed(1)," %"]}),(0,K.jsxs)(he.A,{children:[U.averageGradient.pass2.toFixed(1)," %"]}),(0,K.jsxs)(he.A,{className:U.averageGradient.difference>0?"positive":"negative",children:[Math.abs(U.averageGradient.difference).toFixed(1)," % ",U.averageGradient.difference>0?"de plus":"de moins"]})]}),(0,K.jsxs)(me.A,{children:[(0,K.jsx)(he.A,{children:"Pente maximale"}),(0,K.jsxs)(he.A,{children:[U.maxGradient.pass1.toFixed(1)," %"]}),(0,K.jsxs)(he.A,{children:[U.maxGradient.pass2.toFixed(1)," %"]}),(0,K.jsxs)(he.A,{className:U.maxGradient.difference>0?"positive":"negative",children:[Math.abs(U.maxGradient.difference).toFixed(1)," % ",U.maxGradient.difference>0?"de plus":"de moins"]})]}),(0,K.jsxs)(me.A,{children:[(0,K.jsx)(he.A,{children:"Difficult\xe9"}),(0,K.jsx)(he.A,{children:U.difficulty.pass1}),(0,K.jsx)(he.A,{children:U.difficulty.pass2}),(0,K.jsx)(he.A,{children:U.difficulty.comparison})]})]})]})]}),(0,K.jsxs)(t.A,{mt:4,children:[(0,K.jsx)(p.A,{variant:"h6",gutterBottom:!0,children:"Analyse comparative pour cyclistes"}),(0,K.jsxs)(j.A,{elevation:1,sx:{p:3,backgroundColor:"background.paper",borderRadius:2},children:[q.map(((e,s)=>(0,K.jsx)(p.A,{paragraph:!0,mb:s===q.length-1?0:2,children:e},s))),(0,K.jsxs)(t.A,{mt:3,p:2,sx:{backgroundColor:"action.hover",borderRadius:1,border:"1px solid",borderColor:"divider"},children:[(0,K.jsx)(p.A,{variant:"subtitle2",gutterBottom:!0,children:"Recommandation pour cyclistes:"}),(0,K.jsxs)(p.A,{variant:"body2",children:[L.name," est ",U.recommendedFor.pass1]}),(0,K.jsxs)(p.A,{variant:"body2",children:[V.name," est ",U.recommendedFor.pass2]})]})]})]})]})},ye={rain:{icon:"\ud83c\udf27\ufe0f",color:"#3498db",text:"Pluie"},wind:{icon:"\ud83d\udca8",color:"#7f8c8d",text:"Vent"},cold:{icon:"\u2744\ufe0f",color:"#9b59b6",text:"Froid"},heat:{icon:"\ud83d\udd25",color:"#e74c3c",text:"Chaleur"},storm:{icon:"\u26a1",color:"#f39c12",text:"Orage"}},be=e=>{let{issues:s}=e;return s&&0!==s.length?(0,K.jsxs)("div",{className:"route-weather-conditions unfavorable",children:[(0,K.jsx)("div",{className:"weather-icons",children:s.map(((e,s)=>{var i,a;return(0,K.jsx)("div",{className:"weather-icon",style:{backgroundColor:null===(i=ye[e.type])||void 0===i?void 0:i.color},children:null===(a=ye[e.type])||void 0===a?void 0:a.icon},s)}))}),(0,K.jsxs)("div",{className:"weather-info",children:[(0,K.jsx)("h4",{children:"Conditions d\xe9favorables"}),(0,K.jsx)("ul",{children:s.map(((e,s)=>(0,K.jsx)("li",{className:`severity-${e.severity}`,children:e.description},s)))})]})]}):(0,K.jsxs)("div",{className:"route-weather-conditions favorable",children:[(0,K.jsx)("div",{className:"weather-icon",children:"\u2600\ufe0f"}),(0,K.jsxs)("div",{className:"weather-info",children:[(0,K.jsx)("h4",{children:"Conditions favorables"}),(0,K.jsx)("p",{children:"Aucun probl\xe8me m\xe9t\xe9o identifi\xe9 pour cet itin\xe9raire"})]})]})},Ae=e=>{let{routeId:s}=e;const[i,t]=(0,a.useState)(null),[n,r]=(0,a.useState)(!0),[l,o]=(0,a.useState)(null),[d,c]=(0,a.useState)("weather"),[m,h]=(0,a.useState)(0),[x,p]=(0,a.useState)({longitude:2.3488,latitude:46.8534,zoom:6}),[u,g]=(0,a.useState)({precipitation:18,temperature:28,windSpeed:35,stormRisk:!1}),[j,v]=(0,a.useState)({level:"intermediate",withChildren:!1,preferences:["cultural","landscape"]});(0,a.useEffect)((()=>{r(!0),G.A.get(`/api/route-alternatives/${s}/weather-alternatives`,{params:u}).then((e=>{"success"===e.data.status?t((s=>({...s,weather:e.data.data}))):console.error("Erreur dans la r\xe9ponse:",e.data)})).catch((e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des alternatives m\xe9t\xe9o:",e),o(`Erreur lors de la r\xe9cup\xe9ration des alternatives: ${e.message}`)})).finally((()=>{r(!1)}))}),[s,u]),(0,a.useEffect)((()=>{r(!0),G.A.post(`/api/route-alternatives/${s}/profile-variants`,j).then((e=>{"success"===e.data.status?t((s=>({...s,profile:e.data.data}))):console.error("Erreur dans la r\xe9ponse:",e.data)})).catch((e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des variantes de profil:",e),o(`Erreur lors de la r\xe9cup\xe9ration des variantes: ${e.message}`)})).finally((()=>{r(!1)}))}),[s,j]);const f=(e,s)=>{g((i=>({...i,[e]:s})))},y=(e,s)=>{v((i=>{if("preferences"===e){const e=i.preferences.includes(s)?i.preferences.filter((e=>e!==s)):[...i.preferences,s];return{...i,preferences:e}}return{...i,[e]:s}}))},b=(()=>{return i?"weather"===d?[null===(e=i.weather)||void 0===e?void 0:e.originalRoute,...(null===(s=i.weather)||void 0===s?void 0:s.alternatives)||[]].filter(Boolean):"profile"===d?[null===(a=i.profile)||void 0===a?void 0:a.originalRoute,...(null===(t=i.profile)||void 0===t?void 0:t.variants)||[]].filter(Boolean):[]:[];var e,s,a,t})(),A=b[m]||null;return(0,a.useEffect)((()=>{A&&A.boundingBox&&p({longitude:(A.boundingBox[0]+A.boundingBox[2])/2,latitude:(A.boundingBox[1]+A.boundingBox[3])/2,zoom:10})}),[m,A]),n&&!i?(0,K.jsx)("div",{className:"route-alternatives-loading",children:"Chargement des alternatives..."}):l?(0,K.jsxs)("div",{className:"route-alternatives-error",children:["Erreur: ",l]}):(0,K.jsxs)("div",{className:"route-alternatives-container",children:[(0,K.jsxs)("div",{className:"route-alternatives-header",children:[(0,K.jsx)("h2",{children:"Alternatives d'itin\xe9raires"}),(0,K.jsxs)("div",{className:"route-alternatives-tabs",children:[(0,K.jsx)("button",{className:"weather"===d?"active":"",onClick:()=>c("weather"),children:"Alternatives m\xe9t\xe9o"}),(0,K.jsx)("button",{className:"profile"===d?"active":"",onClick:()=>c("profile"),children:"Variantes de profil"})]})]}),"weather"===d&&(0,K.jsxs)("div",{className:"weather-controls",children:[(0,K.jsx)("h3",{children:"Conditions m\xe9t\xe9o actuelles"}),(0,K.jsxs)("div",{className:"weather-sliders",children:[(0,K.jsxs)("div",{className:"weather-slider",children:[(0,K.jsxs)("label",{children:["Pr\xe9cipitation (mm): ",u.precipitation,"mm"]}),(0,K.jsx)("input",{type:"range",min:"0",max:"50",value:u.precipitation,onChange:e=>f("precipitation",parseInt(e.target.value))})]}),(0,K.jsxs)("div",{className:"weather-slider",children:[(0,K.jsxs)("label",{children:["Temp\xe9rature (\xb0C): ",u.temperature,"\xb0C"]}),(0,K.jsx)("input",{type:"range",min:"-10",max:"40",value:u.temperature,onChange:e=>f("temperature",parseInt(e.target.value))})]}),(0,K.jsxs)("div",{className:"weather-slider",children:[(0,K.jsxs)("label",{children:["Vitesse du vent (km/h): ",u.windSpeed,"km/h"]}),(0,K.jsx)("input",{type:"range",min:"0",max:"100",value:u.windSpeed,onChange:e=>f("windSpeed",parseInt(e.target.value))})]}),(0,K.jsx)("div",{className:"weather-checkbox",children:(0,K.jsxs)("label",{children:[(0,K.jsx)("input",{type:"checkbox",checked:u.stormRisk,onChange:e=>f("stormRisk",e.target.checked)}),"Risque d'orage"]})})]}),(null===i||void 0===i?void 0:i.weather)&&(0,K.jsx)(be,{issues:i.weather.weatherIssues||[]})]}),"profile"===d&&(0,K.jsxs)("div",{className:"profile-controls",children:[(0,K.jsx)("h3",{children:"Votre profil"}),(0,K.jsxs)("div",{className:"profile-selectors",children:[(0,K.jsxs)("div",{className:"profile-selector",children:[(0,K.jsx)("label",{children:"Niveau"}),(0,K.jsx)("div",{className:"profile-buttons",children:["beginner","intermediate","advanced","expert"].map((e=>(0,K.jsx)("button",{className:j.level===e?"active":"",onClick:()=>y("level",e),children:"beginner"===e?"D\xe9butant":"intermediate"===e?"Interm\xe9diaire":"advanced"===e?"Avanc\xe9":"Expert"},e)))})]}),(0,K.jsxs)("div",{className:"profile-selector",children:[(0,K.jsx)("label",{children:"Voyagez-vous avec des enfants?"}),(0,K.jsxs)("div",{className:"profile-buttons",children:[(0,K.jsx)("button",{className:j.withChildren?"active":"",onClick:()=>y("withChildren",!0),children:"Oui"}),(0,K.jsx)("button",{className:j.withChildren?"":"active",onClick:()=>y("withChildren",!1),children:"Non"})]})]}),(0,K.jsxs)("div",{className:"profile-selector",children:[(0,K.jsx)("label",{children:"Pr\xe9f\xe9rences (s\xe9lectionnez-en plusieurs)"}),(0,K.jsx)("div",{className:"profile-buttons",children:[{id:"cultural",label:"Culture"},{id:"performance",label:"Performance"},{id:"relaxed",label:"D\xe9tente"},{id:"landscape",label:"Paysages"}].map((e=>(0,K.jsx)("button",{className:j.preferences.includes(e.id)?"active":"",onClick:()=>y("preferences",e.id),children:e.label},e.id)))})]})]}),(null===i||void 0===i?void 0:i.profile)&&(0,K.jsxs)("div",{className:"recommended-profile",children:[(0,K.jsx)("h4",{children:"Profil recommand\xe9 pour vous: "}),(0,K.jsx)("span",{className:"recommended-type",children:"sportive"===i.profile.recommendedType?"Sportif":"touristic"===i.profile.recommendedType?"Touristique":"Famille"})]})]}),(0,K.jsxs)("div",{className:"route-comparison-container",children:[(0,K.jsxs)("div",{className:"route-list",children:[(0,K.jsx)("h3",{children:"Itin\xe9raires disponibles"}),(0,K.jsx)("div",{className:"route-buttons",children:b.map(((e,s)=>(0,K.jsxs)("button",{className:`route-button ${m===s?"active":""} ${e.type||""}`,onClick:()=>h(s),children:[(0,K.jsx)("span",{className:"route-name",children:e.name}),e.reason&&(0,K.jsx)("span",{className:"route-reason",children:e.reason}),e.suitability&&(0,K.jsxs)("div",{className:"route-suitability",children:[(0,K.jsx)("div",{className:"suitability-bar",style:{width:`${e.suitability.score}%`}}),(0,K.jsx)("span",{className:"suitability-text",children:e.suitability.description})]})]},e.id||s)))})]}),(0,K.jsx)("div",{className:"route-details",children:A?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("div",{className:"route-map",children:(0,K.jsx)(z.Ay,{...x,onMove:e=>p(e.viewState),style:{width:"100%",height:"100%"},mapStyle:"mapbox://styles/mapbox/outdoors-v11",mapboxAccessToken:"YOUR_MAPBOX_TOKEN"})}),(0,K.jsxs)("div",{className:"route-info-panel",children:[(0,K.jsx)("h3",{children:A.name}),(0,K.jsx)("p",{children:A.description}),(0,K.jsxs)("div",{className:"route-stats",children:[(0,K.jsxs)("div",{className:"stat-item",children:[(0,K.jsx)("span",{className:"stat-label",children:"Distance"}),(0,K.jsxs)("span",{className:"stat-value",children:[A.totalDistance," km"]})]}),(0,K.jsxs)("div",{className:"stat-item",children:[(0,K.jsx)("span",{className:"stat-label",children:"D\xe9nivel\xe9"}),(0,K.jsxs)("span",{className:"stat-value",children:[A.totalElevation," m"]})]}),(0,K.jsxs)("div",{className:"stat-item",children:[(0,K.jsx)("span",{className:"stat-label",children:"Dur\xe9e estim\xe9e"}),(0,K.jsxs)("span",{className:"stat-value",children:[Math.floor(A.estimatedTime/60),"h",A.estimatedTime%60?` ${A.estimatedTime%60}min`:""]})]}),A.difficultyChange&&(0,K.jsxs)("div",{className:"stat-item",children:[(0,K.jsx)("span",{className:"stat-label",children:"Changement de difficult\xe9"}),(0,K.jsx)("span",{className:"stat-value",children:A.difficultyChange})]})]}),A.highlights&&A.highlights.length>0&&(0,K.jsxs)("div",{className:"route-highlights",children:[(0,K.jsx)("h4",{children:"Points forts"}),(0,K.jsx)("ul",{children:A.highlights.map(((e,s)=>(0,K.jsx)("li",{children:e},s)))})]}),A.safetyPoints&&A.safetyPoints.length>0&&(0,K.jsxs)("div",{className:"route-safety",children:[(0,K.jsx)("h4",{children:"Points de s\xe9curit\xe9"}),(0,K.jsx)("ul",{children:A.safetyPoints.map(((e,s)=>(0,K.jsxs)("li",{children:[e.name," - ",e.description]},s)))})]}),(0,K.jsxs)("div",{className:"route-actions",children:[(0,K.jsx)("button",{className:"btn-primary",children:"Utiliser cet itin\xe9raire"}),(0,K.jsx)("button",{className:"btn-secondary",children:"T\xe9l\xe9charger GPX"}),(0,K.jsx)("button",{className:"btn-secondary",children:"Voir d\xe9tails"})]})]})]}):(0,K.jsx)("div",{className:"no-route-selected",children:"S\xe9lectionnez un itin\xe9raire pour voir ses d\xe9tails"})})]})]})};var ke=i(34222),Ne=i(67784),Ce=i(43845),we=i(51787),Se=i(53193),Pe=i(79190),Be=i(69285),ze=i(32143),Fe=i(88312),De=i(33691),Re=i(30079),Ie=i(79484),Te=i(34190),We=i(18324),$e=i(66425),Ee=i(19549),Me=i(17392),Ge=i(36591),Le=i(18483),Ve=i(39336),Ue=i(27600),qe=i(30279),Oe=i(77466),Ke=i(33752),Xe=i(3632),_e=i(43817),He=i(58293),Ye=i(78994),Je=i(16662);const Qe=(0,v.Ay)(l.A)((e=>{let{theme:s,variant:i}=e;return{position:"relative",overflow:"hidden",transition:"transform 0.3s, box-shadow 0.3s",borderRadius:"16px",..."compact"===i&&{maxWidth:345,height:"100%"},..."expanded"===i&&{maxWidth:"100%",marginBottom:s.spacing(3)},"&:hover":{transform:"translateY(-5px)",boxShadow:s.shadows[10]}}})),Ze=(0,v.Ay)(t.A)((e=>{let{theme:s,overlay:i}=e;return{position:"absolute",bottom:0,left:0,right:0,background:"dark"===i?"linear-gradient(to top, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.4) 50%, rgba(0,0,0,0) 100%)":"linear-gradient(to top, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 50%, rgba(255,255,255,0) 100%)",padding:s.spacing(2),transition:"opacity 0.3s",color:"dark"===i?"#fff":s.palette.text.primary}})),es=(0,v.Ay)(Me.A)((e=>{let{theme:s,expanded:i}=e;return{transform:i?"rotate(180deg)":"rotate(0deg)",transition:s.transitions.create("transform",{duration:s.transitions.duration.shortest})}})),ss=(0,v.Ay)(Ce.A)((e=>{let{theme:s}=e;return{margin:s.spacing(.5),"& .MuiChip-icon":{color:"inherit"}}})),is=(0,v.Ay)(de.A)((e=>{let{theme:s}=e;return{textTransform:"none",fontWeight:600,paddingLeft:s.spacing(1),paddingRight:s.spacing(1),minWidth:0}})),as=(0,v.Ay)(Ge.A)((e=>{let{theme:s,variant:i}=e;return{height:"compact"===i?140:300,position:"relative",backgroundSize:"cover",backgroundPosition:"center"}})),ts={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}},hover:{scale:1.03,boxShadow:"0px 10px 30px rgba(0, 0, 0, 0.1)",transition:{duration:.3}}},ns={collapsed:{height:0,opacity:0},expanded:{height:"auto",opacity:1,transition:{height:{duration:.3},opacity:{delay:.1,duration:.3}}}},rs=e=>{let{id:s,title:i,subtitle:n,image:r,type:l="col",location:c,stats:m={},details:h=[],detailsUrl:x,variant:u="compact",isFavorite:j=!1,isBookmarked:v=!1,onFavoriteToggle:f,onBookmarkToggle:y,onShare:b}=e;const N=(0,d.A)(),[S,B]=(0,a.useState)(!1),[z,F]=(0,a.useState)(!1),D=e=>{if(!e)return N.palette.grey[500];return{facile:N.palette.success.main,moyen:N.palette.warning.main,difficile:N.palette.error.main,"tr\xe8s difficile":N.palette.error.dark,"extr\xeame":"#8B0000"}[e.toLowerCase()]||N.palette.grey[500]};return(0,K.jsx)(P.P.div,{initial:"hidden",animate:"visible",whileHover:"hover",variants:ts,onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1),children:(0,K.jsxs)(Qe,{variant:u,elevation:z?8:2,children:[(0,K.jsxs)(as,{component:"div",image:r,title:i,variant:u,children:[(0,K.jsxs)(t.A,{sx:{position:"absolute",top:12,right:12,display:"flex",gap:1},children:[(0,K.jsx)(Le.A,{title:j?"Retirer des favoris":"Ajouter aux favoris",children:(0,K.jsx)(Me.A,{"aria-label":j?"Retirer des favoris":"Ajouter aux favoris",onClick:()=>f&&f(s),sx:{color:"#fff",background:(0,o.X4)(N.palette.common.black,.4),"&:hover":{background:(0,o.X4)(N.palette.common.black,.6)}},size:"small",children:j?(0,K.jsx)(C.A,{color:"error"}):(0,K.jsx)(Oe.A,{})})}),(0,K.jsx)(Le.A,{title:v?"Retirer des enregistrements":"Enregistrer",children:(0,K.jsx)(Me.A,{"aria-label":v?"Retirer des enregistrements":"Enregistrer",onClick:()=>y&&y(s),sx:{color:"#fff",background:(0,o.X4)(N.palette.common.black,.4),"&:hover":{background:(0,o.X4)(N.palette.common.black,.6)}},size:"small",children:v?(0,K.jsx)(Ke.A,{color:"primary"}):(0,K.jsx)(w.A,{})})})]}),(0,K.jsx)(t.A,{sx:{position:"absolute",top:12,left:12},children:(0,K.jsx)(Ce.A,{icon:"col"===l?(0,K.jsx)(k.A,{}):(0,K.jsx)(A.A,{}),label:"col"===l?"Col":"Parcours",sx:{bgcolor:"col"===l?N.palette.primary.main:N.palette.secondary.main,color:"#fff",fontWeight:600},size:"small"})}),"compact"===u&&(0,K.jsxs)(Ze,{overlay:"dark",children:[(0,K.jsx)(p.A,{variant:"h6",component:"h3",sx:{fontWeight:700,mb:.5},children:i}),(0,K.jsx)(p.A,{variant:"body2",sx:{opacity:.9},children:c})]})]}),"expanded"===u&&(0,K.jsxs)(g.A,{children:[(0,K.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,K.jsxs)(t.A,{children:[(0,K.jsx)(p.A,{variant:"h5",component:"h2",sx:{fontWeight:700,mb:.5},children:i}),(0,K.jsx)(p.A,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:c})]}),m.difficulty&&(0,K.jsx)(Ce.A,{label:`Difficult\xe9: ${m.difficulty}`,sx:{bgcolor:(0,o.X4)(D(m.difficulty),.1),color:D(m.difficulty),fontWeight:600,border:`1px solid ${(0,o.X4)(D(m.difficulty),.3)}`}})]}),(0,K.jsx)(p.A,{variant:"body2",color:"text.secondary",sx:{mt:1,mb:2},children:n}),(0,K.jsxs)(t.A,{sx:{display:"flex",flexWrap:"wrap",mb:2},children:[m.distance&&(0,K.jsx)(ss,{icon:(0,K.jsx)(A.A,{}),label:`${m.distance} km`,variant:"outlined",size:"small"}),m.elevation&&(0,K.jsx)(ss,{icon:(0,K.jsx)(k.A,{}),label:`${m.elevation} m D+`,variant:"outlined",size:"small"}),m.views&&(0,K.jsx)(ss,{icon:(0,K.jsx)(Xe.A,{}),label:`${m.views} vues`,variant:"outlined",size:"small"})]})]}),(0,K.jsx)(Ve.A,{sx:{opacity:.6}}),(0,K.jsx)(Ue.A,{disableSpacing:!0,children:(0,K.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",width:"100%",px:1},children:[(0,K.jsx)(t.A,{children:"expanded"===u&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(is,{"aria-label":j?"Retirer des favoris":"Ajouter aux favoris",onClick:()=>f&&f(s),startIcon:j?(0,K.jsx)(C.A,{color:"error"}):(0,K.jsx)(Oe.A,{}),size:"small",children:"Favori"}),(0,K.jsx)(is,{"aria-label":"Partager",onClick:()=>b&&b(s),startIcon:(0,K.jsx)(_e.A,{}),size:"small",children:"Partager"})]})}),(0,K.jsxs)(t.A,{sx:{display:"flex",alignItems:"center"},children:[h.length>0&&(0,K.jsx)(es,{expanded:S?1:0,onClick:()=>{B(!S)},"aria-expanded":S,"aria-label":"Afficher plus",size:"small",children:(0,K.jsx)(He.A,{})}),x&&(0,K.jsx)(de.A,{component:Je.N_,to:x,endIcon:(0,K.jsx)(Ye.A,{}),size:"small",sx:{ml:1},color:"primary",children:"D\xe9tails"})]})]})}),h.length>0&&(0,K.jsx)(P.P.div,{initial:"collapsed",animate:S?"expanded":"collapsed",variants:ns,children:(0,K.jsx)(qe.A,{in:S,timeout:"auto",unmountOnExit:!0,children:(0,K.jsx)(g.A,{children:h.map(((e,s)=>(0,K.jsxs)(t.A,{sx:{mb:s<h.length-1?2:0},children:[e.title&&(0,K.jsx)(p.A,{variant:"subtitle2",sx:{fontWeight:600,mb:.5},children:e.title}),(0,K.jsx)(p.A,{variant:"body2",color:"text.secondary",children:e.content})]},s)))})})})]})})},ls=(0,v.Ay)(P.P.div)((e=>{let{theme:s}=e;return{marginTop:s.spacing(2),marginBottom:s.spacing(4)}})),os=(0,v.Ay)(t.A)((e=>{let{theme:s}=e;return{display:"flex",flexWrap:"wrap",alignItems:"center",gap:s.spacing(2),marginBottom:s.spacing(3),[s.breakpoints.down("md")]:{flexDirection:"column",alignItems:"stretch"}}})),ds=(0,v.Ay)(Ne.A)((e=>{let{theme:s}=e;return{flexGrow:1,maxWidth:"100%",[s.breakpoints.up("md")]:{maxWidth:300}}})),cs=(0,v.Ay)(t.A)((e=>{let{theme:s,expanded:i}=e;return{display:i?"flex":"none",flexWrap:"wrap",alignItems:"center",gap:s.spacing(2),padding:i?s.spacing(2):0,marginTop:i?s.spacing(2):0,marginBottom:i?s.spacing(2):0,backgroundColor:s.palette.background.paper,borderRadius:s.shape.borderRadius,boxShadow:i?s.shadows[1]:"none",[s.breakpoints.down("sm")]:{flexDirection:"column",alignItems:"stretch"}}})),ms=(0,v.Ay)(t.A)((e=>{let{theme:s}=e;return{display:"flex",flexWrap:"wrap",gap:s.spacing(1),marginTop:s.spacing(1),marginBottom:s.spacing(2)}})),hs=(0,v.Ay)(t.A)((e=>{let{theme:s}=e;return{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:s.spacing(6),textAlign:"center",backgroundColor:s.palette.background.paper,borderRadius:s.shape.borderRadius,boxShadow:s.shadows[1],marginTop:s.spacing(4),marginBottom:s.spacing(4)}})),xs=(0,v.Ay)(t.A)((e=>{let{theme:s}=e;return{display:"flex",justifyContent:"center",marginTop:s.spacing(4),marginBottom:s.spacing(2)}})),ps={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},us=e=>{let{items:s=[],loading:i=!1,title:n="Visualisations",filters:r={},onFilterChange:l,onSearch:o,onFavoriteToggle:m,onBookmarkToggle:h,onShare:x,itemsPerPage:g=12,emptyStateMessage:j="Aucune visualisation trouv\xe9e correspondant \xe0 vos crit\xe8res de recherche."}=e;const v=(0,d.A)(),f=(0,c.A)(v.breakpoints.down("sm")),y=(0,c.A)(v.breakpoints.down("md")),[b,A]=(0,a.useState)(""),[k,N]=(0,a.useState)(!1),[C,w]=(0,a.useState)({}),[S,P]=(0,a.useState)(1),B=Math.ceil(s.length/g),z=s.slice((S-1)*g,S*g);(0,a.useEffect)((()=>{P(1)}),[C,b]);const F=e=>{A(e.target.value),o&&o(e.target.value)},D=(e,s)=>{const i={...C,[e]:s};""===s&&delete i[e],w(i),l&&l(i)},R=()=>{w({}),A(""),l&&l({}),o&&o("")};return(0,K.jsxs)(t.A,{children:[n&&(0,K.jsx)(p.A,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3,borderBottom:`3px solid ${v.palette.primary.main}`,pb:1,display:"inline-block"},children:n}),(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)(os,{children:[(0,K.jsx)(ds,{placeholder:"Rechercher...",value:b,onChange:F,variant:"outlined",size:"small",fullWidth:f,InputProps:{startAdornment:(0,K.jsx)(we.A,{position:"start",children:(0,K.jsx)(Ie.A,{color:"action"})}),endAdornment:b?(0,K.jsx)(we.A,{position:"end",children:(0,K.jsx)(IconButton,{size:"small","aria-label":"clear search",onClick:()=>{A(""),o&&o("")},children:(0,K.jsx)(Re.A,{fontSize:"small"})})}):null}}),(0,K.jsx)(de.A,{variant:"outlined",color:"inherit",startIcon:(0,K.jsx)(Te.A,{}),onClick:()=>N(!k),size:"small",children:"Filtres"}),!y&&r.type&&(0,K.jsxs)(Se.A,{variant:"outlined",size:"small",sx:{minWidth:120},children:[(0,K.jsx)(Pe.A,{id:"type-filter-label",children:"Type"}),(0,K.jsxs)(Be.A,{labelId:"type-filter-label",id:"type-filter",value:C.type||"",onChange:e=>D("type",e.target.value),label:"Type",IconComponent:We.A,children:[(0,K.jsx)(ze.A,{value:"",children:"Tous"}),(0,K.jsx)(ze.A,{value:"col",children:(0,K.jsxs)(t.A,{sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)($e.A,{sx:{mr:1}})," Cols"]})}),(0,K.jsx)(ze.A,{value:"route",children:(0,K.jsxs)(t.A,{sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(Ee.A,{sx:{mr:1}})," Parcours"]})})]})]})]}),(0,K.jsxs)(cs,{expanded:k?1:0,children:[r.type&&y&&(0,K.jsxs)(Se.A,{fullWidth:!0,variant:"outlined",size:"small",children:[(0,K.jsx)(Pe.A,{id:"mobile-type-filter-label",children:"Type"}),(0,K.jsxs)(Be.A,{labelId:"mobile-type-filter-label",id:"mobile-type-filter",value:C.type||"",onChange:e=>D("type",e.target.value),label:"Type",children:[(0,K.jsx)(ze.A,{value:"",children:"Tous"}),(0,K.jsx)(ze.A,{value:"col",children:"Cols"}),(0,K.jsx)(ze.A,{value:"route",children:"Parcours"})]})]}),r.difficulty&&(0,K.jsxs)(Se.A,{sx:{minWidth:150},size:"small",fullWidth:f,children:[(0,K.jsx)(Pe.A,{id:"difficulty-filter-label",children:"Difficult\xe9"}),(0,K.jsxs)(Be.A,{labelId:"difficulty-filter-label",id:"difficulty-filter",value:C.difficulty||"",onChange:e=>D("difficulty",e.target.value),label:"Difficult\xe9",children:[(0,K.jsx)(ze.A,{value:"",children:"Toutes"}),r.difficulty.map((e=>(0,K.jsx)(ze.A,{value:e,children:e},e)))]})]}),r.region&&(0,K.jsxs)(Se.A,{sx:{minWidth:200},size:"small",fullWidth:f,children:[(0,K.jsx)(Pe.A,{id:"region-filter-label",children:"R\xe9gion"}),(0,K.jsxs)(Be.A,{labelId:"region-filter-label",id:"region-filter",value:C.region||"",onChange:e=>D("region",e.target.value),label:"R\xe9gion",children:[(0,K.jsx)(ze.A,{value:"",children:"Toutes"}),r.region.map((e=>(0,K.jsx)(ze.A,{value:e,children:e},e)))]})]}),(0,K.jsxs)(t.A,{sx:{display:"flex",gap:1,mt:f?2:0,ml:"auto"},children:[(0,K.jsx)(de.A,{variant:"outlined",size:"small",onClick:R,startIcon:(0,K.jsx)(Re.A,{}),children:"R\xe9initialiser"}),(0,K.jsx)(de.A,{variant:"contained",size:"small",onClick:()=>N(!1),color:"primary",children:"Appliquer"})]})]}),Object.keys(C).length||b?(0,K.jsxs)(ms,{children:[b&&(0,K.jsx)(Ce.A,{label:`Recherche: ${b}`,onDelete:()=>{A(""),o&&o("")},color:"primary",variant:"outlined"}),Object.entries(C).map((e=>{let[s,i]=e;if(!i)return null;let a="",t="primary";return"type"===s?(a="Type: "+("col"===i?"Col":"Parcours"),t="col"===i?"primary":"secondary"):a="difficulty"===s?`Difficult\xe9: ${i}`:"region"===s?`R\xe9gion: ${i}`:`${s}: ${i}`,(0,K.jsx)(Ce.A,{label:a,onDelete:()=>D(s,""),color:t,variant:"outlined"},s)})),(0,K.jsx)(Ce.A,{label:"Effacer tout",onDelete:R,deleteIcon:(0,K.jsx)(Re.A,{}),variant:"outlined",color:"error"})]}):null]}),(0,K.jsx)(ls,{variants:ps,initial:"hidden",animate:"visible",children:(0,K.jsx)(u.Ay,{container:!0,spacing:3,children:i?Array.from(new Array(g)).map(((e,s)=>(0,K.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,K.jsxs)(t.A,{sx:{width:"100%"},children:[(0,K.jsx)(Fe.A,{variant:"rectangular",height:140,sx:{borderRadius:"16px 16px 0 0"}}),(0,K.jsx)(Fe.A,{variant:"text",height:40,sx:{mt:1}}),(0,K.jsx)(Fe.A,{variant:"text",height:20,width:"60%"}),(0,K.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",mt:1},children:[(0,K.jsx)(Fe.A,{variant:"text",width:60,height:30}),(0,K.jsx)(Fe.A,{variant:"text",width:60,height:30})]})]})},`skeleton-${s}`))):z.length>0?z.map((e=>(0,K.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,K.jsx)(rs,{id:e.id,title:e.title,subtitle:e.subtitle,image:e.image,type:e.type,location:e.location,stats:e.stats,details:e.details,detailsUrl:e.detailsUrl,isFavorite:e.isFavorite,isBookmarked:e.isBookmarked,onFavoriteToggle:m,onBookmarkToggle:h,onShare:x})},e.id))):(0,K.jsx)(u.Ay,{item:!0,xs:12,children:(0,K.jsxs)(hs,{children:[(0,K.jsx)(p.A,{variant:"h6",color:"textSecondary",gutterBottom:!0,children:"Aucun r\xe9sultat"}),(0,K.jsx)(p.A,{variant:"body2",color:"textSecondary",paragraph:!0,children:j}),(0,K.jsx)(de.A,{variant:"outlined",color:"primary",onClick:R,startIcon:(0,K.jsx)(Re.A,{}),children:"Effacer les filtres"})]})})})}),!i&&B>1&&(0,K.jsx)(xs,{children:(0,K.jsx)(De.A,{count:B,page:S,onChange:(e,s)=>{P(s),window.scrollTo({top:0,behavior:"smooth"})},color:"primary",size:f?"small":"medium",showFirstButton:!0,showLastButton:!0})})]})};var gs=i(23546),js=i(99389),vs=i(37131),fs=i(72323);const ys=(0,v.Ay)(t.A)((e=>{let{theme:s}=e;return{position:"relative",width:"100%",height:"100%",overflow:"hidden",padding:s.spacing(2,0),marginBottom:s.spacing(6)}})),bs=(0,v.Ay)(P.P.div)((e=>{let{theme:s}=e;return{display:"flex",justifyContent:"center",alignItems:"center",padding:s.spacing(0,2),width:"100%",height:"100%"}})),As=(0,v.Ay)(Me.A)((e=>{let{theme:s,direction:i}=e;return{position:"absolute",top:"50%",transform:"translateY(-50%)",zIndex:10,backgroundColor:(0,o.X4)(s.palette.background.paper,.8),color:s.palette.text.primary,boxShadow:s.shadows[2],"&:hover":{backgroundColor:s.palette.background.paper},..."left"===i&&{left:s.spacing(1)},..."right"===i&&{right:s.spacing(1)}}})),ks=(0,v.Ay)(t.A)((e=>{let{theme:s}=e;return{display:"flex",justifyContent:"center",marginTop:s.spacing(2)}})),Ns=(0,v.Ay)(Me.A)((e=>{let{theme:s,active:i}=e;return{padding:s.spacing(.5),color:i?s.palette.primary.main:s.palette.text.disabled,transform:i?"scale(1.2)":"scale(1)",transition:s.transitions.create(["transform","color"],{duration:300})}})),Cs=(0,v.Ay)(t.A)((e=>{let{theme:s}=e;return{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:s.spacing(2),[s.breakpoints.down("sm")]:{flexDirection:"column",alignItems:"flex-start","& > *:not(:last-child)":{marginBottom:s.spacing(2)}}}})),ws={enter:e=>({x:e>0?1e3:-1e3,opacity:0}),center:{x:0,opacity:1},exit:e=>({x:e<0?1e3:-1e3,opacity:0})},Ss=e=>{let{items:s=[],title:i="Visualisations recommand\xe9es",loading:n=!1,autoPlay:r=!0,autoPlayInterval:l=5e3,showDots:o=!0,showArrows:m=!0,loop:h=!0,variant:x="compact",viewAllUrl:u,onFavoriteToggle:g,onBookmarkToggle:v,onShare:f}=e;const y=(0,d.A)(),b=(0,c.A)(y.breakpoints.down("sm")),[A,k]=(0,a.useState)(0),[N,C]=(0,a.useState)(0),w=(0,a.useRef)(null);(0,a.useEffect)((()=>{k(0)}),[s]),(0,a.useEffect)((()=>(r&&s.length>1&&(w.current=setInterval((()=>{A!==s.length-1||h?S():clearInterval(w.current)}),l)),()=>{w.current&&clearInterval(w.current)})),[r,A,s.length,h,l]);const S=()=>{C(1),A===s.length-1?h&&k(0):k((e=>e+1))};return(0,K.jsxs)(t.A,{children:[(0,K.jsxs)(Cs,{children:[(0,K.jsx)(p.A,{variant:"h5",component:"h2",sx:{fontWeight:700,borderBottom:`3px solid ${y.palette.primary.main}`,paddingBottom:y.spacing(.5),display:"inline-block"},children:i}),u&&(0,K.jsx)(de.A,{component:"a",href:u,color:"primary",endIcon:(0,K.jsx)(js.A,{}),children:"Voir tout"})]}),(0,K.jsx)(ys,{children:n?(0,K.jsx)(t.A,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:(0,K.jsxs)(t.A,{sx:{width:b?"100%":"80%",maxWidth:700},children:[(0,K.jsx)(Fe.A,{variant:"rectangular",height:250,sx:{borderRadius:y.shape.borderRadius}}),(0,K.jsx)(Fe.A,{variant:"text",height:40,sx:{mt:2}}),(0,K.jsx)(Fe.A,{variant:"text",height:20,width:"60%"}),(0,K.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",mt:2},children:[(0,K.jsx)(Fe.A,{variant:"text",width:80,height:40}),(0,K.jsx)(Fe.A,{variant:"text",width:80,height:40})]})]})}):s.length>0?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(gs.N,{initial:!1,custom:N,mode:"wait",children:(0,K.jsx)(bs,{custom:N,variants:ws,initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},children:(0,K.jsx)(t.A,{sx:{width:b?"100%":"compact"===x?"70%":"85%",maxWidth:"compact"===x?500:900},children:(0,K.jsx)(rs,{id:s[A].id,title:s[A].title,subtitle:s[A].subtitle,image:s[A].image,type:s[A].type,location:s[A].location,stats:s[A].stats,details:s[A].details,detailsUrl:s[A].detailsUrl,variant:x,isFavorite:s[A].isFavorite,isBookmarked:s[A].isBookmarked,onFavoriteToggle:g,onBookmarkToggle:v,onShare:f})})},A)}),m&&s.length>1&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(As,{direction:"left",onClick:()=>{C(-1),0===A?h&&k(s.length-1):k((e=>e-1))},"aria-label":"Pr\xe9c\xe9dent",disabled:0===A&&!h,children:(0,K.jsx)(vs.A,{})}),(0,K.jsx)(As,{direction:"right",onClick:S,"aria-label":"Suivant",disabled:A===s.length-1&&!h,children:(0,K.jsx)(js.A,{})})]}),o&&s.length>1&&(0,K.jsx)(ks,{children:s.map(((e,s)=>(0,K.jsx)(Ns,{active:s===A?1:0,onClick:()=>(e=>{C(e>A?1:-1),k(e)})(s),"aria-label":`Aller \xe0 la diapositive ${s+1}`,size:"small",children:(0,K.jsx)(fs.A,{fontSize:"small"})},s)))})]}):(0,K.jsx)(j.A,{sx:{padding:y.spacing(3),textAlign:"center",backgroundColor:y.palette.background.paper},elevation:1,children:(0,K.jsx)(p.A,{variant:"body1",color:"textSecondary",children:"Aucune visualisation disponible."})})})]})};i(62820);const Ps=(0,v.Ay)(t.A)((e=>{let{theme:s}=e;return{padding:s.spacing(4,0),marginBottom:s.spacing(4),background:`linear-gradient(120deg, ${s.palette.primary.main}, ${s.palette.primary.dark})`,color:s.palette.primary.contrastText,borderRadius:s.shape.borderRadius,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)",position:"relative",overflow:"hidden","&::after":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"url('/images/topography-pattern.svg')",opacity:.1,zIndex:1}}})),Bs=(0,v.Ay)(n.A)((e=>{let{theme:s}=e;return{marginBottom:s.spacing(3),"& .MuiTabs-indicator":{height:3,borderRadius:"3px 3px 0 0"},"& .MuiTab-root":{minHeight:64,fontSize:"0.9rem",fontWeight:"medium",textTransform:"none","&.Mui-selected":{fontWeight:"bold"}}}})),zs=(0,v.Ay)(r.A)((e=>{let{theme:s}=e;return{display:"flex",flexDirection:"row",alignItems:"center","& .MuiSvgIcon-root":{marginRight:s.spacing(1),fontSize:"1.2rem"}}})),Fs=(0,v.Ay)(t.A)((e=>{let{theme:s}=e;return{marginTop:s.spacing(2),marginBottom:s.spacing(4),padding:s.spacing(3),backgroundColor:s.palette.background.paper,borderRadius:s.shape.borderRadius,boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)",minHeight:"60vh"}})),Ds=(0,v.Ay)(l.A)((e=>{let{theme:s}=e;return{height:"100%",display:"flex",flexDirection:"column",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.05)",transition:"transform 0.3s ease, box-shadow 0.3s ease","&:hover":{transform:"translateY(-5px)",boxShadow:"0 12px 20px rgba(0, 0, 0, 0.1)"}}})),Rs=(0,v.Ay)(t.A)((e=>{let{theme:s,color:i}=e;return{width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",backgroundColor:(0,o.X4)(s.palette[i||"primary"].main,.1),color:s.palette[i||"primary"].main,marginBottom:s.spacing(2)}})),Is=()=>{const[e,s]=(0,a.useState)([]),[i,n]=(0,a.useState)([]),[r,l]=(0,a.useState)(!0),[o,v]=(0,a.useState)(null),[z,F]=(0,a.useState)(null),[D,R]=(0,a.useState)(null),[I,T]=(0,a.useState)(null),[W,$]=(0,a.useState)(null),[E,M]=(0,a.useState)(0),[G,L]=(0,a.useState)([]),V=(0,d.A)(),U=(0,c.A)(V.breakpoints.down("md")),q=(0,c.A)(V.breakpoints.down("lg"));(0,a.useEffect)((()=>{(async()=>{l(!0),v(null);try{var e,i,a,t;const r=[{id:"col-1",title:"Col du Galibier",subtitle:"Un des plus beaux cols des Alpes",image:"https://images.unsplash.com/photo-1519681393784-d120267933ba",type:"col",location:"Alpes, France",stats:{difficulty:"difficile",distance:"23",elevation:"1245",views:"3248"},details:[{title:"Histoire",content:"Le Col du Galibier est un col mythique du Tour de France..."},{title:"Conseils",content:"Pr\xe9voyez des v\xeatements chauds m\xeame en \xe9t\xe9."}],detailsUrl:"/cols/galibier",isFavorite:!1,isBookmarked:!0},{id:"col-2",title:"Col du Tourmalet",subtitle:"Le g\xe9ant des Pyr\xe9n\xe9es",image:"https://images.unsplash.com/photo-1455156218388-7a8e488e8606",type:"col",location:"Pyr\xe9n\xe9es, France",stats:{difficulty:"tr\xe8s difficile",distance:"19",elevation:"1404",views:"5248"},details:[{title:"Histoire",content:"Le Col du Tourmalet est le plus haut col routier des Pyr\xe9n\xe9es..."},{title:"Conseils",content:"Pr\xe9voyez de l'eau en quantit\xe9 suffisante."}],detailsUrl:"/cols/tourmalet",isFavorite:!0,isBookmarked:!1},{id:"col-3",title:"Col de la Bonette",subtitle:"La route la plus haute d'Europe",image:"https://images.unsplash.com/photo-1464822759023-fed622ff2c3b",type:"col",location:"Alpes-Maritimes, France",stats:{difficulty:"extr\xeame",distance:"26",elevation:"1652",views:"2789"},detailsUrl:"/cols/bonette",isFavorite:!1,isBookmarked:!1},{id:"col-4",title:"Col d'Aubisque",subtitle:"Un paysage exceptionnel",image:"https://images.unsplash.com/photo-1519681393784-d120267933ba",type:"col",location:"Pyr\xe9n\xe9es, France",stats:{difficulty:"difficile",distance:"16",elevation:"1190",views:"3102"},detailsUrl:"/cols/aubisque",isFavorite:!1,isBookmarked:!0}],l=[{id:"route-1",title:"Route des Cr\xeates",subtitle:"Un parcours panoramique",image:"https://images.unsplash.com/photo-1500534623283-312aade485b7",type:"route",location:"Vosges, France",stats:{difficulty:"moyen",distance:"38",elevation:"980",views:"2187"},detailsUrl:"/routes/cretes",isFavorite:!1,isBookmarked:!1},{id:"route-2",title:"Route des Grandes Alpes",subtitle:"Une travers\xe9e mythique",image:"https://images.unsplash.com/photo-1454496522488-7a8e488e8606",type:"route",location:"Alpes, France",stats:{difficulty:"extr\xeame",distance:"684",elevation:"15700",views:"5347"},detailsUrl:"/routes/grandes-alpes",isFavorite:!0,isBookmarked:!0}];s(r),n(l),L([...r.filter((e=>e.isFavorite)).slice(0,2),...l.filter((e=>e.isFavorite)).slice(0,1)]),F(null===(e=r[0])||void 0===e?void 0:e.id),R(null===(i=r[0])||void 0===i?void 0:i.id),T(null===(a=r[1])||void 0===a?void 0:a.id),$(null===(t=l[0])||void 0===t?void 0:t.id)}catch(r){console.error("Error fetching data:",r),v("Impossible de charger les donn\xe9es. Veuillez r\xe9essayer plus tard.")}finally{setTimeout((()=>{l(!1)}),1e3)}})()}),[]);const O=e=>{s((s=>s.map((s=>s.id===e?{...s,isFavorite:!s.isFavorite}:s)))),n((s=>s.map((s=>s.id===e?{...s,isFavorite:!s.isFavorite}:s)))),L((s=>s.map((s=>s.id===e?{...s,isFavorite:!s.isFavorite}:s))))},X=e=>{s((s=>s.map((s=>s.id===e?{...s,isBookmarked:!s.isBookmarked}:s)))),n((s=>s.map((s=>s.id===e?{...s,isBookmarked:!s.isBookmarked}:s)))),L((s=>s.map((s=>s.id===e?{...s,isBookmarked:!s.isBookmarked}:s))))},_=e=>{console.log(`Partage de l'\xe9l\xe9ment ${e}`)},H={type:["col","route"],difficulty:["facile","moyen","difficile","tr\xe8s difficile","extr\xeame"],region:["Alpes","Pyr\xe9n\xe9es","Vosges","Jura","Massif central","Alsace","Provence"]};return(0,K.jsx)(B.A,{children:(0,K.jsx)(x.A,{maxWidth:"xl",children:(0,K.jsxs)(t.A,{component:P.P.div,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},sx:{my:4},children:[(0,K.jsx)(Ps,{children:(0,K.jsxs)(x.A,{children:[(0,K.jsx)(p.A,{variant:"h3",component:"h1",gutterBottom:!0,children:"Tableau de bord des visualisations"}),(0,K.jsx)(p.A,{variant:"h6",children:"Explorez, comparez et planifiez vos aventures cyclistes"})]})}),(0,K.jsx)(t.A,{sx:{mb:6},children:(0,K.jsx)(Ss,{items:G,title:"D\xe9couvertes recommand\xe9es",loading:r,variant:q?"compact":"expanded",onFavoriteToggle:O,onBookmarkToggle:X,onShare:_})}),(0,K.jsxs)(u.Ay,{container:!0,spacing:4,children:[(0,K.jsx)(u.Ay,{item:!0,xs:12,md:3,children:(0,K.jsxs)(P.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2,duration:.5},children:[(0,K.jsxs)(p.A,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600},children:[(0,K.jsx)(f.A,{sx:{mr:1,verticalAlign:"middle"}}),"Visualisations"]}),(0,K.jsx)(p.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:"D\xe9couvrez nos diff\xe9rentes m\xe9thodes de visualisation pour explorer les cols et parcours cyclistes."}),(0,K.jsxs)(u.Ay,{container:!0,spacing:2,sx:{mb:4},children:[(0,K.jsx)(u.Ay,{item:!0,xs:12,children:(0,K.jsx)(P.P.div,{whileHover:{y:-5,transition:{duration:.2}},children:(0,K.jsx)(Ds,{children:(0,K.jsxs)(g.A,{children:[(0,K.jsx)(Rs,{color:"primary",children:(0,K.jsx)(y.A,{fontSize:"large"})}),(0,K.jsx)(p.A,{variant:"h6",gutterBottom:!0,children:"Visualisation 3D"}),(0,K.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Explorez les cols en trois dimensions et pr\xe9parez votre ascension avec une vision pr\xe9cise du terrain."})]})})})}),(0,K.jsx)(u.Ay,{item:!0,xs:12,children:(0,K.jsx)(P.P.div,{whileHover:{y:-5,transition:{duration:.2}},children:(0,K.jsx)(Ds,{children:(0,K.jsxs)(g.A,{children:[(0,K.jsx)(Rs,{color:"secondary",children:(0,K.jsx)(b.A,{fontSize:"large"})}),(0,K.jsx)(p.A,{variant:"h6",gutterBottom:!0,children:"Comparaison de cols"}),(0,K.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Comparez les profils de diff\xe9rents cols pour mieux planifier vos d\xe9fis et votre entra\xeenement."})]})})})}),(0,K.jsx)(u.Ay,{item:!0,xs:12,children:(0,K.jsx)(P.P.div,{whileHover:{y:-5,transition:{duration:.2}},children:(0,K.jsx)(Ds,{children:(0,K.jsxs)(g.A,{children:[(0,K.jsx)(Rs,{color:"info",children:(0,K.jsx)(A.A,{fontSize:"large"})}),(0,K.jsx)(p.A,{variant:"h6",gutterBottom:!0,children:"Alternatives de parcours"}),(0,K.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"D\xe9couvrez des variantes de parcours adapt\xe9es \xe0 vos pr\xe9f\xe9rences et aux conditions m\xe9t\xe9o."})]})})})})]})]})}),(0,K.jsxs)(u.Ay,{item:!0,xs:12,md:9,children:[(0,K.jsxs)(Bs,{value:E,onChange:(e,s)=>{M(s)},variant:U?"scrollable":"standard",scrollButtons:!!U&&"auto",textColor:"primary",indicatorColor:"primary","aria-label":"visualisation tabs",sx:{borderBottom:1,borderColor:"divider"},children:[(0,K.jsx)(zs,{icon:(0,K.jsx)(y.A,{}),label:"Visualisation 3D"}),(0,K.jsx)(zs,{icon:(0,K.jsx)(k.A,{}),label:"Visualisation Standard"}),(0,K.jsx)(zs,{icon:(0,K.jsx)(b.A,{}),label:"Comparaison"}),(0,K.jsx)(zs,{icon:(0,K.jsx)(A.A,{}),label:"Alternatives"}),(0,K.jsx)(zs,{icon:(0,K.jsx)(N.A,{}),label:"Explorer"}),(0,K.jsx)(zs,{icon:(0,K.jsx)(C.A,{}),label:"Favoris"}),(0,K.jsx)(zs,{icon:(0,K.jsx)(w.A,{}),label:"Enregistr\xe9s"})]}),(0,K.jsx)(Fs,{children:(()=>{if(r)return(0,K.jsx)(t.A,{sx:{display:"flex",justifyContent:"center",p:5},children:(0,K.jsx)(m.A,{})});if(o)return(0,K.jsx)(h.A,{severity:"error",sx:{mb:2},children:o});switch(E){case 0:return(0,K.jsx)(ke.A,{passId:z,passes:e,onPassChange:e=>F(e)});case 1:return(0,K.jsx)(Z,{passId:z,passes:e,onPassChange:e=>F(e)});case 2:return(0,K.jsx)(fe,{passId1:D,passId2:I,passes:e,onPassChange1:e=>R(e),onPassChange2:e=>T(e)});case 3:return(0,K.jsx)(Ae,{routeId:W,routes:i,onRouteChange:e=>$(e)});case 4:return(0,K.jsx)(us,{items:[...e,...i],loading:r,title:"Toutes les visualisations",filters:H,onFavoriteToggle:O,onBookmarkToggle:X,onShare:_});case 5:return(0,K.jsx)(us,{items:[...e,...i].filter((e=>e.isFavorite)),loading:r,title:"Mes favoris",filters:H,onFavoriteToggle:O,onBookmarkToggle:X,onShare:_,emptyStateMessage:"Vous n'avez pas encore de favoris. Explorez les cols et parcours pour en ajouter."});case 6:return(0,K.jsx)(us,{items:[...e,...i].filter((e=>e.isBookmarked)),loading:r,title:"Mes enregistrements",filters:H,onFavoriteToggle:O,onBookmarkToggle:X,onShare:_,emptyStateMessage:"Vous n'avez pas encore d'\xe9l\xe9ments enregistr\xe9s. Explorez les cols et parcours pour en ajouter."});default:return null}})()}),(0,K.jsxs)(j.A,{elevation:1,sx:{p:3,mt:2,borderRadius:2},children:[(0,K.jsxs)(p.A,{variant:"h6",gutterBottom:!0,children:[(0,K.jsx)(S.A,{sx:{mr:1,verticalAlign:"middle"}}),"Fonctionnalit\xe9s Premium"]}),(0,K.jsx)(p.A,{variant:"body2",paragraph:!0,children:"Nos visualisations avanc\xe9es vous offrent une exp\xe9rience compl\xe8te pour pr\xe9parer vos sorties cyclistes. Explorez les cols et itin\xe9raires en 3D, analysez chaque segment et comparez les diff\xe9rentes options pour choisir le parcours qui correspond parfaitement \xe0 votre niveau."}),(0,K.jsxs)(u.Ay,{container:!0,spacing:2,children:[(0,K.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,K.jsxs)(t.A,{sx:{textAlign:"center"},children:[(0,K.jsx)(p.A,{variant:"subtitle2",gutterBottom:!0,color:"primary",children:"Visualisations 3D compl\xe8tes"}),(0,K.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Explorez chaque d\xe9tail des cols"})]})}),(0,K.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,K.jsxs)(t.A,{sx:{textAlign:"center"},children:[(0,K.jsx)(p.A,{variant:"subtitle2",gutterBottom:!0,color:"primary",children:"Comparaison d\xe9taill\xe9e"}),(0,K.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Analysez les diff\xe9rences entre les cols"})]})}),(0,K.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,K.jsxs)(t.A,{sx:{textAlign:"center"},children:[(0,K.jsx)(p.A,{variant:"subtitle2",gutterBottom:!0,color:"primary",children:"Alternatives d'itin\xe9raires"}),(0,K.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Adapt\xe9es \xe0 la m\xe9t\xe9o et votre profil"})]})}),(0,K.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,K.jsxs)(t.A,{sx:{textAlign:"center"},children:[(0,K.jsx)(p.A,{variant:"subtitle2",gutterBottom:!0,color:"primary",children:"Export des donn\xe9es"}),(0,K.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Pour vos appareils GPS et smartphones"})]})})]})]})]})]})]})})})}}}]);
//# sourceMappingURL=4708.91ae3b3c.chunk.js.map