"use strict";(self.webpackChunkgrand_est_cyclisme_client=self.webpackChunkgrand_est_cyclisme_client||[]).push([[1254],{61254:(e,n,t)=>{t.r(n),t.d(n,{default:()=>A});var r=t(65043),s=t(38628),a=t(14282),i=t(98139),o=t.n(i),c=(t(96440),t(97121)),l=t(14266),u=t(45471),m=t(16618),d=t(92644),p=t(35901),g=t(70579);const h=r.forwardRef(((e,n)=>{let{bsPrefix:t,active:r,disabled:s,eventKey:a,className:i,variant:c,action:l,as:h,...f}=e;t=(0,u.oU)(t,"list-group-item");const[x,v]=(0,d.M)({key:(0,p.u)(a,f.href),active:r,...f}),y=(0,m.A)((e=>{if(s)return e.preventDefault(),void e.stopPropagation();x.onClick(e)}));s&&void 0===f.tabIndex&&(f.tabIndex=-1,f["aria-disabled"]=!0);const j=h||(l?f.href?"a":"button":"div");return(0,g.jsx)(j,{ref:n,...f,...x,onClick:y,className:o()(i,t,v.isActive&&"active",s&&"disabled",c&&`${t}-${c}`,l&&`${t}-action`)})}));h.displayName="ListGroupItem";const f=h,x=r.forwardRef(((e,n)=>{const{className:t,bsPrefix:r,variant:s,horizontal:a,numbered:i,as:m="div",...d}=(0,c.Zw)(e,{activeKey:"onSelect"}),p=(0,u.oU)(r,"list-group");let h;return a&&(h=!0===a?"horizontal":`horizontal-${a}`),(0,g.jsx)(l.A,{ref:n,...d,as:m,className:o()(t,p,s&&`${p}-${s}`,h&&`${p}-${h}`,i&&`${p}-numbered`)})}));x.displayName="ListGroup";const v=Object.assign(x,{Item:f});var y=t(84063),j=t(29853);const b=r.forwardRef(((e,n)=>{let{bsPrefix:t,variant:r,animation:s="border",size:a,as:i="div",className:c,...l}=e;t=(0,u.oU)(t,"spinner");const m=`${t}-${s}`;return(0,g.jsx)(i,{ref:n,...l,className:o()(c,m,a&&`${m}-${a}`,r&&`text-${r}`)})}));b.displayName="Spinner";const N=b;var z=t(83910),k=t(97929),P=t(74117),w=t(45577);const q=e=>{let{userProfile:n,activityData:t}=e;const{t:i}=(0,P.Bd)(),{notify:o}=(0,w.hN)(),[c,l]=(0,r.useState)([]),[u,m]=(0,r.useState)(""),[d,p]=(0,r.useState)(!1),[h,f]=(0,r.useState)([]),[x,b]=(0,r.useState)("all"),q=(0,r.useRef)(null);(0,r.useEffect)((()=>{const e={id:"welcome",sender:"coach",text:null!==n&&void 0!==n&&n.firstName?`Bonjour ${n.firstName} ! Je suis votre coach cyclisme personnel. Comment puis-je vous aider aujourd'hui ?`:"Bonjour ! Je suis votre coach cyclisme personnel. Comment puis-je vous aider aujourd'hui ?",timestamp:new Date,category:"general"};l([e]),A()}),[n]),(0,r.useEffect)((()=>{q.current&&q.current.scrollIntoView({behavior:"smooth"})}),[c]);const A=()=>{let e=[{text:"Comment am\xe9liorer mon endurance ?",category:"training"},{text:"Que manger avant une sortie longue ?",category:"nutrition"},{text:"Quels exercices pour renforcer mes jambes ?",category:"strength"},{text:"Comment calculer ma FTP ?",category:"performance"}];if(n&&("beginner"===n.level?e.push({text:"Conseils pour d\xe9buter en cyclisme",category:"training"},{text:"Quelle devrait \xeatre ma cadence de p\xe9dalage ?",category:"technique"}):"intermediate"===n.level?e.push({text:"Comment progresser au seuil ?",category:"training"},{text:"Exercices de puissance pour cols",category:"training"}):"advanced"!==n.level&&"elite"!==n.level||e.push({text:"Optimiser ma r\xe9cup\xe9ration entre les s\xe9ances",category:"recovery"},{text:"Strat\xe9gies de course pour comp\xe9tition",category:"performance"}),n.age&&n.age>50&&e.push({text:"Conseils cyclisme pour seniors",category:"training"},{text:"R\xe9cup\xe9ration apr\xe8s 50 ans",category:"recovery"})),t&&t.length>0){const n=t[0];n.duration>180&&e.push({text:"R\xe9cup\xe9rer apr\xe8s ma longue sortie",category:"recovery"},{text:"Nutrition post-effort prolong\xe9",category:"nutrition"}),n.intensity&&n.intensity>.8&&e.push({text:"Planifier apr\xe8s un effort intense",category:"training"},{text:"Optimiser ma r\xe9cup\xe9ration active",category:"recovery"})}f(C(e).slice(0,5))},C=e=>{const n=[...e];for(let t=n.length-1;t>0;t--){const e=Math.floor(Math.random()*(t+1));[n[t],n[e]]=[n[e],n[t]]}return n},$=e=>{const n=e.toLowerCase(),t={training:["entra\xeenement","s\xe9ance","interval","hiit","sortie","volume","intensit\xe9"],nutrition:["manger","nutrition","alimentation","hydratation","boisson","repas"],recovery:["r\xe9cup\xe9ration","repos","sommeil","fatigue","surmenage"],performance:["ftp","puissance","performance","am\xe9liorer","progression"],technique:["technique","position","cadence","p\xe9dalage","a\xe9rodynamique"],equipment:["v\xe9lo","mat\xe9riel","\xe9quipement","roues","pneus","guidon","selle"],strength:["musculation","force","exercice","renforcement","gainage"],health:["sant\xe9","blessure","douleur","courbature","m\xe9dical"]};for(const[r,s]of Object.entries(t))if(s.some((e=>n.includes(e))))return r;return"general"},I=async(e,n,t,r)=>{const s={training:["Pour am\xe9liorer votre endurance, commencez par augmenter progressivement la dur\xe9e de vos sorties longues de 10% par semaine. Variez \xe9galement l'intensit\xe9 avec des s\xe9ances en zone 2 (65-75% de FTP) pour construire une base a\xe9robie solide.","Pour progresser en cyclisme, la constance est cl\xe9. Visez 3-4 sorties par semaine avec une vari\xe9t\xe9 d'intensit\xe9s. Incluez une sortie longue, une s\xe9ance d'intervalles et une ou deux sorties de r\xe9cup\xe9ration."],nutrition:["Avant une sortie longue, privil\xe9giez un repas riche en glucides complexes 2-3h avant (p\xe2tes, riz, pain complet). Pendant l'effort, visez 60-90g de glucides par heure selon l'intensit\xe9, et hydratez-vous avec 500-750ml d'eau par heure.","Pour la r\xe9cup\xe9ration post-effort, consommez des prot\xe9ines (15-25g) et des glucides dans les 30 minutes suivant la fin. Un ratio de 3:1 glucides/prot\xe9ines est id\xe9al pour reconstituer les r\xe9serves de glycog\xe8ne."],recovery:["La r\xe9cup\xe9ration est aussi importante que l'entra\xeenement. Alternez jours intenses et jours faciles, dormez 7-9h par nuit, et utilisez des techniques comme le massage, les bains froids ou la compression pour acc\xe9l\xe9rer la r\xe9cup\xe9ration musculaire.","Pour \xe9viter le surentra\xeenement, surveillez votre fr\xe9quence cardiaque au repos. Une augmentation de plus de 7-10% est un signal d'alarme indiquant que votre corps a besoin de plus de r\xe9cup\xe9ration."],performance:["Pour estimer votre FTP (seuil fonctionnel de puissance), effectuez un test de 20 minutes \xe0 intensit\xe9 maximale soutenable. Multipliez la puissance moyenne par 0.95 pour obtenir une estimation de votre FTP.","Pour am\xe9liorer votre puissance au seuil, int\xe9grez des intervalles de 8-20 minutes \xe0 90-105% de votre FTP, avec une r\xe9cup\xe9ration \xe9gale \xe0 50% du temps d'effort."]};let a="";if(t&&(t.ftp&&(a+=`Avec votre FTP actuelle de ${t.ftp}W, `),t.level)){a+={beginner:"en tant que d\xe9butant",intermediate:"\xe0 votre niveau interm\xe9diaire",advanced:"en tant que cycliste avanc\xe9",elite:"en tant que cycliste d'\xe9lite"}[t.level]||""}let i="";s[n]&&s[n].length>0?(i=s[n][Math.floor(Math.random()*s[n].length)],a&&(i=a+", "+i.charAt(0).toLowerCase()+i.slice(1))):i="Votre question sur "+n+" est int\xe9ressante. L'\xe9quilibre entre entra\xeenement, r\xe9cup\xe9ration et nutrition est essentiel pour progresser. N'h\xe9sitez pas \xe0 me poser des questions plus sp\xe9cifiques pour obtenir des conseils adapt\xe9s \xe0 votre situation.";let o=null,c=null;return"training"===n?(o={title:"Zones d'entra\xeenement",content:"Zone 1: <55% FTP (r\xe9cup\xe9ration)\nZone 2: 56-75% FTP (endurance)\nZone 3: 76-90% FTP (tempo)\nZone 4: 91-105% FTP (seuil)\nZone 5: 106-120% FTP (VO2max)\nZone 6: 121-150% FTP (ana\xe9robie)\nZone 7: >150% FTP (sprint)"},c=[{text:"Guide complet des zones d'entra\xeenement",url:"#/articles/zones-entrainement"},{text:"Programmation cycliste avanc\xe9e",url:"#/articles/programmation-cycliste"}]):"nutrition"===n&&(o={title:"Apports recommand\xe9s pour cyclistes",content:"Entra\xeenement: 5-7g de glucides/kg de poids corporel/jour\nComp\xe9tition: 8-10g de glucides/kg/jour\nProt\xe9ines: 1.2-1.6g/kg/jour\nLipides: 1g/kg/jour"}),{text:i,additionalInfo:o,links:c}},T="all"===x?c:c.filter((e=>e.category===x||"user"===e.sender)),F={training:k.xf,nutrition:k.VNx,performance:k.gK3,recovery:k._gR,equipment:k.N6U,strength:k.VwO,general:k.UBk};return(0,g.jsxs)("div",{className:"cycling-coach",children:[(0,g.jsxs)(s.A,{className:"chat-container",children:[(0,g.jsx)(s.A.Header,{children:(0,g.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,g.jsxs)("h3",{className:"mb-0",children:[(0,g.jsx)(z.g,{icon:k.UBk,className:"me-2"}),"Coach Cyclisme IA"]}),(0,g.jsxs)("div",{className:"category-filters",children:[(0,g.jsx)(a.A,{variant:"all"===x?"primary":"outline-primary",size:"sm",onClick:()=>b("all"),className:"me-1",children:"Tous"}),["training","nutrition","performance","recovery"].map((e=>(0,g.jsxs)(a.A,{variant:x===e?"primary":"outline-primary",size:"sm",onClick:()=>b(e),className:"me-1",children:[(0,g.jsx)(z.g,{icon:F[e]||k.UBk,className:"me-1"}),i(`categories.${e}`)]},e)))]})]})}),(0,g.jsxs)(s.A.Body,{className:"chat-messages",children:[(0,g.jsx)(v,{variant:"flush",children:T.map((e=>(0,g.jsxs)(v.Item,{className:`message ${e.sender}`,children:[(0,g.jsxs)("div",{className:"message-header",children:[(0,g.jsxs)("span",{className:"message-sender",children:[(0,g.jsx)(z.g,{icon:"coach"===e.sender?k.UBk:k.X46,className:"me-2"}),"coach"===e.sender?"Coach IA":"Vous"]}),(0,g.jsx)("span",{className:"message-time",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,g.jsx)("div",{className:"message-content",children:e.text}),e.additionalInfo&&(0,g.jsxs)("div",{className:"additional-info mt-2",children:[(0,g.jsx)("h6",{children:e.additionalInfo.title}),(0,g.jsx)("pre",{className:"info-content p-2 bg-light rounded",children:e.additionalInfo.content})]}),e.links&&e.links.length>0&&(0,g.jsxs)("div",{className:"resource-links mt-2",children:[(0,g.jsx)("h6",{children:"Ressources compl\xe9mentaires:"}),(0,g.jsx)("ul",{className:"ps-3",children:e.links.map(((e,n)=>(0,g.jsx)("li",{children:(0,g.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:e.text})},n)))})]}),"coach"===e.sender&&e.category&&"general"!==e.category&&(0,g.jsxs)(y.A,{bg:"light",text:"dark",className:"mt-2 category-badge",children:[(0,g.jsx)(z.g,{icon:F[e.category]||k.UBk,className:"me-1"}),i(`categories.${e.category}`)]})]},e.id)))}),(0,g.jsx)("div",{ref:q})]}),(0,g.jsxs)(s.A.Footer,{children:[h.length>0&&(0,g.jsx)("div",{className:"suggestions mb-3",children:(0,g.jsx)("div",{className:"suggestion-chips d-flex flex-wrap gap-2",children:h.map(((e,n)=>(0,g.jsxs)(y.A,{bg:"light",text:"primary",className:"suggestion-chip p-2 cursor-pointer",onClick:()=>(e=>{m(e.text),document.getElementById("coach-input").focus()})(e),children:[(0,g.jsx)(z.g,{icon:F[e.category]||k.UBk,className:"me-1"}),e.text]},n)))})}),(0,g.jsx)(j.A,{onSubmit:async e=>{if(e.preventDefault(),!u.trim())return;const r={id:`user-${Date.now()}`,sender:"user",text:u.trim(),timestamp:new Date,category:"general"};l((e=>[...e,r])),m(""),p(!0);try{await new Promise((e=>setTimeout(e,1e3)));const e=$(u.trim()),r=await I(u.trim(),e,n,t);l((n=>[...n,{id:`coach-${Date.now()}`,sender:"coach",text:r.text,additionalInfo:r.additionalInfo,links:r.links,category:e,timestamp:new Date}])),A()}catch(s){console.error("Erreur de communication avec le coach IA:",s),o.error("Impossible de communiquer avec le coach IA",s),l((e=>[...e,{id:`error-${Date.now()}`,sender:"coach",text:"D\xe9sol\xe9, j'ai rencontr\xe9 un probl\xe8me technique. Pouvez-vous reformuler votre question ?",timestamp:new Date,category:"error"}]))}finally{p(!1)}},children:(0,g.jsxs)("div",{className:"input-group",children:[(0,g.jsx)(j.A.Control,{id:"coach-input",type:"text",placeholder:"Posez une question sur le cyclisme, l'entra\xeenement, la nutrition...",value:u,onChange:e=>m(e.target.value),disabled:d}),(0,g.jsx)(a.A,{variant:"primary",type:"submit",disabled:d||!u.trim(),children:d?(0,g.jsx)(N,{animation:"border",size:"sm"}):(0,g.jsx)(z.g,{icon:k.isI})})]})})]})]}),(0,g.jsx)("style",{jsx:"true",children:"\n        .cycling-coach {\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n        }\n        \n        .chat-container {\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n        }\n        \n        .chat-messages {\n          flex: 1;\n          overflow-y: auto;\n          max-height: 500px;\n        }\n        \n        .message {\n          margin-bottom: 8px;\n          padding: 10px 15px;\n          border-radius: 8px;\n          max-width: 85%;\n        }\n        \n        .message.user {\n          background-color: #f0f0f0;\n          align-self: flex-end;\n          margin-left: auto;\n        }\n        \n        .message.coach {\n          background-color: #f8f9fa;\n          border-left: 3px solid #0d6efd;\n        }\n        \n        .message-header {\n          display: flex;\n          justify-content: space-between;\n          margin-bottom: 5px;\n          font-size: 0.85rem;\n        }\n        \n        .message-time {\n          color: #6c757d;\n          font-size: 0.75rem;\n        }\n        \n        .cursor-pointer {\n          cursor: pointer;\n        }\n        \n        .suggestion-chip:hover {\n          background-color: #e9ecef !important;\n        }\n        \n        .category-badge {\n          font-size: 0.7rem;\n        }\n        \n        .info-content {\n          font-size: 0.8rem;\n          white-space: pre-wrap;\n        }\n      "})]})};q.defaultProps={activityData:[]};const A=q}}]);
//# sourceMappingURL=1254.6fc322ff.chunk.js.map