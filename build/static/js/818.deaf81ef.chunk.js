"use strict";(self.webpackChunkvelo_altitude=self.webpackChunkvelo_altitude||[]).push([[818],{5818:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ot});var r=n(96540),a=n(34477),l=n(39494),o=n(8861),i=n(69364),c=n(16620),s=n(7675),m=n(67170),u=n.n(m),d=n(22637),h=n(17581),g=n(11123),f=n(21479),p=n(55300),A=n(13696),v=n(68007),E=n(90924),y=n(63287),x=n(61459),b=n(84080);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,d.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const C=new(function(){return(0,g.A)((function e(){(0,f.A)(this,e),this.fingerprintKey="client_fingerprint",this.uaParser=new b,this.initFingerprint()}),[{key:"initFingerprint",value:function(){this.getFingerprint()||this.generateFingerprint()}},{key:"generateFingerprint",value:function(){var e={id:(0,x.A)(),browser:this.getBrowserInfo(),os:this.getOSInfo(),screen:this.getScreenInfo(),timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,languages:navigator.languages||[navigator.language||navigator.userLanguage],hardware:this.getHardwareInfo(),capabilities:this.getCapabilities(),createdAt:(new Date).toISOString()};return localStorage.setItem(this.fingerprintKey,JSON.stringify(e)),e}},{key:"getFingerprint",value:function(){var e=localStorage.getItem(this.fingerprintKey);return e?JSON.parse(e):null}},{key:"getFingerprintId",value:function(){var e=this.getFingerprint();return e?e.id:null}},{key:"updateFingerprint",value:function(){var e=this.getFingerprint();if(!e)return this.generateFingerprint();var t=w(w({},this.generateFingerprint()),{},{id:e.id,previousCreatedAt:e.createdAt,updatedAt:(new Date).toISOString()});return localStorage.setItem(this.fingerprintKey,JSON.stringify(t)),t}},{key:"getBrowserInfo",value:function(){var e=this.uaParser.getBrowser(),t=this.uaParser.getEngine();return{name:e.name||"Unknown",version:e.version||"Unknown",engine:t.name||"Unknown",engineVersion:t.version||"Unknown",userAgent:navigator.userAgent}}},{key:"getOSInfo",value:function(){var e=this.uaParser.getOS();return{name:e.name||"Unknown",version:e.version||"Unknown",platform:navigator.platform||"Unknown"}}},{key:"getScreenInfo",value:function(){return{width:window.screen.width,height:window.screen.height,colorDepth:window.screen.colorDepth,pixelRatio:window.devicePixelRatio||1,orientation:window.screen.orientation?window.screen.orientation.type:"Unknown"}}},{key:"getHardwareInfo",value:function(){var e=this.uaParser.getDevice(),t={deviceType:e.type||"Unknown",deviceModel:e.model||"Unknown",deviceVendor:e.vendor||"Unknown",isMobile:this.isMobileDevice(),isTablet:this.isTabletDevice()};return navigator.hardwareConcurrency&&(t.cpuCores=navigator.hardwareConcurrency),navigator.deviceMemory&&(t.deviceMemory=navigator.deviceMemory),t}},{key:"isMobileDevice",value:function(){return"mobile"===this.uaParser.getDevice().type||/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(navigator.userAgent)}},{key:"isTabletDevice",value:function(){return"tablet"===this.uaParser.getDevice().type||/(tablet|ipad|playbook|silk)|(android(?!.*mobile))/i.test(navigator.userAgent)}},{key:"getCapabilities",value:function(){var e=this,t={cookies:navigator.cookieEnabled,localStorage:this.isLocalStorageEnabled(),sessionStorage:this.isSessionStorageEnabled(),webGL:this.isWebGLEnabled(),webRTC:this.isWebRTCEnabled(),canvas:this.isCanvasEnabled(),svg:this.isSVGEnabled(),webP:null,audio:this.isAudioEnabled(),video:this.isVideoEnabled(),touchPoints:"maxTouchPoints"in navigator?navigator.maxTouchPoints:0,bluetooth:"bluetooth"in navigator,gyroscope:this.hasGyroscope(),serviceWorkers:"serviceWorker"in navigator};return this.testWebPSupport().then((function(n){t.webP=n;var r=e.getFingerprint();r&&(r.capabilities=w(w({},r.capabilities),{},{webP:n}),localStorage.setItem(e.fingerprintKey,JSON.stringify(r)))})),t}},{key:"isLocalStorageEnabled",value:function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}}},{key:"isSessionStorageEnabled",value:function(){try{return sessionStorage.setItem("test","test"),sessionStorage.removeItem("test"),!0}catch(e){return!1}}},{key:"isWebGLEnabled",value:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(t){return!1}}},{key:"isWebRTCEnabled",value:function(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)||!!navigator.getUserMedia||!!navigator.webkitGetUserMedia||!!navigator.mozGetUserMedia}},{key:"isCanvasEnabled",value:function(){try{var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}catch(t){return!1}}},{key:"isSVGEnabled",value:function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}},{key:"testWebPSupport",value:function(){return new Promise((function(e){var t=new Image;t.onload=t.onerror=function(){e(2===t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}))}},{key:"isAudioEnabled",value:function(){return!!(window.AudioContext||window.webkitAudioContext||window.mozAudioContext)}},{key:"isVideoEnabled",value:function(){try{return!!document.createElement("video").canPlayType}catch(e){return!1}}},{key:"hasGyroscope",value:function(){return"DeviceOrientationEvent"in window||"DeviceMotionEvent"in window}},{key:"getAuthFingerprint",value:function(){var e=this.getFingerprint()||this.generateFingerprint();return{id:e.id,browser:"".concat(e.browser.name,"/").concat(e.browser.version),os:"".concat(e.os.name,"/").concat(e.os.version),screen:"".concat(e.screen.width,"x").concat(e.screen.height),isMobile:e.hardware.isMobile,timeZone:e.timeZone,language:e.languages[0]||"unknown"}}}])}());function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,d.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(I=function(){return!!e})()}var j=function(e){function t(e,n){var r,a,l,o;return(0,f.A)(this,t),a=this,l=t,o=[e],l=(0,A.A)(l),(r=(0,p.A)(a,I()?Reflect.construct(l,o||[],(0,A.A)(a).constructor):l.apply(a,o))).name="AuthError",r.code=n,r}return(0,v.A)(t,e),(0,g.A)(t)}((0,E.A)(Error)),T=function(){return(0,g.A)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auth_";(0,f.A)(this,e),this.prefix=t}),[{key:"getAccessToken",value:function(){var e=(0,h.A)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",localStorage.getItem("".concat(this.prefix,"access_token")));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRefreshToken",value:function(){var e=(0,h.A)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",localStorage.getItem("".concat(this.prefix,"refresh_token")));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setTokens",value:function(){var e=(0,h.A)(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem("".concat(this.prefix,"access_token"),t),localStorage.setItem("".concat(this.prefix,"refresh_token"),n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"clearTokens",value:function(){var e=(0,h.A)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("".concat(this.prefix,"access_token")),localStorage.removeItem("".concat(this.prefix,"refresh_token"));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}])}();new(function(){return(0,g.A)((function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.A)(this,e),this.baseUrl=n.baseUrl||"/api/auth",this.tokenStorage=n.tokenStorage||new T,this.refreshThreshold=n.refreshThreshold||300,this.graceEnabled=!1!==n.graceEnabled,this.onSessionExpired=n.onSessionExpired||function(){window.dispatchEvent(new CustomEvent("auth:session-expired"))},this.onTokenRevoked=n.onTokenRevoked||function(){window.dispatchEvent(new CustomEvent("auth:token-revoked"))},this.refreshInterval=setInterval((function(){t.checkAndRefreshToken()}),1e3*(n.refreshCheckInterval||60))}),[{key:"login",value:function(){var e=(0,h.A)(u().mark((function e(t){var n,r,a,l,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=C.getAuthFingerprint(),r=_(_({},t),{},{clientFingerprint:n}),e.next=5,fetch("".concat(this.baseUrl,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 5:if((a=e.sent).ok){e.next=11;break}return e.next=9,a.json();case 9:throw l=e.sent,new j(l.message,l.code);case 11:return e.next=13,a.json();case 13:return o=e.sent,e.next=16,this.tokenStorage.setTokens(o.accessToken,o.refreshToken);case 16:return e.abrupt("return",o.user);case 19:throw e.prev=19,e.t0=e.catch(0),e.t0;case 23:case"end":return e.stop()}}),e,this,[[0,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=(0,h.A)(u().mark((function e(){var t,n,r=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]&&r[0],e.prev=1,e.next=4,this.tokenStorage.getRefreshToken();case 4:if(!(n=e.sent)){e.next=18;break}return e.t0=fetch,e.t1="".concat(this.baseUrl,"/logout"),e.t2="Bearer ",e.next=11,this.tokenStorage.getAccessToken();case 11:return e.t3=e.sent,e.t4=e.t2.concat.call(e.t2,e.t3),e.t5={"Content-Type":"application/json",Authorization:e.t4},e.t6=JSON.stringify({refreshToken:n,revokeAll:t,clientFingerprint:C.getFingerprintId()}),e.t7={method:"POST",headers:e.t5,body:e.t6},e.next=18,(0,e.t0)(e.t1,e.t7);case 18:e.next=23;break;case 20:e.prev=20,e.t8=e.catch(1);case 23:return e.prev=23,e.next=26,this.tokenStorage.clearTokens();case 26:return clearInterval(this.refreshInterval),e.finish(23);case 28:case"end":return e.stop()}}),e,this,[[1,20,23,28]])})));return function(){return e.apply(this,arguments)}}()},{key:"getAuthenticatedFetch",value:function(){var e=(0,h.A)(u().mark((function e(){var t,n=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenStorage.getAccessToken();case 2:if(t=e.sent){e.next=5;break}throw new j("No access token available","no_token");case 5:return e.abrupt("return",function(){var e=(0,h.A)(u().mark((function e(r){var a,l,o,i,c,s=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=_({},s.length>1&&void 0!==s[1]?s[1]:{})).headers=_(_({},a.headers),{},{Authorization:"Bearer ".concat(t)}),(l=C.getFingerprintId())&&(a.headers["X-Client-ID"]=l),e.prev=5,e.next=8,fetch(r,a);case 8:if(401!==(o=e.sent).status&&403!==o.status){e.next=33;break}return e.prev=10,e.next=13,o.json();case 13:i=e.sent,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),i={message:"Authentication error",code:"auth_error"};case 19:if("token_expired"!==i.code||!n.graceEnabled){e.next=32;break}return e.prev=20,e.next=23,n.refreshToken();case 23:if(!(c=e.sent)){e.next=27;break}return a.headers.Authorization="Bearer ".concat(c),e.abrupt("return",fetch(r,a));case 27:e.next=32;break;case 29:e.prev=29,e.t1=e.catch(20);case 32:throw new j(i.message,i.code);case 33:return e.abrupt("return",o);case 36:if(e.prev=36,e.t2=e.catch(5),!(e.t2 instanceof j)){e.next=49;break}if("token_revoked"!==e.t2.code){e.next=45;break}return e.next=42,n.tokenStorage.clearTokens();case 42:n.onTokenRevoked(),e.next=49;break;case 45:if("session_expired"!==e.t2.code&&"invalid_token"!==e.t2.code){e.next=49;break}return e.next=48,n.tokenStorage.clearTokens();case 48:n.onSessionExpired();case 49:throw e.t2;case 50:case"end":return e.stop()}}),e,null,[[5,36],[10,16],[20,29]])})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"refreshToken",value:function(){var e=(0,h.A)(u().mark((function e(){var t,n,r,a,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.tokenStorage.getRefreshToken();case 3:if(t=e.sent){e.next=6;break}throw new j("No refresh token available","no_refresh_token");case 6:return n=C.getAuthFingerprint(),e.next=9,fetch("".concat(this.baseUrl,"/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t,clientFingerprint:n})});case 9:if((r=e.sent).ok){e.next=15;break}return e.next=13,r.json();case 13:throw a=e.sent,new j(a.message,a.code);case 15:return e.next=17,r.json();case 17:return l=e.sent,e.next=20,this.tokenStorage.setTokens(l.accessToken,l.refreshToken);case 20:return e.abrupt("return",l.accessToken);case 23:if(e.prev=23,e.t0=e.catch(0),"invalid_refresh_token"!==e.t0.code&&"refresh_token_expired"!==e.t0.code){e.next=30;break}return e.next=29,this.tokenStorage.clearTokens();case 29:this.onSessionExpired();case 30:throw e.t0;case 31:case"end":return e.stop()}}),e,this,[[0,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"checkAndRefreshToken",value:function(){var e=(0,h.A)(u().mark((function e(){var t,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.tokenStorage.getAccessToken();case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return");case 6:if((n=this._decodeToken(t))&&n.exp){e.next=9;break}return e.abrupt("return");case 9:if(r=Math.floor(Date.now()/1e3),!(n.exp-r<this.refreshThreshold)){e.next=14;break}return e.next=14,this.refreshToken();case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0);case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"_decodeToken",value:function(e){try{return(0,y.s)(e)}catch(t){return null}}},{key:"isAuthenticated",value:function(){var e=(0,h.A)(u().mark((function e(){var t,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenStorage.getAccessToken();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:if((n=this._decodeToken(t))&&n.exp){e.next=8;break}return e.abrupt("return",!1);case 8:return r=Math.floor(Date.now()/1e3),e.abrupt("return",n.exp>r);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserInfo",value:function(){var e=(0,h.A)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenStorage.getAccessToken();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return n=this._decodeToken(t),e.abrupt("return",n?n.user:null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){clearInterval(this.refreshInterval)}}])}());var P=n(74844),O=n(95920),D=n(15584),F=n(27461);P.A,P.A,O.A,D.A,D.A,O.A,F.A;var B=(0,i.createContext)(null);var M=(0,i.createContext)();var z=n(78483),R=n(76082),L=n(25270),W=n(29631),U=n(53441),G=n(76485),N=n(4658),V=n(50385),H=n(41215),J=n(45061),K=n(89774),Q=n(28400),X=n(68132),Z=n(79416),Y=n(77078),q=n(32233),$=n(79526),ee=n(49948),te=n(60510),ne=n(2706),re=n(39778),ae=n(98305),le=n(57590),oe=n(65479),ie=n(97807),ce=n(97555),se=n(52345),me=n(63060),ue=n(18892),de=n(92360),he=n(11653),ge=n(44714),fe=n(35099);const pe=function(e){var t=e.cols,n=e.loading,r=e.filters,a=e.onFilterChange,l=e.onResetFilters,o=e.onSelectCol,s=e.onViewDetails,m=e.selectedColsIds,u=(0,c.Bd)().t,d=(0,i.useState)([]),h=(0,Y.A)(d,2),g=h[0],f=h[1],p=(0,i.useMemo)((function(){return(0,Z.A)(new Set(t.map((function(e){return e.country})))).sort()}),[t]),A=(0,i.useMemo)((function(){return(0,Z.A)(new Set(t.map((function(e){return e.region})))).sort()}),[t]);(0,i.useEffect)((function(){var e=(0,Z.A)(t);if(r.region&&(e=e.filter((function(e){return e.region===r.region}))),r.country&&(e=e.filter((function(e){return e.country===r.country}))),r.minAltitude&&(e=e.filter((function(e){return e.altitude>=parseInt(r.minAltitude)}))),r.maxAltitude&&(e=e.filter((function(e){return e.altitude<=parseInt(r.maxAltitude)}))),r.difficulty&&(e=e.filter((function(e){return e.difficulty===r.difficulty}))),r.searchQuery){var n=r.searchQuery.toLowerCase();e=e.filter((function(e){return e.name.toLowerCase().includes(n)||e.region.toLowerCase().includes(n)||e.country.toLowerCase().includes(n)}))}f(e)}),[t,r]);return i.createElement(z.A,null,i.createElement(R.A,{elevation:1,sx:{p:2,mb:3}},i.createElement(oe.Ay,{container:!0,spacing:2,alignItems:"center"},i.createElement(oe.Ay,{item:!0,xs:12,sm:4,md:3},i.createElement(ie.A,{fullWidth:!0,label:u("challenges.search"),name:"searchQuery",value:r.searchQuery,onChange:a,InputProps:{startAdornment:i.createElement(J.A,{sx:{color:"action.active",mr:1}})}})),i.createElement(oe.Ay,{item:!0,xs:12,sm:4,md:3},i.createElement(ce.A,{fullWidth:!0},i.createElement(se.A,{id:"country-select-label"},u("cols.country")),i.createElement(me.A,{labelId:"country-select-label",name:"country",value:r.country,label:u("cols.country"),onChange:a},i.createElement(ue.A,{value:""},i.createElement("em",null,u("common.all"))),p.map((function(e){return i.createElement(ue.A,{key:e,value:e},e)}))))),i.createElement(oe.Ay,{item:!0,xs:12,sm:4,md:3},i.createElement(ce.A,{fullWidth:!0},i.createElement(se.A,{id:"region-select-label"},u("cols.region")),i.createElement(me.A,{labelId:"region-select-label",name:"region",value:r.region,label:u("cols.region"),onChange:a},i.createElement(ue.A,{value:""},i.createElement("em",null,u("common.all"))),A.map((function(e){return i.createElement(ue.A,{key:e,value:e},e)}))))),i.createElement(oe.Ay,{item:!0,xs:12,sm:4,md:3},i.createElement(ce.A,{fullWidth:!0},i.createElement(se.A,{id:"difficulty-select-label"},u("cols.difficulty")),i.createElement(me.A,{labelId:"difficulty-select-label",name:"difficulty",value:r.difficulty,label:u("cols.difficulty"),onChange:a},i.createElement(ue.A,{value:""},i.createElement("em",null,u("common.all"))),i.createElement(ue.A,{value:"HC"},"HC"),i.createElement(ue.A,{value:"1"},"1"),i.createElement(ue.A,{value:"2"},"2"),i.createElement(ue.A,{value:"3"},"3"),i.createElement(ue.A,{value:"4"},"4")))),i.createElement(oe.Ay,{item:!0,xs:12,sm:4,md:2},i.createElement(ie.A,{fullWidth:!0,type:"number",label:u("cols.min_altitude"),name:"minAltitude",value:r.minAltitude,onChange:a,InputProps:{inputProps:{min:0}}})),i.createElement(oe.Ay,{item:!0,xs:12,sm:4,md:2},i.createElement(ie.A,{fullWidth:!0,type:"number",label:u("cols.max_altitude"),name:"maxAltitude",value:r.maxAltitude,onChange:a,InputProps:{inputProps:{min:0}}})),i.createElement(oe.Ay,{item:!0,xs:12,sm:4,md:"auto"},i.createElement(le.A,{fullWidth:!0,variant:"outlined",color:"secondary",startIcon:i.createElement(fe.A,null),onClick:l},u("common.reset_filters"))))),n?i.createElement(z.A,{sx:{display:"flex",justifyContent:"center",py:4}},i.createElement(G.A,null)):g.length>0?i.createElement(oe.Ay,{container:!0,spacing:3},g.map((function(e){return i.createElement(oe.Ay,{item:!0,key:e.id,xs:12,sm:6,md:4,lg:3},function(e){var t=m.includes(e.id);return i.createElement(q.A,{elevation:3,key:e.id,sx:{height:"100%",display:"flex",flexDirection:"column"}},i.createElement($.A,{component:"img",height:"140",image:e.image||"/images/cols/placeholder.jpg",alt:e.name,sx:{objectFit:"cover"}}),i.createElement(ee.A,{sx:{flexGrow:1}},i.createElement(V.A,{variant:"h6",gutterBottom:!0,component:"div",noWrap:!0},e.name),i.createElement(z.A,{sx:{display:"flex",alignItems:"center",mb:1}},i.createElement(Q.A,{fontSize:"small",sx:{mr:.5,color:"text.secondary"}}),i.createElement(V.A,{variant:"body2",color:"text.secondary"},e.region,", ",e.country)),i.createElement(z.A,{sx:{display:"flex",alignItems:"center",mb:2}},i.createElement(de.A,{fontSize:"small",sx:{mr:.5,color:"text.secondary"}}),i.createElement(V.A,{variant:"body2",color:"text.secondary"},e.altitude,"m \u2022 ",e.length,"km \u2022 ",e.gradient,"%")),i.createElement(z.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5}},i.createElement(te.A,{size:"small",label:"".concat(u("cols.difficulty"),": ").concat(e.difficulty),color:"HC"===e.difficulty?"error":"1"===e.difficulty?"warning":"2"===e.difficulty?"success":"3"===e.difficulty?"info":"default"}),e.isPopular&&i.createElement(te.A,{size:"small",label:u("cols.popular"),color:"primary"}))),i.createElement(ne.A,{sx:{justifyContent:"space-between",p:2}},i.createElement(re.A,{title:u("common.view_details")},i.createElement(ae.A,{size:"small",color:"primary",onClick:function(){return s(e)}},i.createElement(he.A,null))),i.createElement(le.A,{size:"small",variant:t?"outlined":"contained",color:t?"secondary":"primary",startIcon:i.createElement(ge.A,null),onClick:function(){return o(e)},disabled:t||m.length>=7},u(t?"challenges.seven_majors.added":"challenges.seven_majors.add_to_challenge"))))}(e))}))):i.createElement(U.A,{severity:"info",sx:{mt:2}},u("challenges.seven_majors.no_results")))};var Ae=n(88329),ve=n(67),Ee=n(86762),ye=n(93212),xe=n(26066),be=n(59629),ke=n(46597),we=n(57006);const Ce=function(e){var t=e.selectedCols,n=e.challengeName,r=e.onChallengeTitleChange,a=e.onRemoveCol,l=e.onViewCol,o=e.onSaveChallenge,s=e.onMarkAsCompleted,m=e.onScheduleAscent,u=e.onShareChallenge,d=e.isPublic,h=e.onTogglePublic,g=e.isAuthenticated,f=e.completedCols,p=e.scheduledAscents,A=(0,c.Bd)().t,v=(0,i.useMemo)((function(){if(!t||0===t.length)return null;var e=t.reduce((function(e,t){return e+t.altitude}),0),n=t.reduce((function(e,t){return e+t.length}),0),r={HC:5,1:4,2:3,3:2,4:1},a=t.reduce((function(e,t){return e+(r[t.difficulty]||3)}),0)/t.length;return{totalAltitude:e,totalLength:n,avgDifficulty:a>=4.5?"HC":a>=3.5?"1":a>=2.5?"2":a>=1.5?"3":"4",avgGradient:t.reduce((function(e,t){return e+t.gradient}),0)/t.length}}),[t]),E=(0,i.useMemo)((function(){return t&&0!==t.length?t.filter((function(e){return f.includes(e.id)})).length/t.length*100:0}),[t,f]);return i.createElement(z.A,null,i.createElement(R.A,{elevation:3,sx:{p:3,mb:3}},i.createElement(oe.Ay,{container:!0,spacing:3,alignItems:"center"},i.createElement(oe.Ay,{item:!0,xs:12,md:6},i.createElement(ie.A,{fullWidth:!0,label:A("challenges.seven_majors.challenge_name"),value:n,onChange:r,variant:"outlined"})),i.createElement(oe.Ay,{item:!0,xs:12,md:6},i.createElement(z.A,{sx:{display:"flex",justifyContent:{xs:"flex-start",md:"flex-end"},gap:2}},g&&i.createElement(i.Fragment,null,i.createElement(Ae.A,{control:i.createElement(ve.A,{checked:d,onChange:h,color:"primary"}),label:A("challenges.seven_majors.public_challenge")}),i.createElement(le.A,{variant:"contained",color:"primary",startIcon:i.createElement(ye.A,null),onClick:o,disabled:0===t.length},A("common.save")),i.createElement(le.A,{variant:"outlined",color:"primary",startIcon:i.createElement(xe.A,null),onClick:u,disabled:0===t.length},A("common.share"))))))),t.length>0&&i.createElement(R.A,{elevation:3,sx:{p:3,mb:3}},i.createElement(z.A,{sx:{mb:2}},i.createElement(V.A,{variant:"h6",gutterBottom:!0},i.createElement(K.A,{sx:{verticalAlign:"middle",mr:1}}),A("challenges.seven_majors.progress")),i.createElement(Ee.A,{variant:"determinate",value:E,color:"success",sx:{height:10,borderRadius:5}}),i.createElement(V.A,{variant:"body2",sx:{mt:1}},A("challenges.seven_majors.completed"),": ",t.filter((function(e){return f.includes(e.id)})).length,"/",t.length)),v&&i.createElement(oe.Ay,{container:!0,spacing:2,sx:{mt:2}},i.createElement(oe.Ay,{item:!0,xs:6,sm:3},i.createElement(V.A,{variant:"body2",color:"text.secondary",gutterBottom:!0},A("cols.total_altitude")),i.createElement(V.A,{variant:"h6"},v.totalAltitude," m")),i.createElement(oe.Ay,{item:!0,xs:6,sm:3},i.createElement(V.A,{variant:"body2",color:"text.secondary",gutterBottom:!0},A("cols.total_length")),i.createElement(V.A,{variant:"h6"},v.totalLength," km")),i.createElement(oe.Ay,{item:!0,xs:6,sm:3},i.createElement(V.A,{variant:"body2",color:"text.secondary",gutterBottom:!0},A("cols.avg_difficulty")),i.createElement(V.A,{variant:"h6"},v.avgDifficulty)),i.createElement(oe.Ay,{item:!0,xs:6,sm:3},i.createElement(V.A,{variant:"body2",color:"text.secondary",gutterBottom:!0},A("cols.avg_gradient")),i.createElement(V.A,{variant:"h6"},v.avgGradient.toFixed(1),"%")))),t.length>0?i.createElement(oe.Ay,{container:!0,spacing:3},t.map((function(e){return i.createElement(oe.Ay,{item:!0,key:e.id,xs:12,sm:6,md:4},i.createElement(q.A,{elevation:3},i.createElement($.A,{component:"img",height:"140",image:e.image||"/images/cols/placeholder.jpg",alt:e.name,sx:{objectFit:"cover",filter:f.includes(e.id)?"grayscale(0%)":"grayscale(40%)"}}),f.includes(e.id)&&i.createElement(z.A,{sx:{position:"absolute",top:10,right:10,bgcolor:"success.main",color:"white",borderRadius:"50%",width:36,height:36,display:"flex",alignItems:"center",justifyContent:"center"}},i.createElement(be.A,null)),i.createElement(ee.A,null,i.createElement(V.A,{variant:"h6",gutterBottom:!0},e.name),i.createElement(z.A,{sx:{display:"flex",alignItems:"center",mb:1}},i.createElement(Q.A,{fontSize:"small",sx:{mr:.5,color:"text.secondary"}}),i.createElement(V.A,{variant:"body2",color:"text.secondary"},e.region,", ",e.country)),i.createElement(z.A,{sx:{display:"flex",alignItems:"center",mb:1}},i.createElement(de.A,{fontSize:"small",sx:{mr:.5,color:"text.secondary"}}),i.createElement(V.A,{variant:"body2",color:"text.secondary"},e.altitude,"m \u2022 ",e.length,"km \u2022 ",e.gradient,"%")),p[e.id]&&i.createElement(z.A,{sx:{display:"flex",alignItems:"center",mb:1}},i.createElement(ke.A,{fontSize:"small",sx:{mr:.5,color:"primary.main"}}),i.createElement(V.A,{variant:"body2",color:"primary.main"},A("challenges.seven_majors.scheduled_for"),": ",new Date(p[e.id]).toLocaleDateString()))),i.createElement(ne.A,{sx:{justifyContent:"space-between",p:2}},i.createElement(z.A,null,i.createElement(re.A,{title:A("common.view_details")},i.createElement(ae.A,{size:"small",color:"primary",onClick:function(){return l(e)}},i.createElement(he.A,null))),i.createElement(re.A,{title:A("common.remove")},i.createElement(ae.A,{size:"small",color:"error",onClick:function(){return a(e.id)}},i.createElement(we.A,null)))),i.createElement(z.A,null,g&&i.createElement(i.Fragment,null,i.createElement(le.A,{size:"small",variant:"outlined",color:"primary",startIcon:i.createElement(ke.A,null),onClick:function(){return m(e.id)},sx:{mr:1}},A("challenges.seven_majors.schedule")),i.createElement(le.A,{size:"small",variant:"contained",color:f.includes(e.id)?"success":"primary",startIcon:f.includes(e.id)?i.createElement(be.A,null):null,onClick:function(){return s(e.id)}},f.includes(e.id)?A("challenges.seven_majors.completed"):A("challenges.seven_majors.mark_completed")))))))})),Array.from({length:Math.max(0,7-t.length)}).map((function(e,n){return i.createElement(oe.Ay,{item:!0,key:"empty-".concat(n),xs:12,sm:6,md:4},i.createElement(R.A,{elevation:1,sx:{height:"100%",minHeight:320,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",p:3,border:"2px dashed",borderColor:"divider"}},i.createElement(V.A,{variant:"h6",color:"text.secondary",gutterBottom:!0,align:"center"},A("challenges.seven_majors.add_more_cols")),i.createElement(V.A,{variant:"body2",color:"text.secondary",align:"center"},A("challenges.seven_majors.cols_remaining",{count:7-t.length}))))}))):i.createElement(U.A,{severity:"info",sx:{mt:2}},A("challenges.seven_majors.empty_challenge")))};var Se=n(11951);const _e=function(e){var t=e.challenges,n=e.loading,r=e.error,a=e.onLoadChallenge,l=e.onViewColDetails,o=(0,c.Bd)().t;return n?i.createElement(z.A,{sx:{display:"flex",justifyContent:"center",py:4}},i.createElement(G.A,null)):r?i.createElement(U.A,{severity:"error",sx:{mt:2}},r):t&&0!==t.length?i.createElement(z.A,null,i.createElement(V.A,{variant:"subtitle1",gutterBottom:!0},o("challenges.seven_majors.predefined_intro")),i.createElement(oe.Ay,{container:!0,spacing:3,sx:{mt:2}},t.map((function(e){return i.createElement(oe.Ay,{item:!0,key:e.id,xs:12,md:6},i.createElement(q.A,{elevation:3},i.createElement($.A,{component:"img",height:"160",image:e.image||"/images/challenges/placeholder.jpg",alt:e.name,sx:{objectFit:"cover"}}),i.createElement(ee.A,null,i.createElement(z.A,{sx:{display:"flex",alignItems:"center",mb:2}},i.createElement(K.A,{sx:{mr:1,color:"primary.main"}}),i.createElement(V.A,{variant:"h5"},e.name)),i.createElement(V.A,{variant:"body2",color:"text.secondary",paragraph:!0},e.description),i.createElement(z.A,{sx:{mb:2}},i.createElement(V.A,{variant:"subtitle2",gutterBottom:!0},o("challenges.seven_majors.difficulty"),":"),i.createElement(te.A,{label:e.difficulty,color:"Expert"===e.difficulty?"error":"Avanc\xe9"===e.difficulty?"warning":"Interm\xe9diaire"===e.difficulty?"success":"info",size:"small"})),i.createElement(Se.A,{sx:{my:2}}),i.createElement(V.A,{variant:"subtitle2",gutterBottom:!0},o("challenges.seven_majors.included_cols"),":"),i.createElement(oe.Ay,{container:!0,spacing:1},e.cols.map((function(e){return i.createElement(oe.Ay,{item:!0,key:e.id,xs:12},i.createElement(z.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:1,bgcolor:"background.paper",borderRadius:1,"&:hover":{bgcolor:"action.hover"}}},i.createElement(z.A,null,i.createElement(V.A,{variant:"body2"},e.name),i.createElement(V.A,{variant:"caption",color:"text.secondary"},e.region,", ",e.country," \u2022 ",e.altitude,"m")),i.createElement(re.A,{title:o("common.view_details")},i.createElement(ae.A,{size:"small",onClick:function(){return l(e)}},i.createElement(he.A,{fontSize:"small"})))))})))),i.createElement(ne.A,{sx:{justifyContent:"flex-end",p:2}},i.createElement(le.A,{variant:"contained",color:"primary",startIcon:i.createElement(ge.A,null),onClick:function(){return a(e)}},o("challenges.seven_majors.load_challenge")))))})))):i.createElement(U.A,{severity:"info",sx:{mt:2}},o("challenges.seven_majors.no_predefined"))};var Ie=n(98412),je=n(32167),Te=n(22375),Pe=n(79765),Oe=n(371),De=n(32913),Fe=n(31539);const Be=function(e){var t=e.challenges,n=e.loading,r=e.onLoadChallenge,a=e.onDeleteChallenge,l=e.onLikeChallenge,o=e.onViewColDetails,s=e.onShareChallenge,m=e.userLikes,u=(0,c.Bd)().t,d=(0,i.useState)(""),h=(0,Y.A)(d,2),g=h[0],f=h[1],p=(0,i.useState)(!1),A=(0,Y.A)(p,2),v=A[0],E=A[1],y=(0,i.useState)(null),x=(0,Y.A)(y,2),b=x[0],k=x[1],w=t.filter((function(e){return e.name.toLowerCase().includes(g.toLowerCase())||e.createdBy.name.toLowerCase().includes(g.toLowerCase())}));return n?i.createElement(z.A,{sx:{display:"flex",justifyContent:"center",py:4}},i.createElement(G.A,null)):t&&0!==t.length?i.createElement(z.A,null,i.createElement(ie.A,{fullWidth:!0,placeholder:u("common.search_challenges"),value:g,onChange:function(e){return f(e.target.value)},sx:{mb:3},InputProps:{startAdornment:i.createElement(Ie.A,{position:"start"},i.createElement(J.A,null))}}),0===w.length?i.createElement(U.A,{severity:"info"},u("challenges.seven_majors.no_search_results")):i.createElement(oe.Ay,{container:!0,spacing:3},w.map((function(e){return i.createElement(oe.Ay,{item:!0,key:e.id,xs:12,md:6},i.createElement(q.A,{elevation:3},i.createElement($.A,{component:"img",height:"140",image:e.image||"/images/challenges/placeholder.jpg",alt:e.name,sx:{objectFit:"cover"}}),i.createElement(ee.A,null,i.createElement(z.A,{sx:{display:"flex",alignItems:"center",mb:2}},i.createElement(K.A,{sx:{mr:1,color:"primary.main"}}),i.createElement(V.A,{variant:"h5"},e.name)),i.createElement(V.A,{variant:"body2",color:"text.secondary",paragraph:!0},u("challenges.seven_majors.created_by"),": ",e.createdBy.name),i.createElement(z.A,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2}},i.createElement(te.A,{icon:i.createElement(Q.A,null),label:e.isPublic?u("common.public"):u("common.private"),size:"small",color:e.isPublic?"primary":"default"}),i.createElement(te.A,{label:"".concat(e.cols.length," cols"),size:"small"}),i.createElement(te.A,{icon:i.createElement(De.A,null),label:e.likes||0,size:"small",color:"secondary"})),i.createElement(Se.A,{sx:{my:2}}),i.createElement(V.A,{variant:"subtitle2",gutterBottom:!0},u("challenges.seven_majors.included_cols"),":"),i.createElement(oe.Ay,{container:!0,spacing:1,sx:{mb:2}},e.cols.slice(0,3).map((function(e){return i.createElement(oe.Ay,{item:!0,key:e.id,xs:12},i.createElement(z.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:1,bgcolor:"background.paper",borderRadius:1,"&:hover":{bgcolor:"action.hover"}}},i.createElement(z.A,null,i.createElement(V.A,{variant:"body2"},e.name),i.createElement(V.A,{variant:"caption",color:"text.secondary"},e.region,", ",e.country," \u2022 ",e.altitude,"m")),i.createElement(re.A,{title:u("common.view_details")},i.createElement(ae.A,{size:"small",onClick:function(){return o(e)}},i.createElement(he.A,{fontSize:"small"})))))})),e.cols.length>3&&i.createElement(V.A,{variant:"body2",sx:{p:1,color:"text.secondary"}},"+",e.cols.length-3," ",u("common.more"),"..."))),i.createElement(ne.A,{sx:{p:2}},i.createElement(z.A,{sx:{display:"flex",gap:1}},i.createElement(re.A,{title:u("common.like")},i.createElement(ae.A,{color:m[e.id]?"secondary":"default",onClick:function(){return l(e.id)}},m[e.id]?i.createElement(De.A,null):i.createElement(Fe.A,null))),i.createElement(re.A,{title:u("common.share")},i.createElement(ae.A,{color:"primary",onClick:function(){return s(e)}},i.createElement(xe.A,null))),e.createdBy.isSelf&&i.createElement(re.A,{title:u("common.delete")},i.createElement(ae.A,{color:"error",onClick:function(){return function(e){k(e),E(!0)}(e)}},i.createElement(we.A,null)))),i.createElement(z.A,{sx:{flexGrow:1}}),i.createElement(le.A,{variant:"contained",color:"primary",onClick:function(){return r(e)}},u("challenges.seven_majors.load_challenge")))))}))),i.createElement(je.A,{open:v,onClose:function(){return E(!1)}},i.createElement(Te.A,null,u("common.confirm_delete")),i.createElement(Pe.A,null,i.createElement(V.A,null,u("challenges.seven_majors.confirm_delete_challenge",{name:(null===b||void 0===b?void 0:b.name)||""}))),i.createElement(Oe.A,null,i.createElement(le.A,{onClick:function(){return E(!1)}},u("common.cancel")),i.createElement(le.A,{onClick:function(){b&&(a(b.id),k(null),E(!1))},color:"error",variant:"contained"},u("common.delete"))))):i.createElement(U.A,{severity:"info",sx:{mt:2}},u("challenges.seven_majors.no_saved_challenges"))};var Me=n(81471),ze=n(15810),Re=n(11641),Le=n(10691),We=n(63307),Ue=n(59929),Ge=n(48690),Ne=n(2241),Ve=n(93692),He=n(95997),Je=n(79088),Ke=n(58674),Qe=n(23491),Xe=n(36716),Ze=n(7943),Ye=function(e){var t=e.data,n=e.color,r=void 0===n?"#444444":n,a=(0,i.useRef)(),l=t.map((function(e){return new Ze.Vector3(e.x,e.y,e.z)})),o=new Ze.CatmullRomCurve3(l),c=new Ze.TubeGeometry(o,100,.2,8,!1);return i.createElement("mesh",{ref:a},i.createElement("primitive",{object:c,attach:"geometry"}),i.createElement("meshStandardMaterial",{color:r,roughness:.6}))},qe=function(e){var t=e.data,n=(0,i.useRef)(),r=Math.max.apply(Math,(0,Z.A)(t.map((function(e){return e.x}))))+2,a=(Math.max.apply(Math,(0,Z.A)(t.map((function(e){return e.y})))),Math.min.apply(Math,(0,Z.A)(t.map((function(e){return e.y}))))-.5);return i.createElement("mesh",{ref:n,rotation:[-Math.PI/2,0,0],position:[r/2,a-.1,0]},i.createElement("planeGeometry",{args:[1.5*r,10]}),i.createElement("meshStandardMaterial",{color:"#4b7f52",wireframe:!1}))},$e=function(e){var t,n=e.position,r=e.name,a=e.type,l=(0,i.useState)(!1),o=(0,Y.A)(l,2),c=o[0],s=o[1];switch(a){case"viewpoint":t="#1E88E5";break;case"rest":t="#43A047";break;case"summit":t="#E53935";break;default:t="#FFC107"}return i.createElement("group",{position:n},i.createElement("mesh",{onPointerOver:function(){return s(!0)},onPointerOut:function(){return s(!1)}},i.createElement("sphereGeometry",{args:[.15,16,16]}),i.createElement("meshStandardMaterial",{color:t})),c&&i.createElement(Qe.E,{position:[0,.3,0],color:"white",fontSize:.15,maxWidth:2,textAlign:"center",anchorX:"center",anchorY:"middle",outlineWidth:.01,outlineColor:"#000000"},r))},et=function(e){var t=e.data,n=(0,Je.D)().camera,r=Math.max.apply(Math,(0,Z.A)(t.map((function(e){return e.x})))),a=Math.max.apply(Math,(0,Z.A)(t.map((function(e){return e.y}))));return(0,i.useEffect)((function(){n.position.set(r/2,2*a,5),n.lookAt(r/2,0,0)}),[n,r,a]),i.createElement(i.Fragment,null,i.createElement(Xe.N,{enablePan:!0,enableZoom:!0,enableRotate:!0,target:[r/2,a/2,0]}),i.createElement("ambientLight",{intensity:.5}),i.createElement("directionalLight",{position:[10,10,5],intensity:.7}),i.createElement("directionalLight",{position:[-10,10,5],intensity:.3}))},tt=function(e){var t=e.data,n=e.isPlaying,r=(0,Je.D)().camera,a=t.map((function(e){return new Ze.Vector3(e.x,e.y+.5,e.z)})),l=new Ze.CatmullRomCurve3(a),o=(0,i.useState)(0),c=(0,Y.A)(o,2),s=c[0],m=c[1];return(0,Je.F)((function(){if(n){m((function(e){return(e+.001)%1}));var e=l.getPoint(s),t=l.getPoint(Math.min(s+.01,1));r.position.set(e.x,e.y,e.z),r.lookAt(t.x,t.y,t.z)}})),null};const nt=function(e){e.colId;var t=e.colData,n=e.pointsOfInterest,r=(0,i.useState)(!0),a=(0,Y.A)(r,2),l=a[0],o=a[1],c=(0,i.useState)(null),s=(0,Y.A)(c,2),m=s[0],u=s[1],d=(0,i.useState)(null),h=(0,Y.A)(d,2),g=h[0],f=h[1],p=(0,i.useState)(!1),A=(0,Y.A)(p,2),v=A[0],E=A[1];return(0,i.useEffect)((function(){t?(f(t),o(!1)):(u("Donn\xe9es du col non disponibles"),o(!1))}),[t]),l?i.createElement(z.A,{display:"flex",justifyContent:"center",alignItems:"center",height:"400px"},i.createElement(G.A,null)):m?i.createElement(z.A,{display:"flex",justifyContent:"center",alignItems:"center",height:"400px"},i.createElement(V.A,{color:"error"},m)):g?i.createElement(R.A,{elevation:2,sx:{height:"400px",width:"100%",overflow:"hidden",position:"relative"}},i.createElement(V.A,{variant:"button",sx:{position:"absolute",top:10,left:10,zIndex:1,backgroundColor:"rgba(0,0,0,0.6)",color:"white",padding:"5px 10px",borderRadius:"4px",cursor:"pointer"},onClick:function(){return E(!v)}},v?"Arr\xeater l'animation":"Parcourir le col"),i.createElement(Ke.Hl,{shadows:!0},i.createElement(et,{data:g}),i.createElement(tt,{data:g,isPlaying:v}),i.createElement(qe,{data:g}),i.createElement(Ye,{data:g}),n&&n.map((function(e,t){var n=e.distance/Math.max.apply(Math,(0,Z.A)(g.map((function(e){return e.x})))),r=Math.floor(n*g.length),a=g[Math.min(r,g.length-1)];return i.createElement($e,{key:t,position:[a.x,a.y+.3,a.z],name:e.name,type:e.type})})))):null};const rt=function(e){var t=e.open,n=e.col,r=e.onClose,a=e.onExportTrack,l=e.onMarkAsCompleted,o=e.onAddToChallenge,s=e.isSelected,m=e.isCompleted,u=e.maxColsReached,d=e.exportFormat,h=e.onExportFormatChange,g=e.weatherData,f=(0,c.Bd)().t;return n?i.createElement(je.A,{open:t,onClose:r,maxWidth:"lg",fullWidth:!0,"aria-labelledby":"col-details-dialog-title"},i.createElement(Te.A,{id:"col-details-dialog-title"},i.createElement(z.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}},i.createElement(V.A,{variant:"h5"},n.name),i.createElement(ae.A,{onClick:r,"aria-label":"close"},i.createElement(Ue.A,null)))),i.createElement(Pe.A,{dividers:!0},i.createElement(oe.Ay,{container:!0,spacing:3},i.createElement(oe.Ay,{item:!0,xs:12,md:6},i.createElement(z.A,{sx:{mb:3}},i.createElement("img",{src:n.image||"/images/cols/placeholder.jpg",alt:n.name,style:{width:"100%",height:"300px",objectFit:"cover",borderRadius:"8px"}})),i.createElement(V.A,{variant:"h6",gutterBottom:!0},f("cols.details")),i.createElement(oe.Ay,{container:!0,spacing:2},i.createElement(oe.Ay,{item:!0,xs:6},i.createElement(z.A,{sx:{display:"flex",alignItems:"center",mb:1}},i.createElement(Q.A,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),i.createElement(V.A,{variant:"body2",color:"text.secondary"},f("cols.location"),":")),i.createElement(V.A,{variant:"body1"},n.region,", ",n.country)),i.createElement(oe.Ay,{item:!0,xs:6},i.createElement(z.A,{sx:{display:"flex",alignItems:"center",mb:1}},i.createElement(de.A,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),i.createElement(V.A,{variant:"body2",color:"text.secondary"},f("cols.altitude"),":")),i.createElement(V.A,{variant:"body1"},n.altitude," m")),i.createElement(oe.Ay,{item:!0,xs:6},i.createElement(z.A,{sx:{display:"flex",alignItems:"center",mb:1}},i.createElement(Ge.A,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),i.createElement(V.A,{variant:"body2",color:"text.secondary"},f("cols.length"),":")),i.createElement(V.A,{variant:"body1"},n.length," km")),i.createElement(oe.Ay,{item:!0,xs:6},i.createElement(z.A,{sx:{display:"flex",alignItems:"center",mb:1}},i.createElement(Ge.A,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),i.createElement(V.A,{variant:"body2",color:"text.secondary"},f("cols.avg_gradient"),":")),i.createElement(V.A,{variant:"body1"},n.gradient,"%")),i.createElement(oe.Ay,{item:!0,xs:6},i.createElement(z.A,{sx:{display:"flex",alignItems:"center",mb:1}},i.createElement(Ge.A,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),i.createElement(V.A,{variant:"body2",color:"text.secondary"},f("cols.max_gradient"),":")),i.createElement(V.A,{variant:"body1"},n.maxGradient||"-","%")),i.createElement(oe.Ay,{item:!0,xs:6},i.createElement(z.A,{sx:{display:"flex",alignItems:"center",mb:1}},i.createElement(Ge.A,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),i.createElement(V.A,{variant:"body2",color:"text.secondary"},f("cols.difficulty"),":")),i.createElement(te.A,{label:n.difficulty,size:"small",color:"HC"===n.difficulty?"error":"1"===n.difficulty?"warning":"2"===n.difficulty?"success":"3"===n.difficulty?"info":"default"}))),n.description&&i.createElement(z.A,{sx:{mt:3}},i.createElement(V.A,{variant:"h6",gutterBottom:!0},f("cols.description")),i.createElement(V.A,{variant:"body2",paragraph:!0},n.description)),g&&i.createElement(z.A,{sx:{mt:3}},i.createElement(V.A,{variant:"h6",gutterBottom:!0},f("cols.current_weather")),i.createElement(oe.Ay,{container:!0,spacing:2},i.createElement(oe.Ay,{item:!0,xs:6},i.createElement(z.A,{sx:{display:"flex",alignItems:"center"}},g.isGoodWeather?i.createElement(Ne.A,{sx:{mr:1,color:"warning.main"}}):i.createElement(Ve.A,{sx:{mr:1,color:"info.main"}}),i.createElement(V.A,{variant:"body2"},g.condition))),i.createElement(oe.Ay,{item:!0,xs:6},i.createElement(V.A,{variant:"body2"},f("cols.temperature"),": ",g.temperature,"\xb0C")),i.createElement(oe.Ay,{item:!0,xs:6},i.createElement(V.A,{variant:"body2"},f("cols.wind"),": ",g.wind," km/h")),i.createElement(oe.Ay,{item:!0,xs:6},i.createElement(V.A,{variant:"body2"},f("cols.humidity"),": ",g.humidity,"%")))),n.stories&&n.stories.length>0&&i.createElement(z.A,{sx:{mt:3}},i.createElement(V.A,{variant:"h6",gutterBottom:!0},f("cols.stories")),i.createElement("ul",null,n.stories.map((function(e,t){return i.createElement("li",{key:t},i.createElement(V.A,{variant:"body2"},e))})))),n.pointsOfInterest&&n.pointsOfInterest.length>0&&i.createElement(z.A,{sx:{mt:3}},i.createElement(V.A,{variant:"h6",gutterBottom:!0},f("cols.points_of_interest")),i.createElement(Me.A,{dense:!0},n.pointsOfInterest.map((function(e,t){return i.createElement(ze.Ay,{key:t},i.createElement(Re.A,{primary:e.name,secondary:e.description}))}))))),i.createElement(oe.Ay,{item:!0,xs:12,md:6},i.createElement(z.A,{sx:{height:"100%",minHeight:"400px"}},i.createElement(V.A,{variant:"h6",gutterBottom:!0},f("cols.profile_visualization")),i.createElement(nt,{colId:n.id,colData:n.elevationData||[],pointsOfInterest:n.pointsOfInterest||[]}))))),i.createElement(Oe.A,{sx:{justifyContent:"space-between",p:2}},i.createElement(le.A,{onClick:r,color:"inherit"},f("common.close")),i.createElement(z.A,{sx:{display:"flex",alignItems:"center"}},i.createElement(Le.A,{value:d,exclusive:!0,onChange:function(e,t){return t&&h(t)},size:"small",sx:{mr:1}},i.createElement(We.A,{value:"gpx"},"GPX"),i.createElement(We.A,{value:"tcx"},"TCX")),i.createElement(le.A,{onClick:function(){return a(n)},startIcon:i.createElement(He.A,null),color:"secondary",variant:"outlined",size:"small"},f("common.export"))),s&&i.createElement(le.A,{onClick:function(){return l(n.id)},color:m?"success":"primary",variant:"outlined",startIcon:m?i.createElement(be.A,null):null},f(m?"challenges.seven_majors.completed":"challenges.seven_majors.mark_as_completed")),i.createElement(le.A,{onClick:function(){return o(n)},color:"primary",variant:"contained",disabled:s||u},f("challenges.seven_majors.add_to_challenge")))):null};const at=function(e){var t=e.open,n=e.onClose,r=e.onSchedule,a=e.selectedColId,l=e.selectedColName,o=(0,c.Bd)().t,s=(0,i.useState)(""),m=(0,Y.A)(s,2),u=m[0],d=m[1],h=(0,i.useState)(""),g=(0,Y.A)(h,2),f=g[0],p=g[1],A=function(e){var t=new Date,n=new Date(e);return isNaN(n.getTime())?o("common.invalid_date"):n<t?o("challenges.seven_majors.date_in_past"):""};return i.createElement(je.A,{open:t,onClose:n,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"schedule-ascent-dialog-title"},i.createElement(Te.A,{id:"schedule-ascent-dialog-title"},i.createElement(z.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}},i.createElement(V.A,{variant:"h6"},i.createElement(ke.A,{sx:{mr:1,verticalAlign:"middle"}}),o("challenges.seven_majors.schedule_ascent")),i.createElement(ae.A,{onClick:n,"aria-label":"close"},i.createElement(Ue.A,null)))),i.createElement(Pe.A,{dividers:!0},i.createElement(z.A,{sx:{mb:2}},i.createElement(V.A,{variant:"subtitle1",gutterBottom:!0},o("challenges.seven_majors.scheduling_for"),":"),i.createElement(V.A,{variant:"h6",color:"primary"},l)),i.createElement(z.A,{sx:{mt:3}},i.createElement(V.A,{variant:"body2",gutterBottom:!0},o("challenges.seven_majors.schedule_instructions")),i.createElement(ie.A,{label:o("challenges.seven_majors.ascent_date"),type:"date",value:u,onChange:function(e){var t=e.target.value;d(t),p(A(t))},fullWidth:!0,error:!!f,helperText:f,InputLabelProps:{shrink:!0},sx:{mt:2},inputProps:{min:(new Date).toISOString().split("T")[0]}}))),i.createElement(Oe.A,{sx:{p:2}},i.createElement(le.A,{onClick:n,color:"inherit"},o("common.cancel")),i.createElement(le.A,{onClick:function(){var e=A(u);e?p(e):(r(a,u),n())},color:"primary",variant:"contained",disabled:!u||!!f},o("challenges.seven_majors.confirm_schedule"))))};const lt=function(){var e=(0,c.Bd)().t,t=((0,s.A)(),function(){var e=(0,i.useContext)(B);if(!e)throw new Error("useAuth doit \xeatre utilis\xe9 \xe0 l'int\xe9rieur d'un AuthProvider");return e}().isAuthenticated),n=function(){var e=(0,i.useContext)(M);if(void 0===e)throw new Error("useChallenge must be used within a ChallengeProvider");return e}(),r=n.loading,a=n.error,l=n.allCols,o=n.totalItems,m=n.filters,u=n.page,d=n.rowsPerPage,h=n.selectedCols,g=n.challengeName,f=n.isPublic,p=n.activeTab,A=n.predefinedChallenges,v=n.userChallenges,E=n.selectedCol,y=n.showColDetails,x=n.weatherData,b=n.showScheduleDialog,k=n.scheduleColId,w=n.scheduleColName,C=n.userCompletedCols,S=n.scheduledAscents,_=n.exportFormat,I=n.notification,j=n.setActiveTab,T=n.setPage,P=n.setFilters,O=n.selectCol,D=n.removeCol,F=n.setChallengeName,Z=n.setIsPublic,Y=n.viewColDetails,q=n.closeColDetails,$=n.saveChallenge,ee=n.markColAsCompleted,te=n.scheduleAscent,ne=n.openScheduleDialog,re=n.closeScheduleDialog,ae=n.deleteChallenge,le=n.likeChallenge,oe=n.loadChallenge,ie=n.clearNotification,ce=n.exportTrack,se=n.setExportFormat,me=function(e){O(e)},ue=function(e){Y(e)},de=function(e){ee(e)},he=function(){ie()},ge=function(){};return i.createElement(z.A,{sx:{width:"100%",backgroundColor:"background.paper",borderRadius:2,overflow:"hidden",boxShadow:3}},i.createElement(R.A,{elevation:0},i.createElement(L.A,{value:p,onChange:function(e,t){j(t)},"aria-label":"Challenge tabs",variant:"fullWidth",scrollButtons:"auto",textColor:"primary",indicatorColor:"primary",sx:{borderBottom:1,borderColor:"divider",mb:2}},i.createElement(W.A,{icon:i.createElement(J.A,null),label:e("challenge.search_cols"),id:"tab-0","aria-controls":"tabpanel-0"}),i.createElement(W.A,{icon:i.createElement(K.A,null),label:e("challenge.my_challenge"),id:"tab-1","aria-controls":"tabpanel-1"}),i.createElement(W.A,{icon:i.createElement(Q.A,null),label:e("challenge.predefined"),id:"tab-2","aria-controls":"tabpanel-2"}),i.createElement(W.A,{icon:i.createElement(X.A,null),label:e("challenge.community"),id:"tab-3","aria-controls":"tabpanel-3",disabled:!t}))),a&&i.createElement(U.A,{severity:"error",sx:{mb:2}},a),i.createElement(z.A,{sx:{p:2}},i.createElement(z.A,{role:"tabpanel",hidden:0!==p,id:"tabpanel-0","aria-labelledby":"tab-0"},0===p&&i.createElement(pe,{cols:l,loading:r,filters:m,onFilterChange:function(e){P(e)},onSelectCol:me,onViewDetails:ue,selectedColIds:h.map((function(e){return e.id})),maxColsReached:h.length>=7}),r&&i.createElement(z.A,{sx:{display:"flex",justifyContent:"center",my:4}},i.createElement(G.A,null)),!r&&0===l.length&&i.createElement(U.A,{severity:"info",sx:{mt:2}},e("challenge.no_cols_found")),!r&&l.length>0&&i.createElement(i.Fragment,null,i.createElement(z.A,{sx:{display:"flex",justifyContent:"center",my:2}},i.createElement(N.A,{count:Math.ceil(o/d),page:u,onChange:function(e,t){T(t)},color:"primary",showFirstButton:!0,showLastButton:!0})),i.createElement(V.A,{variant:"body2",color:"text.secondary",align:"center"},e("common.showing_items",{start:Math.min((u-1)*d+1,o),end:Math.min(u*d,o),total:o})))),i.createElement(z.A,{role:"tabpanel",hidden:1!==p,id:"tabpanel-1","aria-labelledby":"tab-1"},1===p&&i.createElement(Ce,{selectedCols:h,challengeName:g,onChallengeTitleChange:function(e){F(e)},onRemoveCol:function(e){D(e)},onViewCol:ue,onSaveChallenge:function(){$()},onMarkAsCompleted:de,onScheduleAscent:function(e,t){ne(e,t)},onShareChallenge:ge,isPublic:f,onTogglePublic:function(){Z(!f)},isAuthenticated:t,completedCols:C,scheduledAscents:S})),i.createElement(z.A,{role:"tabpanel",hidden:2!==p,id:"tabpanel-2","aria-labelledby":"tab-2"},2===p&&i.createElement(_e,{challenges:A,loading:r,error:a,onLoadChallenge:function(e){oe(e)},onViewColDetails:ue})),i.createElement(z.A,{role:"tabpanel",hidden:3!==p,id:"tabpanel-3","aria-labelledby":"tab-3"},3===p&&t&&i.createElement(Be,{challenges:v,loading:r,onLoadChallenge:function(e){oe(e)},onDeleteChallenge:function(e){ae(e)},onLikeChallenge:function(e){le(e)},onViewColDetails:ue,onShareChallenge:ge,userLikes:le})),i.createElement(rt,{open:y,col:E,onClose:function(){q()},onExportTrack:function(e){ce(e,_)},onMarkAsCompleted:de,onAddToChallenge:me,isSelected:!!E&&-1!==h.findIndex((function(e){return e.id===E.id})),isCompleted:!!E&&C.includes(E.id),maxColsReached:h.length>=7,exportFormat:_,onExportFormatChange:function(e){se(e)},weatherData:E?x[E.id]:null}),i.createElement(at,{open:b,onClose:re,onSchedule:function(e){te(e)},selectedColId:k,selectedColName:w}),i.createElement(H.A,{open:Boolean(I),autoHideDuration:6e3,onClose:he,message:null===I||void 0===I?void 0:I.message,anchorOrigin:{vertical:"bottom",horizontal:"center"}},I&&i.createElement(U.A,{onClose:he,severity:I.severity||"info",sx:{width:"100%"}},I.message))))};const ot=function(){return r.createElement(a.A,{sx:{padding:3,width:"100%",maxWidth:1200,margin:"0 auto",minHeight:"80vh"}},r.createElement(l.A,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:700,textAlign:"center",marginBottom:4,color:"primary.main"}},"Les 7 Majeurs - Challenge Cycliste"),r.createElement(r.Suspense,{fallback:r.createElement(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh"}},r.createElement(o.A,{size:60,thickness:4}))},r.createElement(lt,null)))}}}]);
//# sourceMappingURL=818.deaf81ef.chunk.js.map